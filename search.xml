<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ç±»å‹ä½“æ“ä»£ç ç‰‡æ®µ</title>
      <link href="/posts/5abfc5c1/"/>
      <url>/posts/5abfc5c1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>&quot;TSç±»å‹ä½“æ“&quot;é€šå¸¸æ˜¯æŒ‡åœ¨TypeScriptä¸­ä½¿ç”¨ç±»å‹ç³»ç»Ÿçš„ä¸€ç§æŠ€å·§ï¼Œä»¥æ›´å¥½åœ°åˆ©ç”¨TypeScriptçš„ç±»å‹æ£€æŸ¥åŠŸèƒ½ã€‚TypeScriptæ˜¯JavaScriptçš„ä¸€ä¸ªè¶…é›†ï¼Œå®ƒæ·»åŠ äº†é™æ€ç±»å‹å®šä¹‰ï¼Œä½¿å¾—åœ¨å¼€å‘å¤§å‹åº”ç”¨ç¨‹åºæ—¶æ›´å®¹æ˜“è¿›è¡Œç±»å‹æ£€æŸ¥å’Œè°ƒè¯•ã€‚TSç±»å‹ä½“æ“æ˜¯æŒ‡åˆ©ç”¨TypeScriptå¼ºå¤§çš„ç±»å‹ç³»ç»Ÿï¼Œé€šè¿‡å·§å¦™çš„ç±»å‹å®šä¹‰å’Œä½¿ç”¨æŠ€å·§ï¼Œä»¥åŠä¸€äº›ç‰¹æ®Šçš„ç±»å‹æ“ä½œï¼Œæ¥å®ç°æ›´é«˜çº§ã€æ›´å¤æ‚çš„ç±»å‹æ£€æŸ¥å’Œç±»å‹æ¨æ–­ã€‚</p></blockquote><p>æœ€è¿‘ä¸ºäº†æ›´å¥½çš„å­¦ä¹ tsçš„ç±»å‹ç³»ç»Ÿï¼Œå¼€å§‹ç»ƒä¹ ç±»å‹ä½“æ“ã€‚åœ°å€ï¼š<br><a href="https://github.com/type-challenges/type-challenges" target="_blank" rel="noopener">https://github.com/type-challenges/type-challenges</a><br>è®°å½•ä¸€äº›å¸¸ç”¨çš„ç±»å‹æŠ€å·§</p><h1>ç±»å‹ä½“æ“åŒ…æ‹¬å“ªäº›å†…å®¹ï¼Ÿ</h1><p>TSç±»å‹ä½“æ“å¯ä»¥åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š</p><p>ç±»å‹æ¨æ–­å’Œç±»å‹æ³¨è§£ï¼šTypeScriptå…è®¸ä½ åœ¨å˜é‡ã€å‡½æ•°å‚æ•°ã€å‡½æ•°è¿”å›ç±»å‹ç­‰åœ°æ–¹è¿›è¡Œç±»å‹æ³¨è§£ï¼ŒåŒæ—¶ä¹Ÿæœ‰ä¸€å®šçš„ç±»å‹æ¨æ–­æœºåˆ¶ï¼Œå¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨æ¨æ–­ç±»å‹ã€‚<br>è”åˆç±»å‹å’Œäº¤å‰ç±»å‹ï¼šé€šè¿‡è”åˆç±»å‹ï¼ˆUnion Typesï¼‰å’Œäº¤å‰ç±»å‹ï¼ˆIntersection Typesï¼‰ï¼Œå¯ä»¥å°†å¤šç§ç±»å‹ç»„åˆåœ¨ä¸€èµ·ï¼Œå®ç°æ›´çµæ´»çš„ç±»å‹å®šä¹‰ã€‚<br>æ³›å‹ï¼šä½¿ç”¨æ³›å‹å¯ä»¥åœ¨å¤šä¸ªåœ°æ–¹é‡ç”¨ç›¸åŒçš„ç±»å‹ï¼Œå¢åŠ ä»£ç çš„çµæ´»æ€§å’Œé‡ç”¨æ€§ã€‚<br>æ¡ä»¶ç±»å‹ï¼šæ¡ä»¶ç±»å‹æ˜¯TypeScriptä¸­çš„é«˜çº§ç±»å‹ï¼Œå…è®¸æ ¹æ®å…¶ä»–ç±»å‹æ¥é€‰æ‹©å…¶ä¸­ä¸€ç§ç±»å‹å®šä¹‰ã€‚<br>æ˜ å°„ç±»å‹ï¼šæ˜ å°„ç±»å‹å…è®¸ä½ ä»ä¸€ä¸ªç°æœ‰çš„ç±»å‹åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œå…¶ä¸­æ¯ä¸ªå±æ€§éƒ½å¯ä»¥æŒ‰ç…§ä¸€å®šçš„è§„åˆ™è½¬æ¢ã€‚<br>ç±»å‹å®ˆå«ï¼šä½¿ç”¨ç±»å‹å®ˆå«å¯ä»¥åœ¨è¿è¡Œæ—¶æ£€æŸ¥ç±»å‹ï¼Œå¸®åŠ©ä½ åœ¨ä»£ç ä¸­å¤„ç†ä¸åŒçš„ç±»å‹æƒ…å†µã€‚<br>keyof æ“ä½œç¬¦ï¼škeyof æ“ä½œç¬¦ç”¨äºè·å–å¯¹è±¡ç±»å‹çš„æ‰€æœ‰é”®ï¼Œå®ƒå¸¸ç”¨äºæ³›å‹çº¦æŸå’Œç±»å‹æ“ä½œã€‚<br>ç±»å‹æ“ä½œç¬¦ï¼šTypeScriptæä¾›äº†ä¸€äº›ç±»å‹æ“ä½œç¬¦ï¼Œå¦‚keyofã€typeofã€inç­‰ï¼Œç”¨äºæ“ä½œå’Œè·å–ç±»å‹ä¿¡æ¯ã€‚<br>ç´¢å¼•ç±»å‹ï¼šç´¢å¼•ç±»å‹å¯ä»¥ç”¨äºè®¿é—®å¯¹è±¡çš„å±æ€§ï¼Œå¹¶ä¿ç•™å…¶ç±»å‹ä¿¡æ¯ã€‚</p><p>TSç±»å‹ä½“æ“æ˜¯åˆ©ç”¨TypeScriptå¼ºå¤§ç±»å‹ç³»ç»Ÿçš„ä¸€ç§æŠ€å·§å’Œæ€ç»´æ–¹å¼ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°åˆ©ç”¨ç±»å‹æ£€æŸ¥æ¥æé«˜ä»£ç çš„å¯é æ€§å’Œå¥å£®æ€§ã€‚</p><h1>ä»£ç ç‰‡æ®µ</h1><p>åˆ¤æ–­ä¸¤ä¸ªç±»å‹æ˜¯å¦ç›¸ç­‰</p><pre><code class="language-ts">export type Equal&lt;X, Y&gt; = (&lt;T&gt;() =&gt; T extends X ? 1 : 2) extends &lt;T&gt;() =&gt; T extends Y ? 1 : 2  ? true  : false</code></pre><p>éå†ä¸€ä¸ªæ•°ç»„çš„ç±»å‹</p><pre><code class="language-ts">type TupleToObject&lt;T extends readonly any[]&gt; = {  // éå†å†™æ³•ï¼š[key in T[number]]  [key in T[number]]: key;};</code></pre><p>éå†è”åˆç±»å‹</p><pre><code class="language-ts">// å¯¹äºè”åˆç±»å‹ï¼Œextends è¯­æ³•ï¼Œä¼šæŠŠTä¸­æ¯ä¸€ä¸ªç±»å‹éƒ½æ‹¿å‡ºæ¥è¿›è¡Œä¸€æ¬¡åˆ¤æ–­type MyExclude&lt;T, U&gt; = T extends U ? never : T;// å†æ¥ä¸ªä¾‹å­ï¼Œå®ç°æ³›å‹IsUnion&lt;T&gt;ï¼Œå®ƒå¯ä»¥åˆ¤æ–­Tæ˜¯å¦ä¸ºè”åˆç±»å‹ã€‚T å¦‚æœæ˜¯è”åˆç±»å‹ï¼Œä¼šåˆ†æˆå¤šä¸ªå­ç±»å‹å’ŒB æ¯”è¾ƒï¼Œç„¶åå†åˆ¤æ–­// B çš„æ‰€æœ‰ç±»å‹æ˜¯ä¸æ˜¯å’Œå’ŒT çš„å­ç±»å‹ä¸€è‡´ï¼Œè¿™é‡Œåˆ©ç”¨[B] é˜»æ­¢ç¬¬äºŒä¸ªextends åšç±»å‹æ‹†åˆ†ã€‚type IsUnion&lt;T, B = T&gt; = T extends B ? [B] extends [T] ? false : true : never;// æµ‹è¯•type case1 = IsUnion&lt;string&gt;  // falsetype case2 = IsUnion&lt;string|number&gt;  // truetype case3 = IsUnion&lt;[string|number]&gt;  // false</code></pre><p>å­—ç¬¦ä¸²ç±»å‹åˆ¤æ–­</p><pre><code class="language-ts">// å¯¹äºå­—ç¬¦ä¸²çš„ç±»å‹åˆ¤æ–­ï¼Œå¯ä»¥ç”¨extends æ¥åˆ¤æ–­ï¼Œtype TrimsChars = &quot; &quot; | &quot;\n&quot; | &quot;\t&quot;;type TrimLeft&lt;S extends string&gt; = S extends `${TrimsChars}${infer R}`  ? TrimLeft&lt;R&gt;  : S;</code></pre><p>åˆå¹¶æ•°ç»„</p><pre><code class="language-ts">type Concat&lt;T extends any[], U extends any[]&gt; = [...T, ...U]</code></pre><p>ç”Ÿæˆæ•°ç»„</p><pre><code class="language-ts">type newArr&lt;T extends number, A extends any[] = []&gt; =   A['length'] extends T    ? A    : newArr&lt;T, [...A, '']&gt;type newArr&lt;5&gt; = ['','','','','']    </code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Promiseä¸ç»å¸¸ä½¿ç”¨çš„ä¸¤ä¸ªå‡½æ•°</title>
      <link href="/posts/90d0eaa2/"/>
      <url>/posts/90d0eaa2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Promise å‰ç«¯ç”¨çš„æ¯”è¾ƒå¤šï¼Œæ¯”å¦‚<code>Promise.all</code>, <code>Promise.race</code>, ä½†æ˜¯promiseä¸¤ä¸ªä¸å¤ªå¸¸è§çš„å‡½æ•°<code>Promise.allSettled()</code> å’Œ <code>Promise.any()</code></p></blockquote><h1>Promise.allSettled()</h1><p>Promise.allSettled() é™æ€æ–¹æ³•å°†ä¸€ä¸ª Promise å¯è¿­ä»£å¯¹è±¡ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªå•ç‹¬çš„ Promiseã€‚å½“æ‰€æœ‰è¾“å…¥çš„ Promise éƒ½å·²æ•²å®šæ—¶ï¼ˆåŒ…æ‹¬ä¼ å…¥ç©ºçš„å¯è¿­ä»£å¯¹è±¡æ—¶ï¼‰ï¼Œè¿”å›çš„ Promise å°†è¢«å…‘ç°ï¼Œå¹¶å¸¦æœ‰æè¿°æ¯ä¸ª Promise ç»“æœçš„å¯¹è±¡æ•°ç»„ã€‚</p><p>Promise.allSettled() æ–¹æ³•æ˜¯ promise å¹¶å‘æ–¹æ³•ä¹‹ä¸€ã€‚åœ¨ä½ æœ‰å¤šä¸ªä¸ä¾èµ–äºå½¼æ­¤æˆåŠŸå®Œæˆçš„å¼‚æ­¥ä»»åŠ¡æ—¶ï¼Œæˆ–è€…ä½ æ€»æ˜¯æƒ³çŸ¥é“æ¯ä¸ª promise çš„ç»“æœæ—¶ï¼Œä½¿ç”¨ Promise.allSettled() ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œå¦‚æœä»»åŠ¡ç›¸äº’ä¾èµ–ï¼Œæˆ–è€…å¦‚æœä½ æƒ³åœ¨ä»»ä½• promise è¢«æ‹’ç»æ—¶ç«‹å³æ‹’ç»ï¼ŒPromise.all() è¿”å›çš„ Promise å¯èƒ½æ›´åˆé€‚ã€‚</p><h1>Promise.any()</h1><p>Promise.any() é™æ€æ–¹æ³•å°†ä¸€ä¸ª Promise å¯è¿­ä»£å¯¹è±¡ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ª Promiseã€‚å½“è¾“å…¥çš„ä»»ä½•ä¸€ä¸ª Promise å…‘ç°æ—¶ï¼Œè¿™ä¸ªè¿”å›çš„ Promise å°†ä¼šå…‘ç°ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªå…‘ç°çš„å€¼ã€‚å½“æ‰€æœ‰è¾“å…¥ Promise éƒ½è¢«æ‹’ç»ï¼ˆåŒ…æ‹¬ä¼ é€’äº†ç©ºçš„å¯è¿­ä»£å¯¹è±¡ï¼‰æ—¶ï¼Œå®ƒä¼šä»¥ä¸€ä¸ªåŒ…å«æ‹’ç»åŸå› æ•°ç»„çš„ AggregateError æ‹’ç»ã€‚</p><p>Promise.any() æ–¹æ³•æ˜¯ Promise å¹¶å‘æ–¹æ³•ä¹‹ä¸€ã€‚è¯¥æ–¹æ³•å¯¹äºè¿”å›ç¬¬ä¸€ä¸ªå…‘ç°çš„ Promise éå¸¸æœ‰ç”¨ã€‚ä¸€æ—¦æœ‰ä¸€ä¸ª Promise å…‘ç°ï¼Œå®ƒå°±ä¼šç«‹å³è¿”å›ï¼Œå› æ­¤ä¸ä¼šç­‰å¾…å…¶ä»– Promise å®Œæˆã€‚</p><p>ä¸ Promise.all() è¿”å›ä¸€ä¸ªå…‘ç°å€¼æ•°ç»„ä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬åªä¼šå¾—åˆ°ä¸€ä¸ªå…‘ç°å€¼ï¼ˆå‡è®¾è‡³å°‘æœ‰ä¸€ä¸ª Promise è¢«å…‘ç°ï¼‰ã€‚æ­¤æ–¹æ³•å¯¹äºé‚£äº›å¦‚æœæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ª Promise è¢«å…‘ç°ï¼Œä½†ä¸åœ¨æ„å“ªä¸€ä¸ªè¢«å…‘ç°çš„æƒ…å†µæ›´æœ‰ç›Šã€‚è¯·æ³¨æ„å¦ä¸€ä¸ªåŒºåˆ«ï¼šè¯¥æ–¹æ³•åœ¨æ¥æ”¶åˆ°ç©ºçš„å¯è¿­ä»£å¯¹è±¡æ—¶ä¼šæ‹’ç»ï¼Œå› ä¸ºå®é™…ä¸Šï¼Œè¯¥å¯è¿­ä»£å¯¹è±¡ä¸åŒ…å«ä»»ä½•å…‘ç°çš„é¡¹ã€‚ä½ å¯ä»¥å°† Promise.any() å’Œ Promise.all() ä¸ Array.prototype.some() å’Œ Array.prototype.every() è¿›è¡Œæ¯”è¾ƒã€‚</p><p>åŒæ—¶ï¼Œä¸ Promise.race() è¿”å›ç¬¬ä¸€ä¸ªæ•²å®šï¼ˆæ— è®ºæ˜¯å…‘ç°è¿˜æ˜¯æ‹’ç»ï¼‰çš„å€¼ä¸åŒçš„æ˜¯ï¼Œè¯¥æ–¹æ³•è¿”å›ç¬¬ä¸€ä¸ªå…‘ç°çš„å€¼ã€‚è¯¥æ–¹æ³•å¿½ç•¥æ‰€æœ‰è¢«æ‹’ç»çš„ Promiseï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªè¢«å…‘ç°çš„ Promiseã€‚</p><p>å‚è€ƒï¼š<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> typeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jsåˆ›å»ºäºŒç»´æ•°ç»„</title>
      <link href="/posts/f6cbb8a5/"/>
      <url>/posts/f6cbb8a5/</url>
      
        <content type="html"><![CDATA[<p><code>js</code> åˆ›å»ºäºŒç»´æ•°ç»„ä¸åƒ<code>java</code>é‚£ä¹ˆç›´ç™½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–ä¸€ä¸ª3 * 3 çš„äºŒç»´æ•°ç»„</span></span><br><span class="line"><span class="type">int</span> nums[][] = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>][<span class="number">3</span>];</span><br></pre></td></tr></table></figure><p>ä¹‹å‰æˆ‘éƒ½æ˜¯è¿™æ ·å†™çš„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nums = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">3</span>).<span class="title function_">fill</span>(<span class="number">0</span>).<span class="title function_">map</span>(<span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">3</span>).<span class="title function_">fill</span>(<span class="number">0</span>))</span><br></pre></td></tr></table></figure><p>ä»Šå¤©çœ‹åˆ°ä¸€ä¸ªæ›´ç®€æ´çš„å†™æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nums = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: <span class="number">3</span> &#125;, <span class="function">() =&gt;</span> [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]);</span><br></pre></td></tr></table></figure><p>ä¸»è¦æ˜¯åˆ©ç”¨äº†<code>Array.from</code>è¿™ä¸ªè¯­æ³•<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from</a></p><p>Array.from(arrayLike)<br>Array.from(arrayLike, mapFn)<br>Array.from(arrayLike, mapFn, thisArg)</p><p>ä¸»è¦æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªarrayLikeå¯¹è±¡ï¼Œè¿™é‡Œå¯ä»¥ä¼ <code>&#123; length: 3 &#125;</code>ï¼Œæ¯”èµ·æˆ‘ä¹‹å‰çš„å†™æ³•ï¼Œçœ‹èµ·æ¥æ›´ç®€æ´å’Œå¯è¯»ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="string">&#x27;foo&#x27;</span>));</span><br><span class="line"><span class="comment">// Expected output: Array [&quot;f&quot;, &quot;o&quot;, &quot;o&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="function">(<span class="params">x</span>) =&gt;</span> x + x));</span><br><span class="line"><span class="comment">// Expected output: Array [2, 4, 6]</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> javaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€ç®€å•çš„cssæ’ç‰ˆä»£ç </title>
      <link href="/posts/ba9e13e/"/>
      <url>/posts/ba9e13e/</url>
      
        <content type="html"><![CDATA[<blockquote><p>RT, å‡ è¡Œç®€å•çš„css ä»£ç è®©ä½ çš„æ’ç‰ˆçœ‹èµ·æ¥not bad, psï¼ˆè¿™ç¯‡post æ˜¯ç”¨ github Codespaces æäº¤çš„ï¼‰ã€‚</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">70ch</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">3em</span> <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.75</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.25em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span>,</span><br><span class="line"><span class="selector-tag">h2</span>,</span><br><span class="line"><span class="selector-tag">h3</span>,</span><br><span class="line"><span class="selector-tag">h4</span>,</span><br><span class="line"><span class="selector-tag">h5</span>,</span><br><span class="line"><span class="selector-tag">h6</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">3em</span> <span class="number">0</span> <span class="number">1em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span>,</span><br><span class="line"><span class="selector-tag">ul</span>,</span><br><span class="line"><span class="selector-tag">ol</span> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#1d1d1d</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: sans-serif;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å‡ ä¸ªæœ‰æ„æ€çš„æ™ºåŠ›é¢˜</title>
      <link href="/posts/b998d6a0/"/>
      <url>/posts/b998d6a0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸ºäº†é”»ç‚¼è„‘åŠ›ï¼Œé¿å…æå‰æ‚£ä¸Šè€å¹´ç—´å‘†ç—‡ï¼Œæœ‰å¿…è¦åšä¸€äº›é”»ç‚¼æ€ç»´çš„æ™ºåŠ›é¢˜ã€‚ğŸ™‚è¿™é‡Œä¸ç»™å‡ºç­”æ¡ˆï¼Œç­”æ¡ˆç½‘ä¸Šéƒ½æœ‰ï¼Œåªç»™ä¸€ç‚¹æç¤ºã€‚</p></blockquote><h2 id="1-1000ç“¶è¯æ°´æ‰¾æ¯’è¯"><a class="header-anchor" href="#1-1000ç“¶è¯æ°´æ‰¾æ¯’è¯">Â¶</a>1.1000ç“¶è¯æ°´æ‰¾æ¯’è¯</h2><p>ä¸€é“ç»å…¸é¢˜ï¼Œç½‘ä¸Šéƒ½è¯´æ˜¯å¾®è½¯é¢è¯•é¢˜ï¼Œä½†è²Œä¼¼è¿™å‡ å¹´æ²¡è§å¾®è½¯è€ƒè¿‡â€¦</p><p>é¢˜ç›®æè¿°å¦‚ä¸‹ï¼š</p><p>ä¸€å…± 1000 ç“¶è¯æ°´ï¼Œå…¶ä¸­ 1 ç“¶æœ‰æ¯’è¯ã€‚<br>å·²çŸ¥å°ç™½é¼ å–æ¯’è¯ä¸€å¤©å†…æ­»<br>è‹¥æƒ³åœ¨ä¸€å¤©å†…æ‰¾åˆ°æ¯’è¯ï¼Œæœ€å°‘éœ€è¦å‡ åªå°ç™½é¼ ï¼Ÿ</p><p><strong>å…³é”®å­—ï¼šäºŒè¿›åˆ¶</strong></p><h2 id="2-æŠ¢30"><a class="header-anchor" href="#2-æŠ¢30">Â¶</a>2.æŠ¢30</h2><p>æŠ¢ 30 æ˜¯åŒäººæ¸¸æˆ<br>æ¸¸æˆè§„åˆ™æ˜¯ï¼šç¬¬ä¸€ä¸ªäººå–Š â€œ 1 â€æˆ– â€œ 2 â€ï¼Œç¬¬äºŒä¸ªäººè¦æ¥ç€å¾€ä¸‹å–Šä¸€ä¸ªæˆ–ä¸¤ä¸ªæ•°ï¼Œç„¶åå†è½®åˆ°ç¬¬ä¸€ä¸ªäººã€‚ä¸¤äººè½®æµè¿›è¡Œä¸‹å»ã€‚æœ€åå–Š 30 çš„äººè·èƒœã€‚é—®å–Šæ•°å­—çš„æœ€ä½³ç­–ç•¥ã€‚</p><p><strong>å…³é”®å­—ï¼šbashåšå¼ˆ</strong></p><h2 id="3-ä¸‰ä¸ªç©ºç“¶å­"><a class="header-anchor" href="#3-ä¸‰ä¸ªç©ºç“¶å­">Â¶</a>3.ä¸‰ä¸ªç©ºç“¶å­</h2><p>æœ‰ä¸‰ä¸ªç©ºç“¶å­ï¼Œä¸€ä¸ª8Lï¼Œä¸€ä¸ª5Lï¼Œä¸€ä¸ª3Lï¼Œç›®å‰8Lçš„ç“¶å­è£…æ»¡äº†ç‰›å¥¶ã€‚è¯•é—®ï¼Œå¦‚æœåœ¨ä¸æµªè´¹ä¸€æ»´æ°´å’Œæ— åˆ»åº¦çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•æµ‹é‡å‡º4Lçš„ç‰›å¥¶ï¼Ÿ</p><p><strong>å…³é”®å­—: æ¨¡æ‹Ÿï¼Œåæ¨</strong></p><h2 id="4-ç¯æ³¡å¼€å…³"><a class="header-anchor" href="#4-ç¯æ³¡å¼€å…³">Â¶</a>4.ç¯æ³¡å¼€å…³</h2><p>ä¸€ä¸ªåœ†ç¯ä¸Šæœ‰ 100 ä¸ªç¯æ³¡ï¼Œç¯æ³¡æœ‰äº®å’Œæš—ä¸¤ç§çŠ¶æ€ã€‚æŒ‰ä¸€ä¸ªç¯æ³¡çš„å¼€å…³å¯ä»¥æ”¹å˜å®ƒå’Œä¸å®ƒç›¸é‚»ä¸¤ä¸ªç¯æ³¡çš„çŠ¶æ€ã€‚ è®¾è®¡ä¸€ç§ç®—æ³•ï¼Œå¯¹äºä»»æ„åˆå§‹çŠ¶æ€ï¼Œä½¿æ‰€æœ‰ç¯æ³¡å…¨äº®ã€‚</p><p><strong>å…³é”®å­—ï¼šæ¨¡æ‹Ÿï¼Œåæ¨ï¼Œä»å…¨ç­å¯ä»¥æ¢å¤åˆ°å…¨äº®ã€‚</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> -æ™ºåŠ›é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rediså¸¸è§çš„ä½¿ç”¨æ¡ˆä¾‹</title>
      <link href="/posts/753a7543/"/>
      <url>/posts/753a7543/</url>
      
        <content type="html"><![CDATA[<blockquote><p><code>redis</code>é™¤äº†ç¼“å­˜ï¼Œè¿˜æœ‰å¾ˆå¤šçš„ä½¿ç”¨æ–¹å¼ï¼Œäº’è”ç½‘é¡¹ç›®çš„å¾ˆå¤šåŠŸèƒ½éƒ½æ˜¯é€šè¿‡<code>redis</code>å®ç°çš„ï¼Œä»Šå¤©ç®€å•ä»‹ç»ä¸€äº›ã€‚</p></blockquote><h2 id="ç®€å•å›é¡¾ä¸‹redisæ˜¯ä»€ä¹ˆ"><a class="header-anchor" href="#ç®€å•å›é¡¾ä¸‹redisæ˜¯ä»€ä¹ˆ">Â¶</a>ç®€å•å›é¡¾ä¸‹redisæ˜¯ä»€ä¹ˆ</h2><p><code>Redis</code>æ˜¯ä¸€ä¸ªä½¿ç”¨<code>ANSI C</code>ç¼–å†™çš„å¼€æºã€æ”¯æŒç½‘ç»œã€åŸºäºå†…å­˜ã€åˆ†å¸ƒå¼ã€å¯é€‰æŒä¹…æ€§çš„é”®å€¼å¯¹å­˜å‚¨æ•°æ®åº“ã€‚ä»2015å¹´6æœˆå¼€å§‹ï¼Œ<code>Redis</code>çš„å¼€å‘ç”±<code>Redis Labs</code>èµåŠ©ï¼Œè€Œ2013å¹´5æœˆè‡³2015å¹´6æœˆæœŸé—´ï¼Œå…¶å¼€å‘ç”±<code>Pivotal</code>èµåŠ©ã€‚åœ¨2013å¹´5æœˆä¹‹å‰ï¼Œå…¶å¼€å‘ç”±<code>VMware</code>èµåŠ©ã€‚æ ¹æ®æœˆåº¦æ’è¡Œç½‘ç«™<code>DB-Engines.com</code>çš„æ•°æ®ï¼Œ<code>Redis</code>æ˜¯æœ€æµè¡Œçš„é”®å€¼å¯¹å­˜å‚¨æ•°æ®åº“ã€‚</p><h2 id="redisçš„ç‰¹ç‚¹"><a class="header-anchor" href="#redisçš„ç‰¹ç‚¹">Â¶</a>redisçš„ç‰¹ç‚¹</h2><ol><li>é«˜æ€§èƒ½<br>æ€§èƒ½æé«˜ â€“ <code>Redis</code>èƒ½è¯»çš„é€Ÿåº¦æ˜¯110000æ¬¡/s,å†™çš„é€Ÿåº¦æ˜¯81000æ¬¡/s ã€‚</li><li>å’ŒåŸç”Ÿè¯­è¨€æ— ç¼çš„æ•°æ®ç»“æ„<br><code>Redis</code>æ”¯æŒäºŒè¿›åˆ¶æ¡ˆä¾‹çš„ <code>Strings</code>, <code>Lists</code>, <code>Hashes</code>, <code>Sets</code> åŠ <code>Ordered Sets</code> æ•°æ®ç±»å‹æ“ä½œã€‚</li><li>ä¸°å¯Œçš„ç‰¹æ€§<br>Redisè¿˜æ”¯æŒ <code>publish/subscribe</code>, é€šçŸ¥, <code>key</code> è¿‡æœŸç­‰ç­‰ç‰¹æ€§ã€‚</li><li>æ”¯æŒæŒä¹…åŒ–<br><code>Redis</code>æ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚</li><li>åˆ†å¸ƒå¼<br><code>Redis</code>æ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³<code>master-slave</code>æ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚</li><li>é«˜å¯ç”¨<br><code>Redis Sentinel</code> ä¸€ä¸ªåˆ†å¸ƒå¼æ¶æ„ï¼Œç›‘æ§å„ä¸ªæœºå™¨çš„çŠ¶æ€åŠæ—¶ä½œå‡ºè°ƒæ•´ï¼Œé‡æ–°é€‰å–ä¸»èŠ‚ç‚¹ã€‚</li></ol><h2 id="äº”ç§æ•°æ®ç±»å‹å’Œå¸¸è§ç”¨æ³•"><a class="header-anchor" href="#äº”ç§æ•°æ®ç±»å‹å’Œå¸¸è§ç”¨æ³•">Â¶</a>äº”ç§æ•°æ®ç±»å‹å’Œå¸¸è§ç”¨æ³•</h2><h3 id="1-string"><a class="header-anchor" href="#1-string">Â¶</a>1. <code>string</code></h3><p><code>string</code>åœ¨<code>redis</code>é‡Œæ˜¯é€šè¿‡å­—ç¬¦æ•°ç»„å®ç°çš„ã€‚ä½ å¯ä»¥ç†è§£æˆä¸ Memcached ä¸€æ¨¡ä¸€æ ·çš„ç±»å‹ï¼Œä¸€ä¸ª key å¯¹åº”ä¸€ä¸ª valueã€‚valueå…¶å®ä¸ä»…æ˜¯Stringï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°å­—ã€‚string ç±»å‹æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ã€‚æ„æ€æ˜¯ redis çš„ string å¯ä»¥åŒ…å«ä»»ä½•æ•°æ®ã€‚æ¯”å¦‚jpgå›¾ç‰‡æˆ–è€…åºåˆ—åŒ–çš„å¯¹è±¡ã€‚string ç±»å‹æ˜¯ Redis æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œstring ç±»å‹çš„å€¼æœ€å¤§èƒ½å­˜å‚¨ 512MBã€‚</p><h4 id="å¸¸è§çš„åœºæ™¯"><a class="header-anchor" href="#å¸¸è§çš„åœºæ™¯">Â¶</a>å¸¸è§çš„åœºæ™¯</h4><ol><li><code>json</code>å­—ç¬¦ä¸²å‚¨å­˜ç¼“å­˜</li><li><code>string</code>ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ä½œä¸ºè®¡æ•°å™¨ï¼Œä½¿ç”¨<code>INCR</code>å‘½ä»¤</li><li><code>redis</code>ä¹Ÿæ”¯æŒäºŒè¿›åˆ¶ï¼Œæ‰€ä»¥å¯ä»¥å½“ä½œä¸€ä¸ª<code>bitmap</code>,æŠŠå›ºå®šé•¿åº¦çš„bitä½å‚¨å­˜æ•°æ®ã€‚</li><li>å¸ƒéš†è¿‡æ»¤å™¨ï¼Œä¸€ä¸ªå¾ˆé•¿çš„äºŒè¿›åˆ¶å‘é‡ï¼Œä½œä¸ºè¶…å¤§çš„åŒ…å«å…³ç³»çš„æŸ¥è¯¢ã€‚è¯¦ç»†ç‚¹å‡»<a href="https://www.huaweicloud.com/articles/cd70d43549f0a4c36641be61780ab66a.html">è¿™é‡Œ</a></li><li>åˆ†å¸ƒå¼é”ï¼Œæ¯”è¾ƒå¤æ‚ï¼Œå¯ä»¥çœ‹ä¸‹<a href="https://xiaomi-info.github.io/2019/12/17/redis-distributed-lock/">è¿™é‡Œ</a>ã€‚</li></ol><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">APPEND key value</span><br><span class="line">summary: Append a value to a key</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">BITCOUNT key [start end]</span><br><span class="line">summary: Count <span class="built_in">set</span> bits <span class="keyword">in</span> a string</span><br><span class="line">since: 2.6.0</span><br><span class="line"></span><br><span class="line">BITFIELD key [GET <span class="built_in">type</span> offset] [SET <span class="built_in">type</span> offset value] [INCRBY <span class="built_in">type</span> offset increment] [OVERFLOW WRAP|SAT|FAIL]</span><br><span class="line">summary: Perform arbitrary bitfield <span class="built_in">integer</span> operations on strings</span><br><span class="line">since: 3.2.0</span><br><span class="line"></span><br><span class="line">BITOP operation destkey key [key ...]</span><br><span class="line">summary: Perform bitwise operations between strings</span><br><span class="line">since: 2.6.0</span><br><span class="line"></span><br><span class="line">BITPOS key bit [start] [end]</span><br><span class="line">summary: Find first bit <span class="built_in">set</span> or clear <span class="keyword">in</span> a string</span><br><span class="line">since: 2.8.7</span><br><span class="line"></span><br><span class="line">DECR key</span><br><span class="line">summary: Decrement the <span class="built_in">integer</span> value of a key by one</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">DECRBY key decrement</span><br><span class="line">summary: Decrement the <span class="built_in">integer</span> value of a key by the given number</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">GET key</span><br><span class="line">summary: Get the value of a key</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">GETBIT key offset</span><br><span class="line">summary: Returns the bit value at offset <span class="keyword">in</span> the string value stored at key</span><br><span class="line">since: 2.2.0</span><br><span class="line"></span><br><span class="line">GETRANGE key start end</span><br><span class="line">summary: Get a substring of the string stored at a key</span><br><span class="line">since: 2.4.0</span><br><span class="line"></span><br><span class="line">GETSET key value</span><br><span class="line">summary: Set the string value of a key and <span class="built_in">return</span> its old value</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">INCR key</span><br><span class="line">summary: Increment the <span class="built_in">integer</span> value of a key by one</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">INCRBY key increment</span><br><span class="line">summary: Increment the <span class="built_in">integer</span> value of a key by the given amount</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">INCRBYFLOAT key increment</span><br><span class="line">summary: Increment the <span class="built_in">float</span> value of a key by the given amount</span><br><span class="line">since: 2.6.0</span><br><span class="line"></span><br><span class="line">MGET key [key ...]</span><br><span class="line">summary: Get the values of all the given keys</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">MSET key value [key value ...]</span><br><span class="line">summary: Set multiple keys to multiple values</span><br><span class="line">since: 1.0.1</span><br><span class="line"></span><br><span class="line">MSETNX key value [key value ...]</span><br><span class="line">summary: Set multiple keys to multiple values, only <span class="keyword">if</span> none of the keys exist</span><br><span class="line">since: 1.0.1</span><br><span class="line"></span><br><span class="line">PSETEX key milliseconds value</span><br><span class="line">summary: Set the value and expiration <span class="keyword">in</span> milliseconds of a key</span><br><span class="line">since: 2.6.0</span><br><span class="line"></span><br><span class="line">SET key value [EX seconds] [PX milliseconds] [NX|XX]</span><br><span class="line">summary: Set the string value of a key</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SETBIT key offset value</span><br><span class="line">summary: Sets or clears the bit at offset <span class="keyword">in</span> the string value stored at key</span><br><span class="line">since: 2.2.0</span><br><span class="line"></span><br><span class="line">SETEX key seconds value</span><br><span class="line">summary: Set the value and expiration of a key</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">SETNX key value</span><br><span class="line">summary: Set the value of a key, only <span class="keyword">if</span> the key does not exist</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SETRANGE key offset value</span><br><span class="line">summary: Overwrite part of a string at key starting at the specified offset</span><br><span class="line">since: 2.2.0</span><br><span class="line"></span><br><span class="line">STRLEN key</span><br><span class="line">summary: Get the length of the value stored <span class="keyword">in</span> a key</span><br><span class="line">since: 2.2.0</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-hash"><a class="header-anchor" href="#2-hash">Â¶</a>2. hash</h3><p>Hash æ˜¯ä¸€ä¸ªé”®å€¼(key =&gt; value)å¯¹é›†åˆã€‚Redis hash æ˜¯ä¸€ä¸ª string ç±»å‹çš„ field å’Œ value çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚æ¯”å¦‚å‚¨å­˜ç”¨æˆ·ä¿¡æ¯ã€‚ç”¨æˆ·idä½œä¸ºkeyï¼Œå§“åï¼Œå¹´é¾„ï¼Œç”Ÿæ—¥ç­‰ä¿¡æ¯å¯ä»¥ç»´æŠ¤åºåˆ—åŒ–çš„å¯¹è±¡ã€‚</p><h4 id="ä½¿ç”¨åœºæ™¯"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯">Â¶</a>ä½¿ç”¨åœºæ™¯</h4><ol><li>å­˜å‚¨å¯¹è±¡ç±»æ•°æ®ï¼Œå› æ­¤å¯ä»¥å­˜ä¸€äº›ç»“æ„åŒ–çš„æ•°æ®ï¼Œæ¯”å¦‚è´­ç‰©è½¦ï¼Œç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€‚</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">HDEL key field [field ...]</span><br><span class="line">summary: Delete one or more <span class="built_in">hash</span> fields</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">HEXISTS key field</span><br><span class="line">summary: Determine <span class="keyword">if</span> a <span class="built_in">hash</span> field exists</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">HGET key field</span><br><span class="line">summary: Get the value of a <span class="built_in">hash</span> field</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">HGETALL key</span><br><span class="line">summary: Get all the fields and values <span class="keyword">in</span> a <span class="built_in">hash</span></span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">HINCRBY key field increment</span><br><span class="line">summary: Increment the <span class="built_in">integer</span> value of a <span class="built_in">hash</span> field by the given number</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">HINCRBYFLOAT key field increment</span><br><span class="line">summary: Increment the <span class="built_in">float</span> value of a <span class="built_in">hash</span> field by the given amount</span><br><span class="line">since: 2.6.0</span><br><span class="line"></span><br><span class="line">HKEYS key</span><br><span class="line">summary: Get all the fields <span class="keyword">in</span> a <span class="built_in">hash</span></span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">HLEN key</span><br><span class="line">summary: Get the number of fields <span class="keyword">in</span> a <span class="built_in">hash</span></span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">HMGET key field [field ...]</span><br><span class="line">summary: Get the values of all the given <span class="built_in">hash</span> fields</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">HMSET key field value [field value ...]</span><br><span class="line">summary: Set multiple <span class="built_in">hash</span> fields to multiple values</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">HSCAN key cursor [MATCH pattern] [COUNT count]</span><br><span class="line">summary: Incrementally iterate <span class="built_in">hash</span> fields and associated values</span><br><span class="line">since: 2.8.0</span><br><span class="line"></span><br><span class="line">HSET key field value</span><br><span class="line">summary: Set the string value of a <span class="built_in">hash</span> field</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">HSETNX key field value</span><br><span class="line">summary: Set the value of a <span class="built_in">hash</span> field, only <span class="keyword">if</span> the field does not exist</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">HSTRLEN key field</span><br><span class="line">summary: Get the length of the value of a <span class="built_in">hash</span> field</span><br><span class="line">since: 3.2.0</span><br><span class="line"></span><br><span class="line">HVALS key</span><br><span class="line">summary: Get all the values <span class="keyword">in</span> a <span class="built_in">hash</span></span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-list"><a class="header-anchor" href="#3-list">Â¶</a>3. list</h3><p>list åˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰ã€‚<br>å¯ä»¥ä½œä¸ºä¸€ä¸ªç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p><h4 id="ä½¿ç”¨åœºæ™¯-v2"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-v2">Â¶</a>ä½¿ç”¨åœºæ™¯</h4><ol><li>ç®€æ˜“æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå³(å·¦)è¾¹è¿›å·¦(å³)è¾¹å‡ºï¼Œç”¨æ¥æ¶ˆè´¹é˜Ÿåˆ—é‡Œçš„ä¿¡æ¯ã€‚ä½†æ˜¯ackæœºåˆ¶éº»çƒ¦ï¼Œå¤æ‚åœºæ™¯è¿˜æ˜¯ä½¿ç”¨ä¸“ä¸šçš„mqã€‚</li><li>ä½œä¸ºæ ˆä½¿ç”¨ï¼Œæ”¯æŒå³(å·¦)è¾¹è¿›å³(å·¦)è¾¹å‡ºã€‚</li><li>ç”¨äºå‚¨å­˜çº¿æ€§æ•°æ®ï¼Œæ¯”å¦‚æŸä¸ªäººçš„å…³æ³¨åˆ—è¡¨ã€‚æ–‡ç« ç‚¹èµçš„äººçš„idã€‚</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">BLPOP key [key ...] <span class="built_in">timeout</span></span><br><span class="line">summary: Remove and get the first element <span class="keyword">in</span> a list, or block <span class="keyword">until</span> one is available</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">BRPOP key [key ...] <span class="built_in">timeout</span></span><br><span class="line">summary: Remove and get the last element <span class="keyword">in</span> a list, or block <span class="keyword">until</span> one is available</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">BRPOPLPUSH <span class="built_in">source</span> destination <span class="built_in">timeout</span></span><br><span class="line">summary: Pop a value from a list, push it to another list and <span class="built_in">return</span> it; or block <span class="keyword">until</span> one is available</span><br><span class="line">since: 2.2.0</span><br><span class="line"></span><br><span class="line">LINDEX key index</span><br><span class="line">summary: Get an element from a list by its index</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">LINSERT key BEFORE|AFTER pivot value</span><br><span class="line">summary: Insert an element before or after another element <span class="keyword">in</span> a list</span><br><span class="line">since: 2.2.0</span><br><span class="line"></span><br><span class="line">LLEN key</span><br><span class="line">summary: Get the length of a list</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">LPOP key</span><br><span class="line">summary: Remove and get the first element <span class="keyword">in</span> a list</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">LPUSH key value [value ...]</span><br><span class="line">summary: Prepend one or multiple values to a list</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">LPUSHX key value</span><br><span class="line">summary: Prepend a value to a list, only <span class="keyword">if</span> the list exists</span><br><span class="line">since: 2.2.0</span><br><span class="line"></span><br><span class="line">LRANGE key start stop</span><br><span class="line">summary: Get a range of elements from a list</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">LREM key count value</span><br><span class="line">summary: Remove elements from a list</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">LSET key index value</span><br><span class="line">summary: Set the value of an element <span class="keyword">in</span> a list by its index</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">LTRIM key start stop</span><br><span class="line">summary: Trim a list to the specified range</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">RPOP key</span><br><span class="line">summary: Remove and get the last element <span class="keyword">in</span> a list</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">RPOPLPUSH <span class="built_in">source</span> destination</span><br><span class="line">summary: Remove the last element <span class="keyword">in</span> a list, prepend it to another list and <span class="built_in">return</span> it</span><br><span class="line">since: 1.2.0</span><br><span class="line"></span><br><span class="line">RPUSH key value [value ...]</span><br><span class="line">summary: Append one or multiple values to a list</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">RPUSHX key value</span><br><span class="line">summary: Append a value to a list, only <span class="keyword">if</span> the list exists</span><br><span class="line">since: 2.2.0</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-set"><a class="header-anchor" href="#4-set">Â¶</a>4. set</h3><p>set æ˜¯stringç±»å‹çš„æ— åºé›†åˆã€‚é›†åˆæ˜¯é€šè¿‡hashtableå®ç°çš„ï¼Œæ¦‚å¿µå’Œæ•°å­¦ä¸­ä¸ªçš„é›†åˆåŸºæœ¬ç±»ä¼¼ï¼Œå¯ä»¥äº¤é›†ï¼Œå¹¶é›†ï¼Œå·®é›†ç­‰ç­‰ï¼Œsetä¸­çš„å…ƒç´ æ˜¯æ²¡æœ‰é¡ºåºçš„ã€‚æ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯O(1)ã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯-v3"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-v3">Â¶</a>ä½¿ç”¨åœºæ™¯</h3><ol><li>å»é‡ï¼Œå¤šå°æœåŠ¡å¯ä»¥æ”¾åœ¨ä¸€ä¸ªseté‡Œå»é‡ã€‚</li><li>redis æä¾›äº†æ±‚äº¤é›†ã€å¹¶é›†ã€å·®é›†çš„æ“ä½œï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„å®ç°å¦‚å…±åŒå…³æ³¨ã€å…±åŒå–œå¥½ã€äºŒåº¦å¥½å‹ç­‰åŠŸèƒ½ã€‚</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">SADD key member [member ...]</span><br><span class="line">summary: Add one or more members to a <span class="built_in">set</span></span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SCARD key</span><br><span class="line">summary: Get the number of members <span class="keyword">in</span> a <span class="built_in">set</span></span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SDIFF key [key ...]</span><br><span class="line">summary: Subtract multiple sets</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SDIFFSTORE destination key [key ...]</span><br><span class="line">summary: Subtract multiple sets and store the resulting <span class="built_in">set</span> <span class="keyword">in</span> a key</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SINTER key [key ...]</span><br><span class="line">summary: Intersect multiple sets</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SINTERSTORE destination key [key ...]</span><br><span class="line">summary: Intersect multiple sets and store the resulting <span class="built_in">set</span> <span class="keyword">in</span> a key</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SISMEMBER key member</span><br><span class="line">summary: Determine <span class="keyword">if</span> a given value is a member of a <span class="built_in">set</span></span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SMEMBERS key</span><br><span class="line">summary: Get all the members <span class="keyword">in</span> a <span class="built_in">set</span></span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SMOVE <span class="built_in">source</span> destination member</span><br><span class="line">summary: Move a member from one <span class="built_in">set</span> to another</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SPOP key [count]</span><br><span class="line">summary: Remove and <span class="built_in">return</span> one or multiple random members from a <span class="built_in">set</span></span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SRANDMEMBER key [count]</span><br><span class="line">summary: Get one or multiple random members from a <span class="built_in">set</span></span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SREM key member [member ...]</span><br><span class="line">summary: Remove one or more members from a <span class="built_in">set</span></span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SSCAN key cursor [MATCH pattern] [COUNT count]</span><br><span class="line">summary: Incrementally iterate Set elements</span><br><span class="line">since: 2.8.0</span><br><span class="line"></span><br><span class="line">SUNION key [key ...]</span><br><span class="line">summary: Add multiple sets</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br><span class="line">SUNIONSTORE destination key [key ...]</span><br><span class="line">summary: Add multiple sets and store the resulting <span class="built_in">set</span> <span class="keyword">in</span> a key</span><br><span class="line">since: 1.0.0</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-sorted-set"><a class="header-anchor" href="#5-sorted-set">Â¶</a>5. sorted_set</h3><p>zset å’Œ set ä¸€æ ·ä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚ *zadd å‘½ä»¤ï¼š*æ·»åŠ å…ƒç´ åˆ°é›†åˆï¼Œå…ƒç´ åœ¨é›†åˆä¸­å­˜åœ¨åˆ™æ›´æ–°å¯¹åº”scoreã€‚setæ˜¯æœ‰åºçš„ï¼Œæ ¹æ®<code>score</code>æ’åºã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯-v4"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-v4">Â¶</a>ä½¿ç”¨åœºæ™¯</h3><ol><li>å› ä¸ºè‡ªå¸¦æ’åºï¼Œæ˜¾ç¤ºæœ€æ–°çš„é¡¹ç›®åˆ—è¡¨ ï¼Œæ’è¡Œæ¦œç›¸å…³ã€‚</li><li>å¤„ç†è¿‡æœŸé¡¹ç›®ï¼Œæ¯”å¦‚å¤„ç†æ²¡ä»˜æ¬¾çš„è®¢å•ã€‚æ ¹æ®ä¸‹å•æ—¶é—´æ”¾è¿›<code>sorted_set</code>ï¼Œåå°ä»»åŠ¡æ ¹æ®<code>ZRANGE</code>æŸ¥æœ€è¿‘çš„å‡ æ¡æ•°æ®ï¼Œå¦‚æœè¿‡æœŸå†å›å†™åˆ°æ•°æ®åº“ã€‚</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ZADD key [NX|XX] [CH] [INCR] score member [score member ...]</span><br><span class="line">summary: Add one or more members to a sorted <span class="built_in">set</span>, or update its score <span class="keyword">if</span> it already exists</span><br><span class="line">since: 1.2.0</span><br><span class="line"></span><br><span class="line">ZCARD key</span><br><span class="line">summary: Get the number of members <span class="keyword">in</span> a sorted <span class="built_in">set</span></span><br><span class="line">since: 1.2.0</span><br><span class="line"></span><br><span class="line">ZCOUNT key min max</span><br><span class="line">summary: Count the members <span class="keyword">in</span> a sorted <span class="built_in">set</span> with scores within the given values</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">ZINCRBY key increment member</span><br><span class="line">summary: Increment the score of a member <span class="keyword">in</span> a sorted <span class="built_in">set</span></span><br><span class="line">since: 1.2.0</span><br><span class="line"></span><br><span class="line">ZINTERSTORE destination numkeys key [key ...] [WEIGHTS weight] [AGGREGATE SUM|MIN|MAX]</span><br><span class="line">summary: Intersect multiple sorted sets and store the resulting sorted <span class="built_in">set</span> <span class="keyword">in</span> a new key</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">ZLEXCOUNT key min max</span><br><span class="line">summary: Count the number of members <span class="keyword">in</span> a sorted <span class="built_in">set</span> between a given lexicographical range</span><br><span class="line">since: 2.8.9</span><br><span class="line"></span><br><span class="line">ZRANGE key start stop [WITHSCORES]</span><br><span class="line">summary: Return a range of members <span class="keyword">in</span> a sorted <span class="built_in">set</span>, by index</span><br><span class="line">since: 1.2.0</span><br><span class="line"></span><br><span class="line">ZRANGEBYLEX key min max [LIMIT offset count]</span><br><span class="line">summary: Return a range of members <span class="keyword">in</span> a sorted <span class="built_in">set</span>, by lexicographical range</span><br><span class="line">since: 2.8.9</span><br><span class="line"></span><br><span class="line">ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count]</span><br><span class="line">summary: Return a range of members <span class="keyword">in</span> a sorted <span class="built_in">set</span>, by score</span><br><span class="line">since: 1.0.5</span><br><span class="line"></span><br><span class="line">ZRANK key member</span><br><span class="line">summary: Determine the index of a member <span class="keyword">in</span> a sorted <span class="built_in">set</span></span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">ZREM key member [member ...]</span><br><span class="line">summary: Remove one or more members from a sorted <span class="built_in">set</span></span><br><span class="line">since: 1.2.0</span><br><span class="line"></span><br><span class="line">ZREMRANGEBYLEX key min max</span><br><span class="line">summary: Remove all members <span class="keyword">in</span> a sorted <span class="built_in">set</span> between the given lexicographical range</span><br><span class="line">since: 2.8.9</span><br><span class="line"></span><br><span class="line">ZREMRANGEBYRANK key start stop</span><br><span class="line">summary: Remove all members <span class="keyword">in</span> a sorted <span class="built_in">set</span> within the given indexes</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">ZREMRANGEBYSCORE key min max</span><br><span class="line">summary: Remove all members <span class="keyword">in</span> a sorted <span class="built_in">set</span> within the given scores</span><br><span class="line">since: 1.2.0</span><br><span class="line"></span><br><span class="line">ZREVRANGE key start stop [WITHSCORES]</span><br><span class="line">summary: Return a range of members <span class="keyword">in</span> a sorted <span class="built_in">set</span>, by index, with scores ordered from high to low</span><br><span class="line">since: 1.2.0</span><br><span class="line"></span><br><span class="line">ZREVRANGEBYLEX key max min [LIMIT offset count]</span><br><span class="line">summary: Return a range of members <span class="keyword">in</span> a sorted <span class="built_in">set</span>, by lexicographical range, ordered from higher to lower strings.</span><br><span class="line">since: 2.8.9</span><br><span class="line"></span><br><span class="line">ZREVRANGEBYSCORE key max min [WITHSCORES] [LIMIT offset count]</span><br><span class="line">summary: Return a range of members <span class="keyword">in</span> a sorted <span class="built_in">set</span>, by score, with scores ordered from high to low</span><br><span class="line">since: 2.2.0</span><br><span class="line"></span><br><span class="line">ZREVRANK key member</span><br><span class="line">summary: Determine the index of a member <span class="keyword">in</span> a sorted <span class="built_in">set</span>, with scores ordered from high to low</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br><span class="line">ZSCAN key cursor [MATCH pattern] [COUNT count]</span><br><span class="line">summary: Incrementally iterate sorted sets elements and associated scores</span><br><span class="line">since: 2.8.0</span><br><span class="line"></span><br><span class="line">ZSCORE key member</span><br><span class="line">summary: Get the score associated with the given member <span class="keyword">in</span> a sorted <span class="built_in">set</span></span><br><span class="line">since: 1.2.0</span><br><span class="line"></span><br><span class="line">ZUNIONSTORE destination numkeys key [key ...] [WEIGHTS weight] [AGGREGATE SUM|MIN|MAX]</span><br><span class="line">summary: Add multiple sorted sets and store the resulting sorted <span class="built_in">set</span> <span class="keyword">in</span> a new key</span><br><span class="line">since: 2.0.0</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–åŠŸèƒ½"><a class="header-anchor" href="#å…¶ä»–åŠŸèƒ½">Â¶</a>å…¶ä»–åŠŸèƒ½</h2><ol><li>Pub/Sub<br>Redisçš„Pub/Subéå¸¸éå¸¸ç®€å•ï¼Œè¿è¡Œç¨³å®šå¹¶ä¸”å¿«é€Ÿã€‚å¯ä»¥ä½œä¸ºå‘å¸ƒè®¢é˜…ä½¿ç”¨ã€‚<br>2.<code>geo</code><br>å‚¨å­˜åœ°ç†åæ ‡æ•°æ®ï¼Œç”¨æ¥å®ç°é™„è¿‘çš„äººåŠŸèƒ½ã€‚</li><li>HyperLogLog<br><code>Redis HyperLogLog</code> æ˜¯ç”¨æ¥åšåŸºæ•°ç»Ÿè®¡çš„ç®—æ³•ï¼Œ<code>HyperLogLog</code> çš„ä¼˜ç‚¹æ˜¯ï¼Œåœ¨è¾“å…¥å…ƒç´ çš„æ•°é‡æˆ–è€…ä½“ç§¯éå¸¸éå¸¸å¤§æ—¶ï¼Œè®¡ç®—åŸºæ•°æ‰€éœ€çš„ç©ºé—´æ€»æ˜¯å›ºå®š çš„ã€å¹¶ä¸”æ˜¯å¾ˆå°çš„ã€‚<br>åœ¨ <code>Redis</code> é‡Œé¢ï¼Œæ¯ä¸ª <code>HyperLogLog</code> é”®åªéœ€è¦èŠ±è´¹ <code>12 KB</code> å†…å­˜ï¼Œå°±å¯ä»¥è®¡ç®—æ¥è¿‘ <code>2^64</code> ä¸ªä¸åŒå…ƒç´ çš„åŸº æ•°ã€‚è¿™å’Œè®¡ç®—åŸºæ•°æ—¶ï¼Œå…ƒç´ è¶Šå¤šè€—è´¹å†…å­˜å°±è¶Šå¤šçš„é›†åˆå½¢æˆé²œæ˜å¯¹æ¯”ã€‚</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·¨é¡µé¢é€šä¿¡çš„å‡ ç§æ–¹æ³•</title>
      <link href="/posts/97160c27/"/>
      <url>/posts/97160c27/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŸæ¥ï¼Œè·¨é¡µé¢é€šä¿¡æœ‰è¿™è¿™ä¹ˆå¤šæ–¹æ³•</p></blockquote><h2 id="åŒæºé¡µé¢ä¹‹é—´çš„é€šä¿¡"><a class="header-anchor" href="#åŒæºé¡µé¢ä¹‹é—´çš„é€šä¿¡">Â¶</a>åŒæºé¡µé¢ä¹‹é—´çš„é€šä¿¡</h2><h3 id="localStorage"><a class="header-anchor" href="#localStorage">Â¶</a>localStorage</h3><p>è¿™ä¸ªå¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œä½†æ˜¯ä»–è¿˜æœ‰ä¸€ä¸ªstorageäº‹ä»¶ï¼Œä¹‹å‰æ²¡æ¥è§¦è¿‡<br>å½“ LocalStorage å˜åŒ–æ—¶ï¼Œä¼šè§¦å‘storageäº‹ä»¶ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼ŒæŠŠæ¶ˆæ¯å†™å…¥åˆ°æŸä¸ª LocalStorage ä¸­ï¼›ç„¶ååœ¨å„ä¸ªé¡µé¢å†…ï¼Œé€šè¿‡ç›‘å¬storageäº‹ä»¶å³å¯æ”¶åˆ°é€šçŸ¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€ä¸ªé¡µé¢ç›‘å¬äº‹ä»¶</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;storage&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&#x27;ctc-msg&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(e.<span class="property">newValue</span>);</span><br><span class="line">        <span class="keyword">const</span> text = <span class="string">&#x27;[receive] &#x27;</span> + data.<span class="property">msg</span> + <span class="string">&#x27; â€”â€” tab &#x27;</span> + data.<span class="property">from</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Storage I] receive message:&#x27;</span>, text);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// å¦å¤–ä¸€ä¸ªé¡µé¢setæ•°æ®ï¼Œè¿™é‡ŒåŠ ä¸Šäº‹ä»¶æˆ³æ˜¯å› ä¸ºåªæœ‰çœŸæ­£æ”¹å˜æ‰ä¼šè§¦å‘storage</span></span><br><span class="line">mydata.<span class="property">st</span> = +(<span class="keyword">new</span> <span class="title class_">Date</span>);</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;ctc-msg&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(mydata));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="IndexedDB"><a class="header-anchor" href="#IndexedDB">Â¶</a>IndexedDB</h3><p>ä¸å¤šä»‹ç»äº†ï¼Œå°±æ˜¯ç®€å•çš„è½®è¯¢</p><h3 id="Service-Worker"><a class="header-anchor" href="#Service-Worker">Â¶</a>Service Worker</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API">Service workers</a> æœ¬è´¨ä¸Šå……å½“ Web åº”ç”¨ç¨‹åºã€æµè§ˆå™¨ä¸ç½‘ç»œï¼ˆå¯ç”¨æ—¶ï¼‰ä¹‹é—´çš„ä»£ç†æœåŠ¡å™¨ã€‚è¿™ä¸ª API æ—¨åœ¨åˆ›å»ºæœ‰æ•ˆçš„ç¦»çº¿ä½“éªŒï¼Œå®ƒä¼šæ‹¦æˆªç½‘ç»œè¯·æ±‚å¹¶æ ¹æ®ç½‘ç»œæ˜¯å¦å¯ç”¨é‡‡å–æ¥é€‚å½“çš„åŠ¨ä½œã€æ›´æ–°æ¥è‡ªæœåŠ¡å™¨çš„çš„èµ„æºã€‚å®ƒè¿˜æä¾›å…¥å£ä»¥æ¨é€é€šçŸ¥å’Œè®¿é—®åå°åŒæ­¥ APIã€‚<br>Shared Worker åœ¨å®ç°è·¨é¡µé¢é€šä¿¡æ—¶çš„é—®é¢˜åœ¨äºï¼Œå®ƒæ— æ³•ä¸»åŠ¨é€šçŸ¥æ‰€æœ‰é¡µé¢ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨è½®è¯¢çš„æ–¹å¼ï¼Œæ¥æ‹‰å–æœ€æ–°çš„æ•°æ®ã€‚æ€è·¯å¦‚ä¸‹ï¼š<br>è®© Shared Worker æ”¯æŒä¸¤ç§æ¶ˆæ¯ã€‚ä¸€ç§æ˜¯ postï¼ŒShared Worker æ”¶åˆ°åä¼šå°†è¯¥æ•°æ®ä¿å­˜ä¸‹æ¥ï¼›å¦ä¸€ç§æ˜¯ getï¼ŒShared Worker æ”¶åˆ°è¯¥æ¶ˆæ¯åä¼šå°†ä¿å­˜çš„æ•°æ®é€šè¿‡postMessageä¼ ç»™æ³¨å†Œå®ƒçš„é¡µé¢ã€‚ä¹Ÿå°±æ˜¯è®©é¡µé¢é€šè¿‡ get æ¥ä¸»åŠ¨è·å–ï¼ˆåŒæ­¥ï¼‰æœ€æ–°æ¶ˆæ¯ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š<br>é¦–å…ˆï¼Œæˆ‘ä»¬ä¼šåœ¨é¡µé¢ä¸­å¯åŠ¨ä¸€ä¸ª Shared Workerï¼Œå¯åŠ¨æ–¹å¼éå¸¸ç®€å•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ Shared Worker åç§°ï¼Œä¹Ÿå¯ä»¥ç•™ç©º</span></span><br><span class="line"><span class="keyword">const</span> sharedWorker = <span class="keyword">new</span> <span class="title class_">SharedWorker</span>(<span class="string">&#x27;../util.shared.js&#x27;</span>, <span class="string">&#x27;ctc&#x27;</span>);</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œåœ¨è¯¥ Shared Worker ä¸­æ”¯æŒ get ä¸ post å½¢å¼çš„æ¶ˆæ¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ../util.shared.js: Shared Worker ä»£ç  */</span></span><br><span class="line"><span class="keyword">let</span> data = <span class="literal">null</span>;</span><br><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;connect&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> port = e.<span class="property">ports</span>[<span class="number">0</span>];</span><br><span class="line">    port.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">        <span class="comment">// get æŒ‡ä»¤åˆ™è¿”å›å­˜å‚¨çš„æ¶ˆæ¯æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span> (event.<span class="property">data</span>.<span class="property">get</span>) &#123;</span><br><span class="line">            data &amp;&amp; port.<span class="title function_">postMessage</span>(data);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é get æŒ‡ä»¤åˆ™å­˜å‚¨è¯¥æ¶ˆæ¯æ•°æ®</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            data = event.<span class="property">data</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    port.<span class="title function_">start</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¹‹åï¼Œé¡µé¢å®šæ—¶å‘é€ get æŒ‡ä»¤çš„æ¶ˆæ¯ç»™ Shared Workerï¼Œè½®è¯¢æœ€æ–°çš„æ¶ˆæ¯æ•°æ®ï¼Œå¹¶åœ¨é¡µé¢ç›‘å¬è¿”å›ä¿¡æ¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šæ—¶è½®è¯¢ï¼Œå‘é€ get æŒ‡ä»¤çš„æ¶ˆæ¯</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    sharedWorker.<span class="property">port</span>.<span class="title function_">postMessage</span>(&#123;<span class="attr">get</span>: <span class="literal">true</span>&#125;);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬ get æ¶ˆæ¯çš„è¿”å›æ•°æ®</span></span><br><span class="line">sharedWorker.<span class="property">port</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> data = e.<span class="property">data</span>;</span><br><span class="line">    <span class="keyword">const</span> text = <span class="string">&#x27;[receive] &#x27;</span> + data.<span class="property">msg</span> + <span class="string">&#x27; â€”â€” tab &#x27;</span> + data.<span class="property">from</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[Shared Worker] receive message:&#x27;</span>, text);</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line">sharedWorker.<span class="property">port</span>.<span class="title function_">start</span>();</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œå½“è¦è·¨é¡µé¢é€šä¿¡æ—¶ï¼Œåªéœ€ç»™ Shared Worker postMessageå³å¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sharedWorker.<span class="property">port</span>.<span class="title function_">postMessage</span>(mydata);</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨addEventListeneræ¥æ·»åŠ  Shared Worker çš„æ¶ˆæ¯ç›‘å¬ï¼Œéœ€è¦æ˜¾å¼è°ƒç”¨MessagePort.startæ–¹æ³•ï¼Œå³ä¸Šæ–‡ä¸­çš„sharedWorker.port.start()ï¼›å¦‚æœä½¿ç”¨onmessageç»‘å®šç›‘å¬åˆ™ä¸éœ€è¦ã€‚</p><h3 id="BroadCast-Channel"><a class="header-anchor" href="#BroadCast-Channel">Â¶</a>BroadCast Channel</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Broadcast_Channel_API">Broadcast Channel API</a> å¯ä»¥å®ç°åŒ æº ä¸‹æµè§ˆå™¨ä¸åŒçª—å£ï¼ŒTabé¡µï¼Œframeæˆ–è€… iframe ä¸‹çš„ æµè§ˆå™¨ä¸Šä¸‹æ–‡ (é€šå¸¸æ˜¯åŒä¸€ä¸ªç½‘ç«™ä¸‹ä¸åŒçš„é¡µé¢)ä¹‹é—´çš„ç®€å•é€šè®¯ã€‚</p><p>ç®€å•çš„apiå±•ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿æ¥åˆ°å¹¿æ’­é¢‘é“,åœ¨å¤šä¸ªé¡µé¢æ³¨å†ŒåŒä¸€ä¸ªé¢‘é“</span></span><br><span class="line"><span class="keyword">var</span> bc = <span class="keyword">new</span> <span class="title class_">BroadcastChannel</span>(<span class="string">&#x27;test_channel&#x27;</span>);</span><br><span class="line"><span class="comment">// å‘é€ç®€å•æ¶ˆæ¯çš„ç¤ºä¾‹</span></span><br><span class="line">bc.<span class="title function_">postMessage</span>(<span class="string">&#x27;This is a test message.&#x27;</span>);</span><br><span class="line"><span class="comment">// ç®€å•ç¤ºä¾‹ï¼Œç”¨äºå°†äº‹ä»¶æ‰“å°åˆ°æ§åˆ¶å°</span></span><br><span class="line">bc.<span class="property">onmessage</span> = <span class="keyword">function</span> (<span class="params">ev</span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(ev); &#125;</span><br><span class="line"><span class="comment">// æ–­å¼€é¢‘é“è¿æ¥</span></span><br><span class="line">bc.<span class="title function_">close</span>()</span><br></pre></td></tr></table></figure><h2 id="éåŒæºé¡µé¢ä¹‹é—´çš„é€šä¿¡"><a class="header-anchor" href="#éåŒæºé¡µé¢ä¹‹é—´çš„é€šä¿¡">Â¶</a>éåŒæºé¡µé¢ä¹‹é—´çš„é€šä¿¡</h2><h3 id="åˆ©ç”¨ä¸­é—´iframeä½œä¸ºbrideg"><a class="header-anchor" href="#åˆ©ç”¨ä¸­é—´iframeä½œä¸ºbrideg">Â¶</a>åˆ©ç”¨ä¸­é—´iframeä½œä¸ºbrideg</h3><p>ä½¿ç”¨ä¸€ä¸ªç”¨æˆ·ä¸å¯è§çš„ iframe ä½œä¸ºâ€œæ¡¥â€ã€‚ç”±äº iframe ä¸çˆ¶é¡µé¢é—´å¯ä»¥é€šè¿‡æŒ‡å®šoriginæ¥å¿½ç•¥åŒæºé™åˆ¶ï¼Œå› æ­¤å¯ä»¥åœ¨æ¯ä¸ªé¡µé¢ä¸­åµŒå…¥ä¸€ä¸ª iframe ï¼ˆä¾‹å¦‚ï¼š<a href="http://sample.com/bridge.html%EF%BC%89%EF%BC%8C%E8%80%8C%E8%BF%99%E4%BA%9B">http://sample.com/bridge.htmlï¼‰ï¼Œè€Œè¿™äº›</a> iframe ç”±äºä½¿ç”¨çš„æ˜¯ä¸€ä¸ª urlï¼Œå› æ­¤å±äºåŒæºé¡µé¢ï¼Œå…¶é€šä¿¡æ–¹å¼å¯ä»¥å¤ç”¨ä¸Šé¢ç¬¬ä¸€éƒ¨åˆ†æåˆ°çš„å„ç§æ–¹å¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ä¸šåŠ¡é¡µé¢ä»£ç  */</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// â€¦â€¦ do something</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¸šåŠ¡é¡µé¢ä»£ç å‘ä¿¡æ¯ */</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">frames</span>[<span class="number">0</span>].<span class="property">window</span>.<span class="title function_">postMessage</span>(mydata, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åˆ©ç”¨websocket"><a class="header-anchor" href="#åˆ©ç”¨websocket">Â¶</a>åˆ©ç”¨websocket</h3><p>åˆ©ç”¨åç«¯æ–°å¼€ä¸€ä¸ªwebsocketæœåŠ¡ï¼Œå¤šä¸ªé¡µé¢éƒ½æ¥å—æœåŠ¡ç«¯çš„æ¨é€ï¼Œä¹Ÿå¯ä»¥å®ç°åŒæ­¥çŠ¶æ€ã€‚</p><hr><p>åŸæ–‡åœ°å€ï¼Œæœ¬æ–‡ç¨ä½œåˆ æ”¹ï¼š<br><a href="https://juejin.cn/post/6844903811232825357">https://juejin.cn/post/6844903811232825357</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> javaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>elasticsearchä½¿ç”¨</title>
      <link href="/posts/5e47ac86/"/>
      <url>/posts/5e47ac86/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è®°å½•ä¸€æ¬¡å°†åƒä¸‡çº§åˆ«çš„æ•°æ®åº“è¡¨è¿ç§»åˆ°Elasticsearch çš„è¿‡ç¨‹</p></blockquote><h2 id="èƒŒæ™¯"><a class="header-anchor" href="#èƒŒæ™¯">Â¶</a>èƒŒæ™¯</h2><p>æˆ‘ä»¬æœ‰ä¸€å¼ åƒä¸‡çº§åˆ«ï¼Œå¹¶ä¸”æ¯å¤©éƒ½æ–°å¢å°†è¿‘ä¸‡æ¡æ•°æ®ï¼Œæ›´æ–°ä¹Ÿåœ¨åå‡ ä¸‡çš„ä¸šåŠ¡è¡¨ï¼Œè¿™ä¸ªä¸šåŠ¡è¡¨å¯ä»¥è¯´æ˜¯æˆ‘ä»¬çš„æ ¸å¿ƒä¸šåŠ¡ï¼Œå› ä¸ºå†å²é—®é¢˜ï¼Œè¡¨å­—æ®µé™¤äº†åŸºæœ¬çš„å­—æ®µå¤–ï¼Œè¿˜å­˜äº†jsonï¼Œ ä¸€ä¸ªå­—ç¬¦ä¸²å¯ä»£è¡¨å¤šä¸šåŠ¡ï¼Œ ç”šè‡³å­˜äº†äºŒè¿›åˆ¶çš„å¯¹è±¡ï¼Œ åŒæ—¶ï¼Œæˆ‘ä»¬çš„è¿è¥é¡µé¢éœ€è¦æ ¹æ®å°†è¿‘20ä¸ªæŸ¥è¯¢æ¡ä»¶å¯¹è¿™ä¸ªè¡¨è¿›è¡ŒæŸ¥è¯¢ï¼Œä¸€æ–¹é¢å› ä¸ºæ•°æ®é‡å¤§ï¼Œå¤šä¸ªæŸ¥è¯¢æ¡ä»¶ç»„åˆèµ·æ¥ï¼ŒæŸ¥å‡ºæ•°æ®æœ‰æ—¶ä¹Ÿè¦åå‡ ç§’ï¼Œç”šè‡³åœ¨ä¸€äº›æç«¯æƒ…å†µä¸‹ï¼Œé¡µé¢ç›´æ¥è¶…æ—¶ï¼Œç”¨æˆ·ä½“éªŒå¾ˆä¸å¥½ï¼Œå¦ä¸€æ–¹é¢ï¼Œæœ‰äº›å­—æ®µéšè—åœ¨jsonå†…éƒ¨ï¼Œæˆ–è€…äºŒè¿›åˆ¶çš„å¯¹è±¡é‡Œé¢ï¼Œé™åˆ¶äº†å…¶ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ã€‚</p><h2 id="é¢„ç ”"><a class="header-anchor" href="#é¢„ç ”">Â¶</a>é¢„ç ”</h2><p>äºæ˜¯æˆ‘èŠ±äº†ä¸¤å¤©çš„æ—¶é—´äº†è§£äº†Elasticsearch æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥åšä»€ä¹ˆï¼Œå¤§æ¦‚çš„æ“ä½œæ­¥éª¤ï¼ŒæŸ¥è¯¢apiï¼Œä»¥åŠé…å¥—çš„ç”Ÿæ€ï¼ŒåˆèŠ±äº†ä¸€å¤©åœ¨æµ‹è¯•ç¯å¢ƒæ­å»ºäº†ä¸€å¥—elkï¼Œå°±å¼€å§‹äº†è¿ç§»çš„æµ‹è¯•ã€‚<br>psï¼šåœ¨è¿™é‡Œè¯´æ˜ä¸€ä¸‹<br>Elasticsearchæ˜¯ä¸ªå¼€æºåˆ†å¸ƒå¼æœç´¢å¼•æ“ï¼Œå®ƒçš„ç‰¹ç‚¹æœ‰ï¼šåˆ†å¸ƒå¼ï¼Œé›¶é…ç½®ï¼Œè‡ªåŠ¨å‘ç°ï¼Œç´¢å¼•è‡ªåŠ¨åˆ†ç‰‡ï¼Œç´¢å¼•å‰¯æœ¬æœºåˆ¶ï¼Œrestfulé£æ ¼æ¥å£ï¼Œå¤šæ•°æ®æºï¼Œè‡ªåŠ¨æœç´¢è´Ÿè½½ç­‰ã€‚<br>Logstashæ˜¯ä¸€ä¸ªå®Œå…¨å¼€æºçš„å·¥å…·ï¼Œä»–å¯ä»¥å¯¹ä½ çš„æ—¥å¿—è¿›è¡Œæ”¶é›†ã€è¿‡æ»¤ï¼Œå¹¶å°†å…¶å­˜å‚¨ä¾›ä»¥åä½¿ç”¨ï¼ˆå¦‚ï¼Œæœç´¢ï¼‰ã€‚<br>Kibana ä¹Ÿæ˜¯ä¸€ä¸ªå¼€æºå’Œå…è´¹çš„å·¥å…·ï¼Œå®ƒKibanaå¯ä»¥ä¸º Logstash å’Œ ElasticSearch æä¾›çš„æ—¥å¿—åˆ†æå‹å¥½çš„ Web ç•Œé¢ï¼Œå¯ä»¥å¸®åŠ©æ‚¨æ±‡æ€»ã€åˆ†æå’Œæœç´¢é‡è¦æ•°æ®æ—¥å¿—<br>elkå½“ç„¶å°±æ˜¯è¿™ä¸‰éƒ¨åˆ†çš„ç»„åˆäº†ã€‚</p><h2 id="ç”¨logstash-åŒæ­¥æ•°æ®"><a class="header-anchor" href="#ç”¨logstash-åŒæ­¥æ•°æ®">Â¶</a>ç”¨logstash åŒæ­¥æ•°æ®</h2><p>logstash æœ¬èº«çš„é…ç½®ä¹Ÿä¸å¤æ‚ï¼Œåˆ†ä¸º<code>input</code>ï¼Œ<code>filter</code>ï¼Œ<code>output</code> ä¸‰éƒ¨åˆ†ã€‚<br><code>input</code> å’Œ <code>output</code>æ”¯æŒå„ç§æ’ä»¶ã€‚<br>æ¯”å¦‚<code>input</code> æ”¯æŒ <code>mysql</code>ï¼Œ<code>file</code>ï¼Œ<code>http</code>ï¼Œç­‰ç­‰ï¼Œæœ€æ–°çš„<code>input</code> ç”šè‡³æ”¯æŒ<code>Twitter </code>ã€‚<br><code>output</code> æ”¯æŒ <code>elasticsearch</code>ï¼Œ<code>email</code>ï¼Œ<code>rabbitmq</code>ç­‰ç­‰ã€‚<br>æŸ¥çœ‹æ‰€æœ‰æ”¯æŒçš„æ’ä»¶å¯ä»¥ç‚¹å‡»<a href="https://www.elastic.co/guide/en/logstash/7.12/introduction.html">è¿™é‡Œ</a></p><p>è¿™ä¸€æ­¥æœ¬æ¥æ˜¯å¾ˆç®€å•çš„ï¼Œå› ä¸ºlogstash æœ¬èº«å°±æ”¯æŒåŒæ­¥mysqlæ•°æ®åˆ°esï¼Œåªéœ€è¦ç®€å•çš„é…ç½®ï¼ŒåŠ ä¸Šjsonçš„ä¸­é—´filterï¼Œå°±å¯ä»¥å®Œæˆäº†ï¼Œä½†æ˜¯å°±æ˜¯äºŒè¿›åˆ¶çš„æ•°æ®å¯¹è±¡è¦è§£æå‡ºæ¥æœ‰ç‚¹éº»çƒ¦ï¼Œè¿˜å¥½logstashæ”¯æŒç”¨rubyä½œä¸ºè„šæœ¬ï¼Œäºæ˜¯å°±éœ€è¦ç¼–å†™ä¸€ä¸ªrubyè„šæœ¬ï¼ŒæŠŠä»mysqlé‡Œè¯»å‡ºæ¥çš„äºŒè¿›åˆ¶è½¬åŒ–æˆå¯¹è±¡ï¼Œæˆ‘ä»¬å­˜çš„äºŒè¿›åˆ¶æ˜¯protobufè½¬åŒ–çš„å¯¹è±¡ï¼Œå› æ­¤ï¼Œéœ€è¦ç”¨ä¸€ä¸ªprotobufçš„åº“ æŠŠäºŒè¿›åˆ¶è½¬æˆrubyå¯¹è±¡ï¼Œç„¶ååœ¨è§£æè¿™ä¸ªå¯¹è±¡ï¼Œåˆ†å‰²æˆä¸åŒçš„å­—æ®µå­˜å…¥esã€‚<br>é¦–å…ˆï¼Œæˆ‘ä»å†…éƒ¨çš„å¹³å°ï¼Œä¸‹è½½äº†åŸå§‹çš„protobufæ–‡ä»¶ï¼Œç„¶ååœ¨å…¬å¸çš„ç¼–è¯‘æœºä¸Šï¼Œä¾¿æˆrubyçš„classæ–‡ä»¶ï¼Œä½†æ˜¯æ€ä¹ˆä»äºŒè¿›åˆ¶è§£ç åˆ°å¯¹è±¡å‘¢ï¼Ÿæˆ‘åˆç¿»çœ‹äº†ä¸‹logstashçš„æ–‡æ¡£ï¼Œå‘ç°ä»–æœ‰ä¸€ä¸ªcodecçš„æ’ä»¶æ˜¯ç›´æ¥æ”¯æŒè§£ç pbå¯¹è±¡çš„ï¼Œä½†æ˜¯è¿™ä¸ªæ’ä»¶åªæ”¯æŒæ¯æ¬¡è§£æä¸€è¡Œï¼Œä½†æ˜¯æˆ‘ä»mysqlè¯»å‡ºæ¥çš„æ•°æ®ï¼Œæ˜¯ä¸€è¡Œsqlæ’å™ç»“æœï¼Œé‡Œé¢åªæœ‰å‡ ä¸ªå­—æ®µæ˜¯äºŒè¿›åˆ¶çš„ï¼Œäºæ˜¯æˆ‘æ‰¾åˆ°äº†è¿™ä¸ªæ’ä»¶<code>logstash-codec-protobuf</code>çš„github<a href="https://github.com/logstash-plugins/logstash-codec-protobuf">åœ°å€</a>ï¼Œç®€å•çœ‹äº†ä¸‹æºç å’Œ<code>api</code>ï¼Œæºç ä¸å¤šåŠ ä¸Šæ³¨é‡Šä¹Ÿæ‰700å¤šè¡Œï¼Œè™½ç„¶æ²¡å­¦è¿‡rubyä½†ä¹Ÿå¤§æ¦‚çœ‹å‡ºæ¥ä¸€äº›é€»è¾‘ï¼Œçœ‹äº†ä¸‹ä»–çš„ä¾èµ–ï¼Œ</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">&#x27;logstash/codecs/base&#x27;</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;logstash/util/charset&#x27;</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;google/protobuf&#x27;</span> <span class="comment"># for protobuf3</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;protocol_buffers&#x27;</span> <span class="comment"># https://github.com/codekitchen/ruby-protocol-buffers, for protobuf2</span></span><br></pre></td></tr></table></figure><p>ä¸»è¦èµ·ä½œç”¨çš„åº”è¯¥æ˜¯</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">&#x27;google/protobuf&#x27;</span> <span class="comment"># for protobuf3</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;protocol_buffers</span></span><br></pre></td></tr></table></figure><p>æ•´ä¸ªä»£ç æ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡çš„è¯­æ³•ï¼Œ å®šä¹‰äº†ä¸€ä¸ªclass</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LogStash::Codecs::Protobuf</span> &lt; <span class="title class_ inherited__">LogStash::Codecs::Base</span></span><br></pre></td></tr></table></figure><p>é‡Œé¢æœ‰<code>register</code>,<code>decode</code>,<code>encode</code> ç­‰æ–¹æ³•ï¼Œçœ‹æ¥èµ·ä½œç”¨çš„å°±æ˜¯<code>decode</code> äº†ï¼Œé©¬ä¸Šæ‹¿æ¥æ”¾åœ¨è„šæœ¬é‡Œé¢è·‘äº†ä¸€ä¸‹ï¼ŒæˆåŠŸä»äºŒè¿›åˆ¶è§£æå¾—åˆ°äº†rubyå¯¹è±¡ã€‚</p><p>æ¥ä¸‹æ¥å°±ç®€å•äº†ï¼Œæ³¨æ„ç»†èŠ‚ï¼Œå¯¹ç…§å­—æ®µå¼€å§‹åŒæ­¥ã€‚å¤§æ¦‚èŠ±äº†25ä¸ªå°æ—¶ï¼Œå°±æŠŠæ‰€æœ‰çš„æ•°æ®åŒæ­¥åˆ°äº†es,å¢é‡çš„æ•°æ®ï¼Œæˆ‘ç”¨<code>updatetime</code>ä½œä¸ºæŸ¥è¯¢æ¡ä»¶æ›´æ–°ã€‚</p><h2 id="ç”¨phpå®¢æˆ·ç«¯æŸ¥è¯¢æ•°æ®"><a class="header-anchor" href="#ç”¨phpå®¢æˆ·ç«¯æŸ¥è¯¢æ•°æ®">Â¶</a>ç”¨phpå®¢æˆ·ç«¯æŸ¥è¯¢æ•°æ®</h2><p>æœ€åï¼Œæˆ‘ç”¨phpå®¢æˆ·ç«¯ï¼Œé€šè¿‡httpè°ƒç”¨çš„å½¢å¼ï¼Œä½¿ç”¨esæŸ¥è¯¢è¯­æ³•ï¼Œå¯¹æ•°æ®è¿›è¡ŒæŸ¥è¯¢ï¼Œæœç„¶å¿«äº†å¾ˆå¤šï¼Œå¤æ‚çš„æŸ¥è¯¢æ¡ä»¶ï¼Œä¹Ÿèƒ½åœ¨1så·¦å³æŸ¥è¯¢å‡ºæ¥ã€‚</p><p>è¿™é‡Œè¦è¯´æ˜çš„æ˜¯<code>kibana</code>é‡Œé¢æœ‰ä¸ªdevtoolçš„é¡µé¢ï¼Œå¯ä»¥åœ¨é‡Œé¢å†™æŸ¥è¯¢è¯­å¥éªŒè¯ç»“æœï¼Œä½¿ç”¨èµ·æ¥ååˆ†æ–¹ä¾¿ã€‚</p><h2 id="é‡åˆ°çš„å‘"><a class="header-anchor" href="#é‡åˆ°çš„å‘">Â¶</a>é‡åˆ°çš„å‘</h2><p>ä¸»è¦æ˜¯åˆ†é¡µæŸ¥è¯¢çš„æ—¶å€™ï¼Œå¾ˆå¤§çš„æ•°æ®é‡ä¸‹ä¸èƒ½ä»¥ä¸€èˆ¬çš„æŸ¥è¯¢è¯­æ³•ï¼Œå³from to è¿™ç§ï¼Œå› ä¸ºåœ¨æ·±åº¦åˆ†é¡µçš„æƒ…å†µä¸‹ï¼Œè¿™ç§ä½¿ç”¨æ–¹å¼æ•ˆç‡æ˜¯éå¸¸ä½çš„ï¼Œæ¯”å¦‚from = 5000, size=10ï¼Œ es éœ€è¦åœ¨å„ä¸ªåˆ†ç‰‡ä¸ŠåŒ¹é…æ’åºå¹¶å¾—åˆ°5000*10æ¡æœ‰æ•ˆæ•°æ®ï¼Œç„¶ååœ¨ç»“æœé›†ä¸­å–æœ€å10æ¡æ•°æ®è¿”å›ã€‚</p><p>æˆ‘ä»¬å°±é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå…ˆæŠŠ<code>max_result_window </code>è°ƒå¤§äº†ä¸€äº›ï¼Œåæ¥ç”¨æ·±åº¦åˆ†é¡µä»£æ›¿ï¼š<br>es æä¾›äº† <code>Scroll API</code> çš„æ–¹å¼è¿›è¡Œåˆ†é¡µè¯»å–ã€‚åŸç†ä¸Šæ˜¯å¯¹æŸæ¬¡æŸ¥è¯¢ç”Ÿæˆä¸€ä¸ªæ¸¸æ ‡ scroll_id ï¼Œ åç»­çš„æŸ¥è¯¢åªéœ€è¦æ ¹æ®è¿™ä¸ªæ¸¸æ ‡å»å–æ•°æ®ï¼Œç›´åˆ°ç»“æœé›†ä¸­è¿”å›çš„ hits å­—æ®µä¸ºç©ºï¼Œå°±è¡¨ç¤ºéå†ç»“æŸã€‚scroll_id çš„ç”Ÿæˆå¯ä»¥ç†è§£ä¸ºå»ºç«‹äº†ä¸€ä¸ªä¸´æ—¶çš„å†å²å¿«ç…§ï¼Œåœ¨æ­¤ä¹‹åçš„å¢åˆ æ”¹æŸ¥ç­‰æ“ä½œä¸ä¼šå½±å“åˆ°è¿™ä¸ªå¿«ç…§çš„ç»“æœã€‚<br>ä½†æ˜¯è¿™ä¸ªä¹Ÿä¸å…è®¸éšæœºè·³é¡µï¼Œé€‚åˆç±»ä¼¼å¾®åšé‚£ç§ä¸‹æ‹‰ç¿»é¡µçš„åœºæ™¯ã€‚</p><p>ps: å…³äºæ·±åº¦åˆ†é¡µä¼˜åŒ–å¯ä»¥çœ‹ä¸‹<a href="https://juejin.cn/post/6850037275456339975">è¿™é‡Œ</a></p><h2 id="elkå¾ˆå¤æ‚çš„"><a class="header-anchor" href="#elkå¾ˆå¤æ‚çš„">Â¶</a>elkå¾ˆå¤æ‚çš„</h2><p>è™½ç„¶åŸºæœ¬ç¬¦åˆäº†ä½¿ç”¨åœºæ™¯ï¼Œä½†æ˜¯å…³äºelkæˆ‘æ„Ÿè§‰è¿˜æ˜¯åªäº†è§£äº†çš®æ¯›ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Œæ€ä¹ˆå…³è”æŸ¥è¯¢ï¼Œæ€ä¹ˆè®¾ç½®ç´¢å¼•ç»“æ„æ›´é«˜æ•ˆï¼Œæ›´å¤æ‚çš„æŸ¥è¯¢è¯­å¥ï¼Œè¿™äº›éƒ½è¿˜æ²¡æ¥è§¦åˆ°ã€‚<br>ps: ç½‘ä¸Šå¾ˆå¤šå…³äºæ€§èƒ½ä¼˜åŒ–çš„æ–‡ç« ï¼Œæ¯”å¦‚<a href="https://zhuanlan.zhihu.com/p/67362440">è¿™ç¯‡</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Elasticsearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2é“ç®—æ³•é¢˜çš„ä¼˜åŒ–è¿‡ç¨‹</title>
      <link href="/posts/7e570359/"/>
      <url>/posts/7e570359/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘åˆ·äº†é‚£ä¹ˆå¤šçš„ç®—æ³•,æ„Ÿè§‰è‡ªå·±åˆšåˆšæœ‰ç‚¹è¿›æ­¥,åˆè¢«ä¸¤é“ç®€å•é¢˜ææ™•äº†ğŸ™ƒğŸ™ƒ,å½»åº•æš´éœ²äº†è‡ªå·±å¯¹æ—¶é—´å¤æ‚åº¦æŒæ¡ä¸è¶³çš„é—æ¼,å› æ­¤åœ¨è¿™é‡Œè®°å½•ä¸‹ä¼˜åŒ–çš„è¿‡ç¨‹.</p></blockquote><h3 id="ç¬¬ä¸€é¢˜"><a class="header-anchor" href="#ç¬¬ä¸€é¢˜">Â¶</a>ç¬¬ä¸€é¢˜</h3><p>ç»™ä½ ä¸€ä¸ªæœ‰åºæ•°ç»„ nums ï¼Œè¯·ä½  åŸåœ° åˆ é™¤é‡å¤å‡ºç°çš„å…ƒç´ ï¼Œä½¿æ¯ä¸ªå…ƒç´  æœ€å¤šå‡ºç°ä¸¤æ¬¡ ï¼Œè¿”å›åˆ é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚</p><p>ä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»åœ¨ åŸåœ° ä¿®æ”¹è¾“å…¥æ•°ç»„ å¹¶åœ¨ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´çš„æ¡ä»¶ä¸‹å®Œæˆã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šnums = [1,1,1,2,2,3]<br>è¾“å‡ºï¼š5, nums = [1,1,2,2,3]<br>è§£é‡Šï¼šå‡½æ•°åº”è¿”å›æ–°é•¿åº¦ length = 5, å¹¶ä¸”åŸæ•°ç»„çš„å‰äº”ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º 1, 1, 2, 2, 3 ã€‚ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šnums = [0,0,1,1,1,1,2,3,3]<br>è¾“å‡ºï¼š7, nums = [0,0,1,1,2,3,3]<br>è§£é‡Šï¼šå‡½æ•°åº”è¿”å›æ–°é•¿åº¦ length = 7, å¹¶ä¸”åŸæ•°ç»„çš„å‰äº”ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸ºÂ 0, 0, 1, 1, 2, 3, 3 ã€‚ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚<br>ä¸€çœ‹åˆ°é¢˜ç›®,è§‰å¾—ä¸éš¾,é©¬ä¸Šå¼€å§‹å†™ä»£ç ,å°±æ¨¡æ‹Ÿæ•´ä¸ªè¿‡ç¨‹,å‡ åˆ†é’Ÿæå®š.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> removeDuplicates = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> len = nums.<span class="property">length</span></span><br><span class="line">    <span class="keyword">let</span> last = nums[len-<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = nums.<span class="property">length</span>-<span class="number">2</span>;i&gt;=<span class="number">0</span>;i--) &#123;</span><br><span class="line">        <span class="keyword">if</span>(nums[i] === last) &#123;</span><br><span class="line">            count++</span><br><span class="line">            <span class="keyword">if</span>(count&gt;<span class="number">2</span>) &#123;</span><br><span class="line">                len--</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">let</span> j = i;j&lt;len;j++) &#123;</span><br><span class="line">                    nums[j] = nums[j+<span class="number">1</span>]</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            count = <span class="number">1</span></span><br><span class="line">            last = nums[i]</span><br><span class="line">        &#125;   </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> len</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åˆšå¥½è¿™å‡ å¤©å‡ ä¸ªåŒäº‹éƒ½åœ¨æ‰“å¡æ¯æ—¥ä¸€é¢˜,æˆ‘ä»¬äº¤æµäº†ä¸€ä¸‹,æˆ‘æŠŠè‡ªå·±çš„ä»£ç ç»™åŒäº‹çœ‹äº†çœ‹,ä¸€ä¸ªåŒäº‹ç«‹é©¬è¯´,ä½ è¿™ä¸ªæ—¶é—´å¤æ‚åº¦å¤ªé«˜äº†,æˆ‘ä»”ç»†çœ‹äº†çœ‹ä»£ç ,ç¡®å®,å¾ªç¯é‡Œé¢ç§»åŠ¨æ•°ç»„,å¤§æ¦‚å¤æ‚åº¦O(n^2).</p><p>å¬äº†åŒäº‹çš„çš„è§£æ³•,æˆ‘é¡¿æ‚Ÿäº†,åŸæ¥åŒæŒ‡é’ˆå°±å¥½äº†,å¿«æ…¢æŒ‡é’ˆ,æ…¢æŒ‡é’ˆä¿æŒé•¿åº¦,å¿«æŒ‡é’ˆæ¯æ¬¡+1ç”¨æ¥æ£€æŸ¥åé¢çš„å…ƒç´ ,é‡åˆ°ä¸åŒçš„å…ƒç´ ,å¹¶ä¸”å‰æ–¹å·²ç»å‡ºç°äº†ä¸¤ä¸ªé‡å¤çš„,å°±è¦†ç›–å‰æ–¹æ…¢æŒ‡é’ˆçš„å…ƒç´ ,ç„¶åæ…¢æŒ‡é’ˆç»§ç»­+1</p><p>ä¸‹é¢æ˜¯ä»£ç :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> removeDuplicates = <span class="keyword">function</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> n = nums.<span class="property">length</span></span><br><span class="line">    <span class="keyword">if</span>(n&lt;<span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> slow = <span class="number">2</span></span><br><span class="line">    <span class="keyword">let</span> fast = <span class="number">2</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(fast&lt;n) &#123;</span><br><span class="line">        <span class="keyword">if</span>(nums[slow-<span class="number">2</span>] !== nums[fast]) &#123;</span><br><span class="line">            nums[slow] = nums[fast]</span><br><span class="line">            slow++</span><br><span class="line">        &#125;</span><br><span class="line">        fast++</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> slow</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æ—¶é—´å¤æ‚åº¦å°±è¢«ä¼˜åŒ–åˆ°äº†O(n),åªéå†äº†ä¸€è¾¹.<br>ç»è¿‡è‡ªå·±çš„æµ‹è¯•,åœ¨é•¿åº¦ä¸º999999,ä¸‰ä¸ªä¸€ç»„ç›¸åŒçš„æ•°ç»„çš„è¿è¡Œæµ‹è¯•ä¸‹,ç¬¬äºŒç§èŠ±è´¹å¤§æ¦‚3ms,è€Œç¬¬ä¸€ç§,å±…ç„¶ç”¨äº†100000+ms,ç›¸å·®äº†3ä¸‡å€!!!ğŸ¤¯ ğŸ¤¯ ğŸ¤¯ ğŸ¤¯ ğŸ¤¯</p><h3 id="ç¬¬äºŒé¢˜"><a class="header-anchor" href="#ç¬¬äºŒé¢˜">Â¶</a>ç¬¬äºŒé¢˜</h3><p>å°åŠ›å°† N ä¸ªé›¶ä»¶çš„æŠ¥ä»·å­˜äºæ•°ç»„ numsã€‚å°åŠ›é¢„ç®—ä¸º targetï¼Œå‡å®šå°åŠ›ä»…è´­ä¹°ä¸¤ä¸ªé›¶ä»¶ï¼Œè¦æ±‚è´­ä¹°é›¶ä»¶çš„èŠ±è´¹ä¸è¶…è¿‡é¢„ç®—ï¼Œè¯·é—®ä»–æœ‰å¤šå°‘ç§é‡‡è´­æ–¹æ¡ˆã€‚</p><p>æ³¨æ„ï¼šç­”æ¡ˆéœ€è¦ä»¥ 1e9 + 7 (1000000007) ä¸ºåº•å–æ¨¡ï¼Œå¦‚ï¼šè®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1<br>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šnums = [2,5,3,5], target = 6</p><p>è¾“å‡ºï¼š1</p><p>è§£é‡Šï¼šé¢„ç®—å†…ä»…èƒ½è´­ä¹° nums[0] ä¸ nums[2]ã€‚</p><p>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šnums = [2,2,1,9], target = 10</p><p>è¾“å‡ºï¼š4</p><p>è§£é‡Šï¼šç¬¦åˆé¢„ç®—çš„é‡‡è´­æ–¹æ¡ˆå¦‚ä¸‹ï¼š<br>nums[0] + nums[1] = 4<br>nums[0] + nums[2] = 3<br>nums[1] + nums[2] = 3<br>nums[2] + nums[3] = 10</p><p>ç¬¬ä¸€çœ¼çœ‹åˆ°è¿™ä¸ªé¢˜,å¿ƒæƒ³è¿™ä¹ˆç®€å•çš„å—?<br>ç«‹é©¬åˆæ˜¯åŒå±‚å¾ªç¯éå†ä¸€è¾¹,æœä¸å…¶ç„¶è¶…æ—¶äº†,ä¸€çœ‹ç»™çš„æµ‹è¯•ç”¨ä¾‹,é•¿åº¦ <code>2 &lt;= nums.length &lt;= 10^5</code><br>è€ƒè™‘åˆ°æ²¡æœ‰è´Ÿæ•°,äºæ˜¯åŠ äº†ä¸ªåˆ¤æ–­ç¬¬ä¸€ä¸ªæ•°çš„é•¿åº¦æ˜¯å¦å¤§äºtarget,ç„¶è€Œè¿˜æ˜¯è¶…æ—¶.<br>æƒ³äº†æƒ³,å…ˆæ’ä¸‹é¡ºåºå§,ç„¶åäºŒåˆ†æ‰¾åˆ°å°äºtargetçš„éƒ¨åˆ†,åœ¨è¿™ä¸ªèŒƒå›´å†…åˆ¤æ–­,åæ¥åˆæƒ³,å¦‚æœtargetå¾ˆå¤§æ€ä¹ˆåŠ?ä¸è¿˜æ˜¯è¦éå†å¾ˆå¤šæ¬¡å—?<br>æƒ³å•Šæƒ³,æ­»æ‰nä¸ªè„‘ç»†èƒ,mæ ¹å¤´å‘å,æˆ‘æ˜ç™½äº†,åœ¨ä¸€ä¸ªé¡ºåºçš„æ•°ç»„é‡Œ,å¦‚æœä¸‹æ ‡iå’Œä¸‹æ ‡jæ»¡è¶³å°äºtarget,é‚£ä¹ˆiå’Œå…¶ä»–å°äºjçš„å…¶ä»–ç»„åˆéƒ½æ»¡è¶³,è¿™ä¸ªä¸ªæ•°æ˜¯(j-i)ä¸ª,ç„¶åi++ç»§ç»­åˆ¤æ–­å°±è¡Œäº†,å¦‚æœå¤§äºtargetäº†,å°±å¤§æ•°çš„ä¸‹æ ‡,j å‘å·¦ç§»åŠ¨j-- å°±è¡Œäº†. æƒ³æ˜ç™½å,æ‰å‘ç°å·²ç»è¿‡å»1ä¸ªå°æ—¶äº†.é©¬ä¸ŠåŠ¨æ‰‹å†™ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> purchasePlans = <span class="keyword">function</span>(<span class="params">nums, target</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">MOD</span> = <span class="number">1000000007</span></span><br><span class="line">    nums.<span class="title function_">sort</span>(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a-b)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span>  j = nums.<span class="property">length</span>-<span class="number">1</span></span><br><span class="line">    <span class="keyword">let</span> res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span>(i&lt;j) &#123;</span><br><span class="line">        <span class="keyword">if</span>(nums[i] + nums[j] &lt;= target) &#123;</span><br><span class="line">            res+=j-i</span><br><span class="line">            res = res%<span class="variable constant_">MOD</span></span><br><span class="line">            i++</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            j--</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±O(n)äº†,åŒæ—¶,ä¸è¦å¿˜äº†æ¨¡MOD.</p><p>æ³¨æ„æ—¶é—´å¤æ‚åº¦,ä¸è¦å†å†™ä½æ•ˆç‡çš„ä»£ç äº†ğŸ’ªğŸ’ªğŸ’ªğŸ’ªğŸ’ª</p>]]></content>
      
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜</title>
      <link href="/posts/fe80343/"/>
      <url>/posts/fe80343/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸€ä¸ªè®°å½•æ—¥å¸¸ç»“å±€æµè§ˆå™¨å…¼å®¹é—®é¢˜çš„å¤‡å¿˜å½•</p></blockquote><ol><li>å¦‚ä½•æŸ¥çœ‹æŸä¸ªjavaScript å¯¹è±¡æˆ–è€…css å±æ€§çš„å…¼å®¹æ€§</li></ol><p>åˆ°MNDæœç´¢éœ€è¦æŸ¥çœ‹çš„å†…å®¹,é¡µé¢åº•éƒ¨æä¾›ä¸€ä»½ä¸åŒå¹³å°(æ¯”å¦‚PCç«¯,æ‰‹æœºç«¯,nodeç«¯)ä»¥åŠä¸åŒæµè§ˆå™¨è¿›è¡Œå’Œå…¶å„ä¸ªå†å²ç‰ˆæœ¬çš„å…¼å®¹è¡¨æ ¼,å¯ä»¥å¾ˆç›´è§‚çš„çœ‹åˆ°ä½ è¦ç”¨çš„æŠ€æœ¯æ˜¯å¦æ”¯æŒä¸šåŠ¡è¦†ç›–çš„æµè§ˆå™¨æˆ–è€…å¹³å°.</p><ol start="2"><li>æµè§ˆå™¨å¼ºåˆ¶ç”¨webkitå†…æ ¸<br>å›½å†…éƒ¨åˆ†åŒæ ¸æµè§ˆå™¨å¦‚ï¼š360æé€Ÿæµè§ˆå™¨ã€æœç‹—æµè§ˆå™¨ã€ç™¾åº¦æµè§ˆå™¨ç­‰ç­‰ï¼Œè¿™äº›æµè§ˆå™¨éƒ½å·ç§°æ‹¥æœ‰ä¸¤ä¸ªå†…æ ¸ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦è‡ªç”±åˆ‡æ¢ã€‚åŒæ ¸æµè§ˆå™¨çš„2ä¸ªå†…ä¸ªåˆ†åˆ«ä¸ºæé€Ÿå†…æ ¸ï¼ˆwebkitå†…æ ¸ï¼‰ï¼Œå…¼å®¹å†…æ ¸ï¼ˆtridentå†…æ ¸ï¼‰ã€‚ä½¿ç”¨æé€Ÿå†…æ ¸æµè§ˆå™¨ä¼šæŒ‰ç…§w3cçš„æ–°æ ‡å‡†æ¸²æŸ“é¡µé¢ï¼Œå…¶ç»“æœæ˜¯æ¸²æŸ“é€Ÿåº¦æ›´å¿«ï¼Œè§„èŒƒæ€§æ›´å¥½ã€‚è€Œå…¼å®¹å†…æ ¸ä¹Ÿå¹¶éä¸€æ— æ˜¯å¤„ï¼Œå›½å†…å¾ˆå¤šæ”¿åºœã€é“¶è¡Œç±»ç½‘ç«™åœ¨ç¼–å†™ä¹‹åˆè€ƒè™‘äº†å…¼å®¹æ—§ç‰ˆæœ¬ieçš„tridentå†…æ ¸ï¼Œå…¶ä»£ç å¹¶éä¸ºw3cè§„èŒƒçš„æ ‡å‡†ï¼Œè€Œæ˜¯æµè§ˆå™¨å‚å•†è‡ªå®šä¹‰çš„æ¨¡å¼ï¼Œè¿™ç±»ç½‘ç«™åˆ™å¿…é¡»ä½¿ç”¨å…¼å®¹æ¨¡å¼æ‰“å¼€ï¼Œå¦‚æœä½¿ç”¨æé€Ÿæ¨¡å¼æ‰“å¼€å°±ä¼šäº§ç”Ÿå¸ƒå±€é”™ä¹±ç­‰é—®é¢˜ã€‚</li></ol><p>å¯ä»¥ç”¨ä¸‹é¢çš„æ ‡ç­¾å¼ºåˆ¶æµè§ˆå™¨ä½¿ç”¨æé€Ÿå†…æ ¸:<br><meta name="renderer" content="webkit"></p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨å…¼å®¹çš„å†™æ³•:<br><meta name="renderer" content="webkit|ie-comp|ie-stand"><br>è¿™é‡Œä¼šæ ¹æ®å…ˆåé¡ºåº,å¯ç”¨æ”¯æŒçš„å†…æ ¸,ä¸æ”¯æŒä¹Ÿä¸ä¼š</p><ol start="3"><li>é‡ç½®æ ·å¼<br>ä¸åŒçš„æµè§ˆå™¨ä¹‹é—´åŸºæœ¬æ ·å¼å¾ˆä¸ä¸€æ ·ï¼Œæ¯”å¦‚IEæµè§ˆå™¨ä½¿ç”¨ieç›’å­æ¨¡å‹ï¼Œç°ä»£æµè§ˆå™¨å¤§å¤šä½¿ç”¨æ ‡å‡†ç›’å­æ¨¡å‹ã€‚ä»–ä»¬ä¹‹é—´çš„å®½åº¦è®¡ç®—å¾ˆä¸ä¸€æ ·ã€‚<br>è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨reset.cssé‡ç½®ä¸€ä¸‹æ ·å¼äº†</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@charset</span> <span class="string">&quot;utf-8&quot;</span>;</span><br><span class="line"><span class="comment">/* CSS Document */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span>, <span class="selector-tag">body</span>, <span class="selector-tag">div</span>, <span class="selector-tag">span</span>, applet, <span class="selector-tag">object</span>, <span class="selector-tag">iframe</span>,</span><br><span class="line"><span class="selector-tag">h1</span>, <span class="selector-tag">h2</span>, <span class="selector-tag">h3</span>, <span class="selector-tag">h4</span>, <span class="selector-tag">h5</span>, <span class="selector-tag">h6</span>, <span class="selector-tag">p</span>, <span class="selector-tag">blockquote</span>, pre,</span><br><span class="line"><span class="selector-tag">a</span>, <span class="selector-tag">abbr</span>, acronym, <span class="selector-tag">address</span>, big, <span class="selector-tag">cite</span>, <span class="selector-tag">code</span>,</span><br><span class="line"><span class="selector-tag">del</span>, <span class="selector-tag">dfn</span>, <span class="selector-tag">em</span>, <span class="attribute">font</span>, <span class="selector-tag">img</span>, <span class="selector-tag">ins</span>, <span class="selector-tag">kbd</span>, <span class="selector-tag">q</span>, s, <span class="selector-tag">samp</span>,</span><br><span class="line">small, strike, <span class="selector-tag">strong</span>, sub, <span class="selector-tag">sup</span>, tt, <span class="selector-tag">var</span>,</span><br><span class="line"><span class="selector-tag">b</span>, u, <span class="selector-tag">i</span>, center,</span><br><span class="line"><span class="selector-tag">dl</span>, <span class="selector-tag">dt</span>, <span class="selector-tag">dd</span>, <span class="selector-tag">ol</span>, <span class="selector-tag">ul</span>, <span class="selector-tag">li</span>,</span><br><span class="line"><span class="selector-tag">fieldset</span>, <span class="selector-tag">form</span>, <span class="selector-tag">label</span>, <span class="selector-tag">legend</span>,</span><br><span class="line"><span class="selector-tag">table</span>, <span class="selector-tag">caption</span>, <span class="selector-tag">tbody</span>, <span class="selector-tag">tfoot</span>, <span class="selector-tag">thead</span>, <span class="selector-tag">tr</span>, <span class="selector-tag">th</span>, <span class="selector-tag">td</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">vertical-align</span>: baseline;</span><br><span class="line">    <span class="attribute">background</span>: transparent;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ol</span>, <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">blockquote</span>, <span class="selector-tag">q</span> &#123;</span><br><span class="line">    <span class="attribute">quotes</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">blockquote</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">blockquote</span><span class="selector-pseudo">:after</span>,</span><br><span class="line"><span class="selector-tag">q</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">q</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">content</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* remember to define focus styles! */</span></span><br><span class="line"><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* remember to highlight inserts somehow! */</span></span><br><span class="line"><span class="selector-tag">ins</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">del</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: line-through;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* tables still need &#x27;cellspacing=&quot;0&quot;&#x27; in the markup */</span></span><br><span class="line"><span class="selector-tag">table</span> &#123;</span><br><span class="line">    <span class="attribute">border-collapse</span>: collapse;</span><br><span class="line">    <span class="attribute">border-spacing</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ¸…é™¤æµ®åŠ¨ */</span></span><br><span class="line"><span class="selector-class">.clearfloat</span><span class="selector-pseudo">:after</span>&#123;<span class="attribute">display</span>:block;<span class="attribute">clear</span>:both;<span class="attribute">content</span>:<span class="string">&quot;&quot;</span>;<span class="attribute">visibility</span>:hidden; <span class="attribute">height</span>:<span class="number">0</span>;&#125; </span><br><span class="line"><span class="selector-class">.clearfloat</span>&#123;zoom:<span class="number">1</span>&#125; </span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="4"><li>æµè§ˆå™¨ç±»å‹åˆ¤æ–­</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµè§ˆå™¨ç±»å‹åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">browserType</span> () &#123;</span><br><span class="line">    <span class="keyword">var</span> userAgent = navigator.<span class="property">userAgent</span>; <span class="comment">//å–å¾—æµè§ˆå™¨çš„userAgentå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">var</span> isOpera = userAgent.<span class="title function_">indexOf</span>(<span class="string">&quot;Opera&quot;</span>) &gt; -<span class="number">1</span>; <span class="comment">//åˆ¤æ–­æ˜¯å¦Operaæµè§ˆå™¨</span></span><br><span class="line">    <span class="keyword">var</span> isIE = <span class="variable language_">window</span>.<span class="property">ActiveXObject</span> || <span class="string">&quot;ActiveXObject&quot;</span> <span class="keyword">in</span> <span class="variable language_">window</span></span><br><span class="line">    <span class="keyword">var</span> isEdge = userAgent.<span class="title function_">indexOf</span>(<span class="string">&quot;Edge&quot;</span>) &gt; -<span class="number">1</span>; <span class="comment">//åˆ¤æ–­æ˜¯å¦IEçš„Edgeæµè§ˆå™¨</span></span><br><span class="line">    <span class="keyword">var</span> isFF = userAgent.<span class="title function_">indexOf</span>(<span class="string">&quot;Firefox&quot;</span>) &gt; -<span class="number">1</span>; <span class="comment">//åˆ¤æ–­æ˜¯å¦Firefoxæµè§ˆå™¨</span></span><br><span class="line">    <span class="keyword">var</span> isSafari = userAgent.<span class="title function_">indexOf</span>(<span class="string">&quot;Safari&quot;</span>) &gt; -<span class="number">1</span> &amp;&amp; userAgent.<span class="title function_">indexOf</span>(<span class="string">&quot;Chrome&quot;</span>) == -<span class="number">1</span>; <span class="comment">//åˆ¤æ–­æ˜¯å¦Safariæµè§ˆå™¨</span></span><br><span class="line">    <span class="keyword">var</span> isChrome = userAgent.<span class="title function_">indexOf</span>(<span class="string">&quot;Chrome&quot;</span>) &gt; -<span class="number">1</span> &amp;&amp; userAgent.<span class="title function_">indexOf</span>(<span class="string">&quot;Safari&quot;</span>) &gt; -<span class="number">1</span> &amp;&amp; !isEdge; <span class="comment">//åˆ¤æ–­Chromeæµè§ˆå™¨</span></span><br><span class="line">    <span class="keyword">if</span> (isIE) &#123;</span><br><span class="line">        <span class="keyword">var</span> reIE = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;MSIE (\\d+\\.\\d+);&quot;</span>);</span><br><span class="line">        reIE.<span class="title function_">test</span>(userAgent);</span><br><span class="line">        <span class="keyword">var</span> fIEVersion = <span class="built_in">parseFloat</span>(<span class="title class_">RegExp</span>[<span class="string">&quot;$1&quot;</span>]);</span><br><span class="line">        <span class="keyword">if</span> (userAgent.<span class="title function_">indexOf</span>(<span class="string">&#x27;MSIE 6.0&#x27;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;IE6&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fIEVersion == <span class="number">7</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;IE7&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (fIEVersion == <span class="number">8</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;IE8&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (fIEVersion == <span class="number">9</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;IE9&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (fIEVersion == <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;IE10&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (userAgent.<span class="title function_">toLowerCase</span>().<span class="title function_">match</span>(<span class="regexp">/rv:([\d.]+)\) like gecko/</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;IE11&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">        &#125;<span class="comment">//IEç‰ˆæœ¬è¿‡ä½</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isFF) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;FF&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isOpera) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Opera&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isSafari) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Safari&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isChrome) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Chrome&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isEdge) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Edge&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>html if åˆ¤æ–­æµè§ˆå™¨ieç‰ˆæœ¬</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if !IE]&gt; é™¤IEå¤–éƒ½å¯è¯†åˆ« &lt;!--&lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if IE]&gt; æ‰€æœ‰çš„IEå¯è¯†åˆ« &lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if IE 6]&gt; ä»…IE6å¯è¯†åˆ« &lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if lt IE 6]&gt; IE6ä»¥åŠIE6ä»¥ä¸‹ç‰ˆæœ¬å¯è¯†åˆ« &lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if gte IE 6]&gt; IE6ä»¥åŠIE6ä»¥ä¸Šç‰ˆæœ¬å¯è¯†åˆ« &lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if IE 7]&gt; ä»…IE7å¯è¯†åˆ« &lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if lt IE 7]&gt; IE7ä»¥åŠIE7ä»¥ä¸‹ç‰ˆæœ¬å¯è¯†åˆ« &lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if gte IE 7]&gt; IE7ä»¥åŠIE7ä»¥ä¸Šç‰ˆæœ¬å¯è¯†åˆ« &lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if IE 8]&gt; ä»…IE8å¯è¯†åˆ« &lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if IE 9]&gt; ä»…IE9å¯è¯†åˆ« &lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>~~æœªå®Œå¾…ç»­</p>]]></content>
      
      
      
        <tags>
            
            <tag> html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>promiseA+</title>
      <link href="/posts/d721f59f/"/>
      <url>/posts/d721f59f/</url>
      
        <content type="html"><![CDATA[<blockquote><p>JavaScript Promise A+ è§„èŒƒ</p></blockquote><p>è¯‘è€…åºï¼šä¸€å¹´å‰æ›¾è¯‘è¿‡ Promise/A+ è§„èŒƒï¼Œé€‚æ—¶å®Œå…¨ä¸æ‡‚ Promise çš„æ€æƒ³ï¼Œçº¯ç²¹å°†ç¿»è¯‘çš„è¿‡ç¨‹å½“ä½œå­¦ä¹ ï¼Œæ—§æ–‡è¯‘ä¸‹æ¥è¯˜å±ˆè±ç‰™ï¼Œè¯»èµ·æ¥ååˆ†ä¸é¡ºç•…ã€‚è°çŸ¥è¿™æ ·ä¸€ç¯‡æ‹™è¯‘ï¼Œä¸€å¹´ä¹‹é—´ç«Ÿç„¶ç‚¹å‡»æ•°åƒï¼Œæˆä¸ºè°·æ­Œæœç´¢çš„å¤´æ¡ã€‚ä»Šæ—¥åœ¨ç†è§£ä¹‹åé‡è¯‘æ­¤è§„èŒƒï¼Œä»¥é£¨è¯»è€…ã€‚</p><p>ä¸€ä¸ªå¼€æ”¾ã€å¥å…¨ä¸”é€šç”¨çš„ JavaScript Promise æ ‡å‡†ã€‚ç”±å¼€å‘è€…åˆ¶å®šï¼Œä¾›å¼€å‘è€…å‚è€ƒã€‚</p><p>è¯‘æ–‡æœ¯è¯­:</p><p>è§£å†³ï¼ˆfulfillï¼‰ï¼šæŒ‡ä¸€ä¸ª promise æˆåŠŸæ—¶è¿›è¡Œçš„ä¸€ç³»åˆ—æ“ä½œï¼Œå¦‚çŠ¶æ€çš„æ”¹å˜ã€å›è°ƒçš„æ‰§è¡Œã€‚è™½ç„¶è§„èŒƒä¸­ç”¨ fulfill æ¥è¡¨ç¤ºè§£å†³ï¼Œä½†åœ¨åä¸–çš„ promise å®ç°å¤šä»¥ resolve æ¥æŒ‡ä»£ä¹‹ã€‚</p><p>æ‹’ç»ï¼ˆrejectï¼‰ï¼šæŒ‡ä¸€ä¸ª promise å¤±è´¥æ—¶è¿›è¡Œçš„ä¸€ç³»åˆ—æ“ä½œã€‚</p><p>ç»ˆå€¼ï¼ˆeventual valueï¼‰ï¼šæ‰€è°“ç»ˆå€¼ï¼ŒæŒ‡çš„æ˜¯ promise è¢«è§£å†³æ—¶ä¼ é€’ç»™è§£å†³å›è°ƒçš„å€¼ï¼Œç”±äº promise æœ‰ä¸€æ¬¡æ€§çš„ç‰¹å¾ï¼Œå› æ­¤å½“è¿™ä¸ªå€¼è¢«ä¼ é€’æ—¶ï¼Œæ ‡å¿—ç€ promise ç­‰å¾…æ€çš„ç»“æŸï¼Œæ•…ç§°ä¹‹ç»ˆå€¼ï¼Œæœ‰æ—¶ä¹Ÿç›´æ¥ç®€ç§°ä¸ºå€¼ï¼ˆvalueï¼‰ã€‚</p><p>æ®å› ï¼ˆreasonï¼‰ï¼šä¹Ÿå°±æ˜¯æ‹’ç»åŸå› ï¼ŒæŒ‡åœ¨ promise è¢«æ‹’ç»æ—¶ä¼ é€’ç»™æ‹’ç»å›è°ƒçš„å€¼ã€‚</p><p>å®ç°:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Promise å®ç° éµå¾ªpromise/A+è§„èŒƒ</span></span><br><span class="line"><span class="comment"> * Promise/A+è§„èŒƒè¯‘æ–‡:</span></span><br><span class="line"><span class="comment"> * https://malcolmyu.github.io/2015/06/12/Promises-A-Plus/#note-4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// promise ä¸‰ä¸ªçŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PENDING</span> = <span class="string">&quot;pending&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">FULFILLED</span> = <span class="string">&quot;fulfilled&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">REJECTED</span> = <span class="string">&quot;rejected&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Promise</span>(<span class="params">excutor</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> that = <span class="variable language_">this</span>; <span class="comment">// ç¼“å­˜å½“å‰promiseå®ä¾‹å¯¹è±¡</span></span><br><span class="line">    that.<span class="property">status</span> = <span class="variable constant_">PENDING</span>; <span class="comment">// åˆå§‹çŠ¶æ€</span></span><br><span class="line">    that.<span class="property">value</span> = <span class="literal">undefined</span>; <span class="comment">// fulfilledçŠ¶æ€æ—¶ è¿”å›çš„ä¿¡æ¯</span></span><br><span class="line">    that.<span class="property">reason</span> = <span class="literal">undefined</span>; <span class="comment">// rejectedçŠ¶æ€æ—¶ æ‹’ç»çš„åŸå› </span></span><br><span class="line">    that.<span class="property">onFulfilledCallbacks</span> = []; <span class="comment">// å­˜å‚¨fulfilledçŠ¶æ€å¯¹åº”çš„onFulfilledå‡½æ•°</span></span><br><span class="line">    that.<span class="property">onRejectedCallbacks</span> = []; <span class="comment">// å­˜å‚¨rejectedçŠ¶æ€å¯¹åº”çš„onRejectedå‡½æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">resolve</span>(<span class="params">value</span>) &#123; <span class="comment">// valueæˆåŠŸæ€æ—¶æ¥æ”¶çš„ç»ˆå€¼</span></span><br><span class="line">        <span class="keyword">if</span> (value <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> value.<span class="title function_">then</span>(resolve, reject);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸ºä»€ä¹ˆresolve åŠ setTimeout?</span></span><br><span class="line">        <span class="comment">// 2.2.4è§„èŒƒ onFulfilled å’Œ onRejected åªå…è®¸åœ¨ execution context æ ˆä»…åŒ…å«å¹³å°ä»£ç æ—¶è¿è¡Œ.</span></span><br><span class="line">        <span class="comment">// æ³¨1 è¿™é‡Œçš„å¹³å°ä»£ç æŒ‡çš„æ˜¯å¼•æ“ã€ç¯å¢ƒä»¥åŠ promise çš„å®æ–½ä»£ç ã€‚å®è·µä¸­è¦ç¡®ä¿ onFulfilled å’Œ onRejected æ–¹æ³•å¼‚æ­¥æ‰§è¡Œï¼Œä¸”åº”è¯¥åœ¨ then æ–¹æ³•è¢«è°ƒç”¨çš„é‚£ä¸€è½®äº‹ä»¶å¾ªç¯ä¹‹åçš„æ–°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œã€‚</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨resolve å›è°ƒå¯¹åº”onFulfilledå‡½æ•°</span></span><br><span class="line">            <span class="keyword">if</span> (that.<span class="property">status</span> === <span class="variable constant_">PENDING</span>) &#123;</span><br><span class="line">                <span class="comment">// åªèƒ½ç”±pedningçŠ¶æ€ =&gt; fulfilledçŠ¶æ€ (é¿å…è°ƒç”¨å¤šæ¬¡resolve reject)</span></span><br><span class="line">                that.<span class="property">status</span> = <span class="variable constant_">FULFILLED</span>;</span><br><span class="line">                that.<span class="property">value</span> = value;</span><br><span class="line">                that.<span class="property">onFulfilledCallbacks</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">cb</span> =&gt;</span> <span class="title function_">cb</span>(that.<span class="property">value</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">reject</span>(<span class="params">reason</span>) &#123; <span class="comment">// reasonå¤±è´¥æ€æ—¶æ¥æ”¶çš„æ‹’å› </span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨reject å›è°ƒå¯¹åº”onRejectedå‡½æ•°</span></span><br><span class="line">            <span class="keyword">if</span> (that.<span class="property">status</span> === <span class="variable constant_">PENDING</span>) &#123;</span><br><span class="line">                <span class="comment">// åªèƒ½ç”±pedningçŠ¶æ€ =&gt; rejectedçŠ¶æ€ (é¿å…è°ƒç”¨å¤šæ¬¡resolve reject)</span></span><br><span class="line">                that.<span class="property">status</span> = <span class="variable constant_">REJECTED</span>;</span><br><span class="line">                that.<span class="property">reason</span> = reason;</span><br><span class="line">                that.<span class="property">onRejectedCallbacks</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">cb</span> =&gt;</span> <span class="title function_">cb</span>(that.<span class="property">reason</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ•è·åœ¨excutoræ‰§è¡Œå™¨ä¸­æŠ›å‡ºçš„å¼‚å¸¸</span></span><br><span class="line">    <span class="comment">// new Promise((resolve, reject) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//     throw new Error(&#x27;error in excutor&#x27;)</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="title function_">excutor</span>(resolve, reject);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="title function_">reject</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * resolveä¸­çš„å€¼å‡ ç§æƒ…å†µï¼š</span></span><br><span class="line"><span class="comment"> * 1.æ™®é€šå€¼</span></span><br><span class="line"><span class="comment"> * 2.promiseå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * 3.thenableå¯¹è±¡/å‡½æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¹resolve è¿›è¡Œæ”¹é€ å¢å¼º é’ˆå¯¹resolveä¸­ä¸åŒå€¼æƒ…å†µ è¿›è¡Œå¤„ç†</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  &#123;<span class="type">promise</span>&#125; promise2 promise1.thenæ–¹æ³•è¿”å›çš„æ–°çš„promiseå¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  &#123;<span class="type">[type]</span>&#125; x         promise1ä¸­onFulfilledçš„è¿”å›å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  &#123;<span class="type">[type]</span>&#125; resolve   promise2çš„resolveæ–¹æ³•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  &#123;<span class="type">[type]</span>&#125; reject    promise2çš„rejectæ–¹æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">resolvePromise</span>(<span class="params">promise2, x, resolve, reject</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (promise2 === x) &#123; <span class="comment">// å¦‚æœä»onFulfilledä¸­è¿”å›çš„x å°±æ˜¯promise2 å°±ä¼šå¯¼è‡´å¾ªç¯å¼•ç”¨æŠ¥é”™</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&#x27;å¾ªç¯å¼•ç”¨&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> called = <span class="literal">false</span>; <span class="comment">// é¿å…å¤šæ¬¡è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// å¦‚æœxæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ ï¼ˆè¯¥åˆ¤æ–­å’Œä¸‹é¢ åˆ¤æ–­æ˜¯ä¸æ˜¯thenableå¯¹è±¡é‡å¤ æ‰€ä»¥å¯æœ‰å¯æ— ï¼‰</span></span><br><span class="line">    <span class="keyword">if</span> (x <span class="keyword">instanceof</span> <span class="title class_">Promise</span>) &#123; <span class="comment">// è·å¾—å®ƒçš„ç»ˆå€¼ ç»§ç»­resolve</span></span><br><span class="line">        <span class="keyword">if</span> (x.<span class="property">status</span> === <span class="variable constant_">PENDING</span>) &#123; <span class="comment">// å¦‚æœä¸ºç­‰å¾…æ€éœ€ç­‰å¾…ç›´è‡³ x è¢«æ‰§è¡Œæˆ–æ‹’ç» å¹¶è§£æyå€¼</span></span><br><span class="line">            x.<span class="title function_">then</span>(<span class="function"><span class="params">y</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">resolvePromise</span>(promise2, y, resolve, reject);</span><br><span class="line">            &#125;, <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">reject</span>(reason);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¦‚æœ x å·²ç»å¤„äºæ‰§è¡Œæ€/æ‹’ç»æ€(å€¼å·²ç»è¢«è§£æä¸ºæ™®é€šå€¼)ï¼Œç”¨ç›¸åŒçš„å€¼æ‰§è¡Œä¼ é€’ä¸‹å» promise</span></span><br><span class="line">            x.<span class="title function_">then</span>(resolve, reject);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¦‚æœ x ä¸ºå¯¹è±¡æˆ–è€…å‡½æ•°</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x != <span class="literal">null</span> &amp;&amp; ((<span class="keyword">typeof</span> x === <span class="string">&#x27;object&#x27;</span>) || (<span class="keyword">typeof</span> x === <span class="string">&#x27;function&#x27;</span>))) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123; <span class="comment">// æ˜¯å¦æ˜¯thenableå¯¹è±¡ï¼ˆå…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡/å‡½æ•°ï¼‰</span></span><br><span class="line">            <span class="keyword">let</span> then = x.<span class="property">then</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> then === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">                then.<span class="title function_">call</span>(x, <span class="function"><span class="params">y</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (called) <span class="keyword">return</span>;</span><br><span class="line">                    called = <span class="literal">true</span>;</span><br><span class="line">                    <span class="title function_">resolvePromise</span>(promise2, y, resolve, reject);</span><br><span class="line">                &#125;, <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (called) <span class="keyword">return</span>;</span><br><span class="line">                    called = <span class="literal">true</span>;</span><br><span class="line">                    <span class="title function_">reject</span>(reason);</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// è¯´æ˜æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡/å‡½æ•°</span></span><br><span class="line">                <span class="title function_">resolve</span>(x);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            <span class="keyword">if</span> (called) <span class="keyword">return</span>;</span><br><span class="line">            called = <span class="literal">true</span>;</span><br><span class="line">            <span class="title function_">reject</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * [æ³¨å†ŒfulfilledçŠ¶æ€/rejectedçŠ¶æ€å¯¹åº”çš„å›è°ƒå‡½æ•°]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  &#123;<span class="type">function</span>&#125; onFulfilled fulfilledçŠ¶æ€æ—¶ æ‰§è¡Œçš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  &#123;<span class="type">function</span>&#125; onRejected  rejectedçŠ¶æ€æ—¶ æ‰§è¡Œçš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">function</span>&#125; newPromsie  è¿”å›ä¸€ä¸ªæ–°çš„promiseå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">then</span> = <span class="keyword">function</span> (<span class="params">onFulfilled, onRejected</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">let</span> newPromise;</span><br><span class="line">    <span class="comment">// å¤„ç†å‚æ•°é»˜è®¤å€¼ ä¿è¯å‚æ•°åç»­èƒ½å¤Ÿç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">    onFulfilled =</span><br><span class="line">        <span class="keyword">typeof</span> onFulfilled === <span class="string">&quot;function&quot;</span> ? onFulfilled : <span class="function"><span class="params">value</span> =&gt;</span> value;</span><br><span class="line">    onRejected =</span><br><span class="line">        <span class="keyword">typeof</span> onRejected === <span class="string">&quot;function&quot;</span> ? onRejected : <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> reason;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// thené‡Œé¢çš„FULFILLED/REJECTEDçŠ¶æ€æ—¶ ä¸ºä»€ä¹ˆè¦åŠ setTimeout ?</span></span><br><span class="line">    <span class="comment">// åŸå› :</span></span><br><span class="line">    <span class="comment">// å…¶ä¸€ 2.2.4è§„èŒƒ è¦ç¡®ä¿ onFulfilled å’Œ onRejected æ–¹æ³•å¼‚æ­¥æ‰§è¡Œ(ä¸”åº”è¯¥åœ¨ then æ–¹æ³•è¢«è°ƒç”¨çš„é‚£ä¸€è½®äº‹ä»¶å¾ªç¯ä¹‹åçš„æ–°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œ) æ‰€ä»¥è¦åœ¨resolveé‡ŒåŠ ä¸ŠsetTimeout</span></span><br><span class="line">    <span class="comment">// å…¶äºŒ 2.2.6è§„èŒƒ å¯¹äºä¸€ä¸ªpromiseï¼Œå®ƒçš„thenæ–¹æ³•å¯ä»¥è°ƒç”¨å¤šæ¬¡.ï¼ˆå½“åœ¨å…¶ä»–ç¨‹åºä¸­å¤šæ¬¡è°ƒç”¨åŒä¸€ä¸ªpromiseçš„thenæ—¶ ç”±äºä¹‹å‰çŠ¶æ€å·²ç»ä¸ºFULFILLED/REJECTEDçŠ¶æ€ï¼Œåˆ™ä¼šèµ°çš„ä¸‹é¢é€»è¾‘),æ‰€ä»¥è¦ç¡®ä¿ä¸ºFULFILLED/REJECTEDçŠ¶æ€å ä¹Ÿè¦å¼‚æ­¥æ‰§è¡ŒonFulfilled/onRejected</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…¶äºŒ 2.2.6è§„èŒƒ ä¹Ÿæ˜¯resolveå‡½æ•°é‡ŒåŠ setTimeoutçš„åŸå› </span></span><br><span class="line">    <span class="comment">// æ€»ä¹‹éƒ½æ˜¯ è®©thenæ–¹æ³•å¼‚æ­¥æ‰§è¡Œ ä¹Ÿå°±æ˜¯ç¡®ä¿onFulfilled/onRejectedå¼‚æ­¥æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚ä¸‹é¢è¿™ç§æƒ…æ™¯ å¤šæ¬¡è°ƒç”¨p1.then</span></span><br><span class="line">    <span class="comment">// p1.then((value) =&gt; &#123; // æ­¤æ—¶p1.status ç”±peddingçŠ¶æ€ =&gt; fulfilledçŠ¶æ€</span></span><br><span class="line">    <span class="comment">//     console.log(value); // resolve</span></span><br><span class="line">    <span class="comment">//     // console.log(p1.status); // fulfilled</span></span><br><span class="line">    <span class="comment">//     p1.then(value =&gt; &#123; // å†æ¬¡p1.then è¿™æ—¶å·²ç»ä¸ºfulfilledçŠ¶æ€ èµ°çš„æ˜¯fulfilledçŠ¶æ€åˆ¤æ–­é‡Œçš„é€»è¾‘ æ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¦ç¡®ä¿åˆ¤æ–­é‡Œé¢onFuilledå¼‚æ­¥æ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">//         console.log(value); // &#x27;resolve&#x27;</span></span><br><span class="line">    <span class="comment">//     &#125;);</span></span><br><span class="line">    <span class="comment">//     console.log(&#x27;å½“å‰æ‰§è¡Œæ ˆä¸­åŒæ­¥ä»£ç &#x27;);</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line">    <span class="comment">// console.log(&#x27;å…¨å±€æ‰§è¡Œæ ˆä¸­åŒæ­¥ä»£ç &#x27;);</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (that.<span class="property">status</span> === <span class="variable constant_">FULFILLED</span>) &#123; <span class="comment">// æˆåŠŸæ€</span></span><br><span class="line">        <span class="keyword">return</span> newPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">let</span> x = <span class="title function_">onFulfilled</span>(that.<span class="property">value</span>);</span><br><span class="line">                    <span class="title function_">resolvePromise</span>(newPromise, x, resolve, reject); <span class="comment">// æ–°çš„promise resolve ä¸Šä¸€ä¸ªonFulfilledçš„è¿”å›å€¼</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(e); <span class="comment">// æ•è·å‰é¢onFulfilledä¸­æŠ›å‡ºçš„å¼‚å¸¸ then(onFulfilled, onRejected);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (that.<span class="property">status</span> === <span class="variable constant_">REJECTED</span>) &#123; <span class="comment">// å¤±è´¥æ€</span></span><br><span class="line">        <span class="keyword">return</span> newPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">let</span> x = <span class="title function_">onRejected</span>(that.<span class="property">reason</span>);</span><br><span class="line">                    <span class="title function_">resolvePromise</span>(newPromise, x, resolve, reject);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (that.<span class="property">status</span> === <span class="variable constant_">PENDING</span>) &#123; <span class="comment">// ç­‰å¾…æ€</span></span><br><span class="line">        <span class="comment">// å½“å¼‚æ­¥è°ƒç”¨resolve/rejectedæ—¶ å°†onFulfilled/onRejectedæ”¶é›†æš‚å­˜åˆ°é›†åˆä¸­</span></span><br><span class="line">        <span class="keyword">return</span> newPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            that.<span class="property">onFulfilledCallbacks</span>.<span class="title function_">push</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">let</span> x = <span class="title function_">onFulfilled</span>(value);</span><br><span class="line">                    <span class="title function_">resolvePromise</span>(newPromise, x, resolve, reject);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            that.<span class="property">onRejectedCallbacks</span>.<span class="title function_">push</span>(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">let</span> x = <span class="title function_">onRejected</span>(reason);</span><br><span class="line">                    <span class="title function_">resolvePromise</span>(newPromise, x, resolve, reject);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Promise.all Promiseè¿›è¡Œå¹¶è¡Œå¤„ç†</span></span><br><span class="line"><span class="comment"> * å‚æ•°: promiseå¯¹è±¡ç»„æˆçš„æ•°ç»„ä½œä¸ºå‚æ•°</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼: è¿”å›ä¸€ä¸ªPromiseå®ä¾‹</span></span><br><span class="line"><span class="comment"> * å½“è¿™ä¸ªæ•°ç»„é‡Œçš„æ‰€æœ‰promiseå¯¹è±¡å…¨éƒ¨å˜ä¸ºresolveçŠ¶æ€çš„æ—¶å€™ï¼Œæ‰ä¼šresolveã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">all</span> = <span class="keyword">function</span> (<span class="params">promises</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> done = <span class="title function_">gen</span>(promises.<span class="property">length</span>, resolve);</span><br><span class="line">        promises.<span class="title function_">forEach</span>(<span class="function">(<span class="params">promise, index</span>) =&gt;</span> &#123;</span><br><span class="line">            promise.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">done</span>(index, value)</span><br><span class="line">            &#125;, reject)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">gen</span>(<span class="params">length, resolve</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> values = [];</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">i, value</span>) &#123;</span><br><span class="line">        values[i] = value;</span><br><span class="line">        <span class="keyword">if</span> (++count === length) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(values);</span><br><span class="line">            <span class="title function_">resolve</span>(values);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Promise.race</span></span><br><span class="line"><span class="comment"> * å‚æ•°: æ¥æ”¶ promiseå¯¹è±¡ç»„æˆçš„æ•°ç»„ä½œä¸ºå‚æ•°</span></span><br><span class="line"><span class="comment"> * è¿”å›å€¼: è¿”å›ä¸€ä¸ªPromiseå®ä¾‹</span></span><br><span class="line"><span class="comment"> * åªè¦æœ‰ä¸€ä¸ªpromiseå¯¹è±¡è¿›å…¥ FulFilled æˆ–è€… Rejected çŠ¶æ€çš„è¯ï¼Œå°±ä¼šç»§ç»­è¿›è¡Œåé¢çš„å¤„ç†(å–å†³äºå“ªä¸€ä¸ªæ›´å¿«)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">race</span> = <span class="keyword">function</span> (<span class="params">promises</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        promises.<span class="title function_">forEach</span>(<span class="function">(<span class="params">promise, index</span>) =&gt;</span> &#123;</span><br><span class="line">            promise.<span class="title function_">then</span>(resolve, reject);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨äºpromiseæ–¹æ³•é“¾æ—¶ æ•è·å‰é¢onFulfilled/onRejectedæŠ›å‡ºçš„å¼‚å¸¸</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">catch</span> = <span class="keyword">function</span> (<span class="params">onRejected</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">then</span>(<span class="literal">null</span>, onRejected);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">resolve</span> = <span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(value);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">reject</span> = <span class="keyword">function</span> (<span class="params">reason</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">reject</span>(reason);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŸºäºPromiseå®ç°Deferredçš„</span></span><br><span class="line"><span class="comment"> * Deferredå’ŒPromiseçš„å…³ç³»</span></span><br><span class="line"><span class="comment"> * - Deferred æ‹¥æœ‰ Promise</span></span><br><span class="line"><span class="comment"> * - Deferred å…·å¤‡å¯¹ Promiseçš„çŠ¶æ€è¿›è¡Œæ“ä½œçš„ç‰¹æƒæ–¹æ³•ï¼ˆresolve rejectï¼‰</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *å‚è€ƒjQuery.Deferred</span></span><br><span class="line"><span class="comment"> *url: http://api.jquery.com/category/deferred-object/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="property">deferred</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">// å»¶è¿Ÿå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">let</span> defer = &#123;&#125;;</span><br><span class="line">    defer.<span class="property">promise</span> = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        defer.<span class="property">resolve</span> = resolve;</span><br><span class="line">        defer.<span class="property">reject</span> = reject;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> defer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Promise/A+è§„èŒƒæµ‹è¯•</span></span><br><span class="line"><span class="comment"> * npm i -g promises-aplus-tests</span></span><br><span class="line"><span class="comment"> * promises-aplus-tests Promise.js</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">Promise</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br></pre></td></tr></table></figure><p>æ¥æº:<br><a href="https://www.ituring.com.cn/article/66566">https://www.ituring.com.cn/article/66566</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> javaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue3-new-feature</title>
      <link href="/posts/20a24eb5/"/>
      <url>/posts/20a24eb5/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ€»ç»“ä¸€ä¸‹æœ€è¿‘ä¸€æ®µæ—¶é—´å­¦ä¹  vue3 çš„æ”¶è·</p></blockquote><h2 id="åŠŸèƒ½æ–¹é¢"><a class="header-anchor" href="#åŠŸèƒ½æ–¹é¢">Â¶</a>åŠŸèƒ½æ–¹é¢</h2><h4 id="Composition-API-ç»„åˆAPI"><a class="header-anchor" href="#Composition-API-ç»„åˆAPI">Â¶</a>Composition API (ç»„åˆAPI)</h4><p>Composition API çš„çµæ„Ÿæ¥è‡ªäº React Hooks ï¼Œæ˜¯æ¯” mixin æ›´å¼ºå¤§çš„å­˜åœ¨ã€‚å®ƒå¯ä»¥æé«˜ä»£ç é€»è¾‘çš„å¯å¤ç”¨æ€§ï¼Œä»è€Œå®ç°ä¸æ¨¡æ¿çš„æ— å…³æ€§ï¼›åŒæ—¶å‡½æ•°å¼çš„ç¼–ç¨‹ä½¿ä»£ç çš„å¯å‹ç¼©æ€§æ›´å¼ºã€‚å¦å¤–ï¼ŒæŠŠ Reactivity æ¨¡å—ç‹¬ç«‹å¼€æ¥ï¼Œæ„å‘³ç€ Vue3.0 çš„å“åº”å¼æ¨¡å—å¯ä»¥ä¸å…¶ä»–æ¡†æ¶ç›¸ç»„åˆã€‚<br>å®˜æ–¹ä¾‹å­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¼ æ ‡ä½ç½®ä¾¦å¬é€»è¾‘ </span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useMouse</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">            <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">y</span>: <span class="number">0</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">update</span> = e =&gt; &#123;</span><br><span class="line">            state.<span class="property">x</span> = e.<span class="property">pageX</span></span><br><span class="line">            state.<span class="property">y</span> = e.<span class="property">pageY</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, update)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title function_">onUnmounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, update)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">toRefs</span>(state)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»çš„æ¥è¯´ï¼Œå°±æ˜¯æŠŠç›¸å…³çš„é€»è¾‘å•ç‹¬æ‹¿å‡ºæ¥æé«˜ä»£ç å¤ç”¨</p><h4 id="å…¨å±€æŒ‚è½½-é…ç½®APIæ›´æ”¹"><a class="header-anchor" href="#å…¨å±€æŒ‚è½½-é…ç½®APIæ›´æ”¹">Â¶</a>å…¨å±€æŒ‚è½½/é…ç½®APIæ›´æ”¹</h4><p>vue2 ä½¿ç”¨ new Vue åˆ›å»ºå®ä¾‹ï¼Œé€šè¿‡å…¨å±€è®¾ç½®configé…ç½®vueçš„å¯é€‰é…ç½®ã€‚<br>vue3 ä½¿ç”¨ createApp å®šä¹‰çš„æŸä¸ª Vue ç¨‹åºã€‚å®ƒå¯ä»¥ä½¿ä½ çš„ä»£ç æ›´æ˜“äºç†è§£ï¼Œå¹¶ä¸”ä¸æ˜“å‡ºç°ç”±ç¬¬ä¸‰æ–¹æ’ä»¶å¼•å‘çš„æ„å¤–é—®é¢˜ã€‚ç›®å‰ï¼Œå¦‚æœæŸäº›ç¬¬ä¸‰æ–¹è§£å†³æ–¹æ¡ˆæ­£åœ¨ä¿®æ”¹ Vue å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½ä¼šä»¥æ„æƒ³ä¸åˆ°çš„æ–¹å¼ï¼ˆå°¤å…¶æ˜¯å…¨å±€æ··åˆï¼‰å½±å“ä½ çš„ç¨‹åºï¼Œè€Œ Vue 3 åˆ™æ²¡æœ‰è¿™ä¸ªé—®é¢˜.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="property">config</span>.<span class="property">ignoredElements</span> = [<span class="regexp">/^app-/</span>]</span><br><span class="line">app.<span class="title function_">use</span>(<span class="comment">/* ... */</span>)</span><br><span class="line">app.<span class="title function_">mixin</span>(<span class="comment">/* ... */</span>)</span><br><span class="line">app.<span class="title function_">component</span>(<span class="comment">/* ... */</span>)</span><br><span class="line">app.<span class="title function_">directive</span>(<span class="comment">/* ... */</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Fragments-ç‰‡æ®µ"><a class="header-anchor" href="#Fragments-ç‰‡æ®µ">Â¶</a>Fragments(ç‰‡æ®µ)</h4><p>åœ¨ä¹¦å†™vue2æ—¶ï¼Œç”±äºç»„ä»¶å¿…é¡»åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå¾ˆå¤šæ—¶å€™ä¼šæ·»åŠ ä¸€äº›æ²¡æœ‰æ„ä¹‰çš„èŠ‚ç‚¹ç”¨äºåŒ…è£¹ã€‚Fragmentç»„ä»¶å°±æ˜¯ç”¨äºè§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼ˆè¿™å’ŒReactä¸­çš„Fragmentç»„ä»¶æ˜¯ä¸€æ ·çš„ï¼‰ã€‚</p><h4 id="Suspense"><a class="header-anchor" href="#Suspense">Â¶</a>Suspense</h4><p>åŒæ ·çš„ï¼Œè¿™å’ŒReactä¸­çš„Supenseæ˜¯ä¸€æ ·çš„ã€‚Suspense è®©ä½ çš„ç»„ä»¶åœ¨æ¸²æŸ“ä¹‹å‰è¿›è¡Œâ€œç­‰å¾…â€ï¼Œå¹¶åœ¨ç­‰å¾…æ—¶æ˜¾ç¤º fallback çš„å†…å®¹ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Suspense</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Suspended-component</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">fallback</span>&gt;</span></span><br><span class="line">    Loading...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="v-model-æ”¯æŒå¤šä¸ª"><a class="header-anchor" href="#v-model-æ”¯æŒå¤šä¸ª">Â¶</a>v-model æ”¯æŒå¤šä¸ª</h4><p>åœ¨ 3.x ç‰ˆæœ¬ä¸­ï¼Œåœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸Šä½¿ç”¨ v-model ç›¸å½“äºä¼ é€’äº†ä¸€ä¸ª modelValue å±æ€§ä»¥åŠè§¦å‘ä¸€ä¸ª update:modelValue äº‹ä»¶ã€‚<br>å¦‚æœè¦æ”¹å˜ç»‘å®šçš„å±æ€§åï¼Œåªéœ€è¦ç»™ v-model ä¼ é€’ä¸€ä¸ªå‚æ•°å°±å¥½äº†ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">KyrieInput</span> <span class="attr">v-model:title</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç­‰åŒäº --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">KyrieInput</span> <span class="attr">:title</span>=<span class="string">&quot;name&quot;</span> @<span class="attr">update:title</span>=<span class="string">&quot;name = $event&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå†™æ³•è¿˜å½»åº•ä»£æ›¿äº† .sync ä¿®é¥°ç¬¦ï¼Œå¹¶ä¸”æ”¯æŒç»Ÿä¸€ç»„ä»¶ç»‘å®šå¤šä¸ª v-model</p><h4 id="Portals"><a class="header-anchor" href="#Portals">Â¶</a>Portals</h4><p>Teleportå…¶å®å°±æ˜¯Reactä¸­çš„Portalã€‚Portal æä¾›äº†ä¸€ç§å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹çš„ä¼˜ç§€çš„æ–¹æ¡ˆã€‚ä¸€ä¸ª portal çš„å…¸å‹ç”¨ä¾‹æ˜¯å½“çˆ¶ç»„ä»¶æœ‰ overflow: hidden æˆ– z-index æ ·å¼æ—¶ï¼Œä½†ä½ éœ€è¦å­ç»„ä»¶èƒ½å¤Ÿåœ¨è§†è§‰ä¸Šâ€œè·³å‡ºâ€å…¶å®¹å™¨ã€‚ä¾‹å¦‚ï¼Œå¯¹è¯æ¡†ã€æ‚¬æµ®å¡ä»¥åŠæç¤ºæ¡†ã€‚</p><h2 id="å®ç°é€»è¾‘é‡å¤§æ›´æ”¹"><a class="header-anchor" href="#å®ç°é€»è¾‘é‡å¤§æ›´æ”¹">Â¶</a>å®ç°é€»è¾‘é‡å¤§æ›´æ”¹</h2><h4 id="å“åº”å¼åŸç†"><a class="header-anchor" href="#å“åº”å¼åŸç†">Â¶</a>å“åº”å¼åŸç†</h4><p>Object.defineProperty -&gt; Proxy<br>Object.definePropertyæ˜¯ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒæ˜‚è´µçš„æ“ä½œï¼Œå› ä¸ºå®ƒç›´æ¥æ“ä½œå¯¹è±¡çš„å±æ€§ï¼Œé¢—ç²’åº¦æ¯”è¾ƒå°ã€‚å°†å®ƒæ›¿æ¢ä¸ºes6çš„Proxyï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹ä¸Šæ¶äº†ä¸€å±‚æ‹¦æˆªï¼Œä»£ç†çš„æ˜¯å¯¹è±¡è€Œä¸æ˜¯å¯¹è±¡çš„å±æ€§ã€‚è¿™æ ·å¯ä»¥å°†åŸæœ¬å¯¹å¯¹è±¡å±æ€§çš„æ“ä½œå˜ä¸ºå¯¹æ•´ä¸ªå¯¹è±¡çš„æ“ä½œï¼Œé¢—ç²’åº¦å˜å¤§ã€‚</p><p>javascriptå¼•æ“åœ¨è§£æçš„æ—¶å€™å¸Œæœ›å¯¹è±¡çš„ç»“æ„è¶Šç¨³å®šè¶Šå¥½ï¼Œå¦‚æœå¯¹è±¡ä¸€ç›´åœ¨å˜ï¼Œå¯ä¼˜åŒ–æ€§é™ä½ï¼Œproxyä¸éœ€è¦å¯¹åŸå§‹å¯¹è±¡åšå¤ªå¤šæ“ä½œã€‚</p><p>åŒæ—¶ï¼Œæœ‰äº†Proxyï¼Œå°±ä¸ç”¨è€ƒè™‘æ–°å¢å±æ€§çš„å“åº”è¡Œä¸ºäº†ï¼Œæ˜¯æ—¶å€™è¦è·Ÿ$setè¯´å£°å†è§äº†ã€‚</p><h2 id="æ€§èƒ½æ–¹é¢"><a class="header-anchor" href="#æ€§èƒ½æ–¹é¢">Â¶</a>æ€§èƒ½æ–¹é¢</h2><p>åŒå‘å“åº”åŸç†ç”±Object.definePropertyæ”¹ä¸ºåŸºäºES6çš„Proxyï¼Œä½¿å…¶é¢—ç²’åº¦æ›´å¤§ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œä¸”æ¶ˆé™¤äº†ä¹‹å‰å­˜åœ¨çš„è­¦å‘Šï¼›<br>é‡å†™äº† Vdom ï¼Œçªç ´äº† Vdom çš„æ€§èƒ½ç“¶é¢ˆ<br>è¿›è¡Œäº†æ¨¡æ¿ç¼–è¯‘çš„ä¼˜åŒ–<br>è¿›è¡Œäº†æ›´åŠ é«˜æ•ˆçš„ç»„ä»¶åˆå§‹åŒ–</p><h4 id="æ”¯æŒtree-shaking-æ›´åŠ è§£è€¦çš„ä»£ç ç»“æ„"><a class="header-anchor" href="#æ”¯æŒtree-shaking-æ›´åŠ è§£è€¦çš„ä»£ç ç»“æ„">Â¶</a>æ”¯æŒtree-shaking , æ›´åŠ è§£è€¦çš„ä»£ç ç»“æ„</h4><p>æ”¯æŒäº† tree-shaking ï¼ˆå‰ªæï¼‰ï¼šåƒä¿®å‰ªæ ‘å¶ä¸€æ ·æŠŠä¸éœ€è¦çš„ä¸œè¥¿ç»™ä¿®å‰ªæ‰ï¼Œä½¿ Vue3 çš„ä½“ç§¯æ›´å°ã€‚</p><p>éœ€è¦çš„æ¨¡å—æ‰ä¼šæ‰“å…¥åˆ°åŒ…é‡Œï¼Œä¼˜åŒ–åçš„ Vue3.0 çš„æ‰“åŒ…ä½“ç§¯åªæœ‰åŸæ¥çš„ä¸€åŠï¼ˆ13kbï¼‰ã€‚å“ªæ€•æŠŠæ‰€æœ‰çš„åŠŸèƒ½éƒ½å¼•å…¥è¿›æ¥ä¹Ÿåªæœ‰23kbï¼Œä¾ç„¶æ¯” Vue2.x æ›´å°ã€‚åƒ keep-alive ã€ transition ç”šè‡³ v-for ç­‰åŠŸèƒ½éƒ½å¯ä»¥æŒ‰éœ€å¼•å…¥ã€‚</p><h4 id="æ¨¡æ¿æ€§èƒ½æå‡"><a class="header-anchor" href="#æ¨¡æ¿æ€§èƒ½æå‡">Â¶</a>æ¨¡æ¿æ€§èƒ½æå‡</h4><p>åœ¨ä¹‹å‰çš„VDOMä¸­ï¼Œå¦‚æœmsgå€¼å‘ç”Ÿæ”¹å˜ï¼Œæ•´ä¸ªæ¨¡ç‰ˆä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½éœ€è¦é‡æ–°æ¸²æŸ“ã€‚ä½†åœ¨Vue3.0ä¸­ï¼Œåœ¨è¿™ä¸ªæ¨¡ç‰ˆç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨ä¼šåœ¨åŠ¨æ€æ ‡ç­¾æœ«å°¾åŠ ä¸Š /* Text*/ PatchFlagã€‚åªèƒ½å¸¦patchFlag çš„ Node æ‰è¢«è®¤ä¸ºæ˜¯åŠ¨æ€çš„å…ƒç´ ï¼Œä¼šè¢«è¿½è¸ªå±æ€§çš„ä¿®æ”¹ã€‚å¹¶ä¸” PatchFlag ä¼šæ ‡è¯†åŠ¨æ€çš„å±æ€§ç±»å‹æœ‰å“ªäº›ï¼Œæ¯”å¦‚è¿™é‡Œ çš„TEXT è¡¨ç¤ºåªæœ‰èŠ‚ç‚¹ä¸­çš„æ–‡å­—æ˜¯åŠ¨æ€çš„ã€‚<br>æ¯ä¸€ä¸ªBlockä¸­çš„èŠ‚ç‚¹ï¼Œå°±ç®—å¾ˆæ·±ï¼Œä¹Ÿæ˜¯ç›´æ¥è·ŸBlockä¸€å±‚ç»‘å®šçš„ï¼Œå¯ä»¥ç›´æ¥è·³è½¬åˆ°åŠ¨æ€èŠ‚ç‚¹è€Œä¸éœ€è¦é€ä¸ªé€å±‚éå†ã€‚<br>æ—¢æœ‰VDOMçš„çµæ´»æ€§ï¼Œåˆæœ‰æ€§èƒ½ä¿è¯ã€‚<br>vue3 ä½¿ç”¨ hoistStatic é™æ€èŠ‚ç‚¹æå‡<br>å½“ä½¿ç”¨hoistStaticæ—¶ï¼Œæ‰€æœ‰ é™æ€çš„èŠ‚ç‚¹éƒ½è¢«æå‡åˆ°renderæ–¹æ³•ä¹‹å¤–ã€‚è¿™æ„å‘³ç€ï¼Œä»–ä»¬åªä¼šåœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™è¢«åˆ›å»ºä¸€æ¬¡ï¼Œè€Œåéšç€æ¯æ¬¡çš„æ¸²æŸ“è¢«ä¸åœçš„å¤ç”¨ã€‚</p><h4 id="æ—¶é—´åˆ†ç‰‡"><a class="header-anchor" href="#æ—¶é—´åˆ†ç‰‡">Â¶</a>æ—¶é—´åˆ†ç‰‡</h4><p>åœ¨åŠ¨æ€èŠ‚ç‚¹å’Œæ•°æ®çš„é‡éƒ½å¾ˆå¤§æ—¶ï¼Œé‚£ä¹ˆåœ¨æ•°æ®æ›´æ–°æ—¶ï¼Œjsçº¿ç¨‹å°±ä¼šç”¨å¾ˆé•¿çš„æ—¶é—´æ¥æ‰§è¡Œvdomçš„ç›¸å…³è®¡ç®—ï¼Œå¦‚æœè¶…è¿‡äº†16msï¼Œé€ æˆäº¤äº’æˆ–åŠ¨ç”»ç­‰ç­‰å¡é¡¿ç°è±¡ã€‚è€Œæ—¶é—´åˆ†ç‰‡å°±æ˜¯æŠŠvdomçš„å¤§é‡è®¡ç®—åˆ†æˆå¤šä¸ªå°ä»»åŠ¡ï¼Œä¿è¯æ¯ä¸ªå°ä»»åŠ¡åœ¨16mså†…æ‰§è¡Œå®Œï¼Œä»è€Œä¸ä¼šé˜»å¡ç”¨æˆ·äº¤äº’ï¼Œé¿å…å¡é¡¿ç°è±¡ã€‚<br>ç„¶é¹…ï¼Œæ­¤åŠŸèƒ½è¿˜æœªåŒ…å«åœ¨vue3çš„æ›´æ–°ä¸­ã€‚</p><p>å‚è€ƒï¼š<br><a href="https://zhuanlan.zhihu.com/p/147022323">https://zhuanlan.zhihu.com/p/147022323</a><br><a href="https://www.jianshu.com/p/1d2846f2a855">https://www.jianshu.com/p/1d2846f2a855</a><br><a href="https://v3.vuejs.org/">https://v3.vuejs.org/</a><br><a href="https://segmentfault.com/a/1190000024580501">https://segmentfault.com/a/1190000024580501</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼€å¯ç½‘é¡µ3Dæ•ˆæœä¹‹æ—…</title>
      <link href="/posts/3d46f50c/"/>
      <url>/posts/3d46f50c/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸Šå¤æ—¶ä»£ï¼Œå½“<code>html</code>è¯­è¨€å’Œ<code>http</code>åè®®åˆšè¢«å‘æ˜å‡ºæ¥æ—¶ï¼Œè¿™äº›ä¸“å®¶ä»¬ä¹Ÿè®¸æ€ä¹ˆä¹Ÿæƒ³ä¸åˆ°ï¼Œå½“åˆå‘æ˜æ¥å…±äº«æ–‡æœ¬çš„æŠ€æœ¯å¦‚ä»Šç»Ÿæ²»äº†å‡ ä¹æ•´ä¸ªäº’è”ç½‘è¡Œä¸šã€‚å½“ç¬¬ä¸€ä¸ªç½‘é¡µè¢«æ‰“å¼€æ—¶ï¼Œä¸Šé¢åªæœ‰ç®€é™‹çš„ä¸€ä¸ªè¡¨å•ï¼Œç”šè‡³åšä¸€ä¸ªç®€å•çš„è¿‡æ¸¡å˜è‰²æ•ˆæœï¼Œéƒ½è¦å€Ÿç”¨<code>java Applet</code>ï¼Œåæ¥è¦å€ŸåŠ©<code>javascript</code>ã€‚çŸ­çŸ­åå‡ å¹´è¿‡å»ï¼Œç°åœ¨æœ‰äº†<code>css3</code>ï¼Œä½ åªéœ€å®šä¹‰ç®€å•çš„<code>transition</code>,å°±å¯ä»¥å®ç°å„ç§ç¥å¥‡çš„è¿‡æ¸¡æ•ˆæœã€‚</p></blockquote><p>æœ¬æ–‡ä¸æ˜¯ä»‹ç»<code>css3</code>åŠ¨ç”»ä»¥åŠç”¨æ³•çš„ï¼Œå› æ­¤éœ€è¦è¯»è€…é¢„å…ˆäº†<code>transition</code>,<code>transform</code>ç­‰å±æ€§ã€‚</p><p>###ã€€å›é¡¾ä¸‹<code>CSS3</code>çš„åŸºç¡€å±æ€§</p><h4 id="1-transition"><a class="header-anchor" href="#1-transition">Â¶</a>1.<code>transition</code></h4><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/transition" target="_blank" rel="noopener">Transition</a>æ˜¯è¢«ç”¨åˆ°æœ€å¤šçš„ä¹Ÿæ˜¯æœ€ç®€å•çš„<code>CSS3</code>åŠ¨ç”»ç±»å‹ï¼Œå¦‚æœä½ æƒ³å®ç°é¼ æ ‡åˆ’è¿‡æ›´æ”¹èƒŒæ™¯è‰²çš„åŠŸèƒ½ï¼Œç”¨<code>transition</code>æ˜¯æœ€ç®€å•çš„æ–¹å¼ã€‚</p><pre><code class="language-html">&lt;button&gt;ä¼šå˜è‰²çš„æŒ‰é’®&lt;/button&gt;</code></pre><pre><code class="language-css">button {  transition: all 0.8s ease;  background-color: red;}button:hover {  background-color: #eeeeee;}</code></pre><p>ä¸‹é¢æ˜¯æ•ˆæœï¼š</p><p><img src="https://raw.githubusercontent.com/zzz1220/imageUrl/master/img/1.gif" alt="gif"></p><p><strong>transition</strong> <a href="https://developer.mozilla.org/en/CSS" target="_blank" rel="noopener">CSS</a> å±æ€§æ˜¯ <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/transition-property" target="_blank" rel="noopener"><code>transition-property</code></a>ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/transition-duration" target="_blank" rel="noopener"><code>transition-duration</code></a>ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/transition-timing-function" target="_blank" rel="noopener"><code>transition-timing-function</code></a> å’Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/transition-delay" target="_blank" rel="noopener"><code>transition-delay</code></a> çš„ä¸€ä¸ª<a href="https://developer.mozilla.org/en-US/docs/CSS/Shorthand_properties" target="_blank" rel="noopener">ç®€å†™å±æ€§</a>ã€‚åˆ†åˆ«æ˜¯å¯å˜æ¢å±æ€§ï¼ŒæŒç»­æ—¶é—´ï¼Œå˜æ¢çš„è¿‡åº¦å‡½æ•°(å°±æ˜¯å˜æ¢çš„åŠ é€Ÿåº¦æ›²çº¿)ï¼Œæ•ˆæœç”Ÿæ•ˆçš„å»¶æ—¶ã€‚</p><p>å…³äº<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/transition" target="_blank" rel="noopener">Transition</a>çš„æ›´å¤š<code>API</code>ï¼Œè¯·æŸ¥çœ‹<code>MDN</code>çš„æ–‡æ¡£ã€‚</p><h4 id="2-transform"><a class="header-anchor" href="#2-transform">Â¶</a>2.<code>transform</code></h4><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform" target="_blank" rel="noopener">transform</a>æ˜¯æ‰§è¡Œå…ƒç´ æ—‹è½¬ï¼Œç¼©æ”¾ï¼Œä½ç§»ï¼Œå€¾æ–œçš„<code>css</code>å±æ€§ï¼Œå®ƒæ˜¯é€šè¿‡ä¿®æ”¹è§†è§‰ä¸Šçš„åæ ‡ç©ºé—´å®ç°çš„ã€‚</p><p>âš ï¸ åªèƒ½è½¬æ¢ç›’å­æ¨¡å‹å®šä½çš„å…ƒç´ ã€‚</p><ul><li>æ—‹è½¬<br><code>rotate(a)</code><br>a æ˜¯ä¸€ç§<angle>ï¼Œè¡¨ç¤ºæ—‹è½¬çš„è§’åº¦ï¼Œæ¯”å¦‚<code>30deg</code>ã€‚ æ­£è§’åº¦è¡¨ç¤ºäº†é¡ºæ—¶é’ˆçš„æ—‹è½¬ï¼Œè´Ÿè§’åº¦è¡¨ç¤ºé€†æ—¶é’ˆçš„æ—‹è½¬ã€‚</angle></li></ul><pre><code class="language-html">&lt;div&gt;æ­£å¸¸&lt;/div&gt;&lt;div class=&quot;rotated&quot;&gt;æ—‹è½¬45åº¦&lt;/div&gt;&lt;div class=&quot;rotated2&quot;&gt;æ—‹è½¬90åº¦&lt;/div&gt;</code></pre><pre><code class="language-css">div {  width: 80px;  height: 80px;  background-color: skyblue;}.rotated {  transform: rotate(45deg);  background-color: pink;}.rotated2 {  transform: rotate(90deg);  background-color: blue;  color: #ffffff;}</code></pre><p><img src="https://raw.githubusercontent.com/zzz1220/imageUrl/master//img/2.gif" alt="gif"></p><ul><li>ç¼©æ”¾<br><code>scale(a,b,c)</code><br><em>å•ä¸€æ•°å€¼</em><br>å•ä¸€çš„æ•°å€¼å³æŒ‡å®šäº†ä¸€ä¸ªç¼©æ”¾ç³»æ•°ï¼ŒåŒæ—¶ä½œç”¨äº X è½´å’Œ Y è½´è®©è¯¥å…ƒç´ è¿›è¡Œç¼©æ”¾ï¼Œç›¸å½“äºæŒ‡å®šäº†å•ä¸ªå€¼çš„ scale()(2D ç¼©æ”¾)å‡½æ•°ã€‚<br><em>ä¸¤ä¸ªé•¿åº¦/ç™¾åˆ†æ¯”å€¼</em><br>ä¸¤ä¸ªæ•°å€¼å³åˆ†åˆ«æŒ‡å®šäº† 2D æ¯”ä¾‹çš„ X è½´å’Œ Y è½´çš„ç¼©æ”¾ç³»æ•°ï¼Œç›¸å½“äºæŒ‡å®šäº†ä¸¤ä¸ªå€¼çš„ scale()ï¼ˆ2D ç¼©æ”¾ï¼‰å‡½æ•°ã€‚<br><em>ä¸‰ä¸ªé•¿åº¦/ç™¾åˆ†æ¯”å€¼</em><br>ä¸‰ä¸ªæ•°å€¼å³åˆ†åˆ«æŒ‡å®šäº† 3D æ¯”ä¾‹çš„ X è½´ã€Y è½´å’Œ Z è½´çš„ç¼©æ”¾ç³»æ•°. ç›¸å½“äºä¸€ä¸ª scale3d()å‡½æ•°ã€‚<br>none<br>æŒ‡å®šä¸è¿›è¡Œç¼©æ”¾ã€‚</li></ul><pre><code class="language-html">&lt;div&gt;æ­£å¸¸&lt;/div&gt;&lt;div class=&quot;scale&quot;&gt;å¤§2å€&lt;/div&gt;&lt;div class=&quot;scale2&quot;&gt;æ°´å¹³1.5å€ï¼Œå‚ç›´2å€&lt;/div&gt;</code></pre><pre><code class="language-css">div {  width: 80px;  height: 80px;  background-color: skyblue;  text-align: center;  transform-origin: 0 0;}.scale {  transform: scale(2);  background-color: pink;}.scale2 {  transform: scale(1.5, 2);  background-color: blue;  color: #ffffff;}</code></pre><p><img src="https://raw.githubusercontent.com/zzz1220/imageUrl/master//img/3.gif" alt="gif"></p><ul><li>ä½ç§»<br><code>translate(x,y)</code><br>x,y åˆ†åˆ«æ˜¯ x,y è½´ç§»åŠ¨çš„è·ç¦»ã€‚</li></ul><pre><code class="language-html">&lt;div&gt;æ­£å¸¸&lt;/div&gt;&lt;div class=&quot;translate&quot;&gt;å³ï¼Œä¸‹ç§»30px&lt;/div&gt;</code></pre><pre><code class="language-css">div {  width: 80px;  height: 80px;  background-color: skyblue;  text-align: center;  transform-origin: 0 0;}.translate {  transform: translate(30px, 30px);  background-color: pink;}</code></pre><p><img src="https://raw.githubusercontent.com/zzz1220/imageUrl/master//img/4.gif" alt="gif"></p><ul><li>å€¾æ–œ</li></ul><p><code>skew(x-angle,y-angle)</code><br>å®šä¹‰æ²¿ç€ X å’Œ Y è½´çš„ 2D å€¾æ–œè½¬æ¢ã€‚</p><pre><code class="language-html">&lt;div&gt;Normal&lt;/div&gt;&lt;div class=&quot;skewed&quot;&gt;Skewed&lt;/div&gt;</code></pre><pre><code class="language-css">div {  width: 80px;  height: 80px;  background-color: skyblue;}.skewed {  transform: skew(10deg); /* Equal to skewX(10deg) */  background-color: pink;}</code></pre><p><img src="https://raw.githubusercontent.com/zzz1220/imageUrl/master//img/5.gif" alt="gif"></p><h4 id="3-animation"><a class="header-anchor" href="#3-animation">Â¶</a>3.<code>animation</code></h4><p>æˆ‘ä»¬å¯ä»¥æŠŠ<code>transition</code>å’Œ<code>transform</code> ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ï¼Œå°±å®ç°åŠ¨æ„Ÿåè¶³çš„ html é¡µé¢ã€‚<br>ä½†æ˜¯ï¼Œ<code>transition</code>åªèƒ½å®ç°å¼€å§‹å’Œç»“æŸçš„çŠ¶æ€ï¼Œå¹¶ä¸”åªèƒ½â€œåŠ¨ä¸€æ¬¡â€ã€‚</p><p>è¿˜æœ‰æ›´åŠ å¼ºå¤§çš„<code>animation</code>å±æ€§ï¼Œå¯ä»¥åˆ¶ä½œä¸é—´æ–­ï¼Œå­˜åœ¨ä¸­é—´çŠ¶æ€çš„åŠ¨ç”»ã€‚</p><p>ğŸ’¥ è¿™é‡Œç©¿æ’ä»‹ç»ä¸€ä¸ª<code>animation</code>åŠ¨ç”»åº“ï¼Œ<a href="https://daneden.github.io/animate.css/" target="_blank" rel="noopener">https://daneden.github.io/animate.css/</a></p><p><code>animate.css</code>é‡Œé¢å®ç°äº†å¾ˆå¤šå¸¸è§çš„æ·¡å…¥æ·¡å‡ºï¼Œæ–¹å‘ç§»åŠ¨çš„åŠ¨ç”»ï¼Œå¯ä»¥çœ‹ä¸‹æºç ï¼Œç„¶åè‡ªå·±å®ç°åŠ¨ç”»çš„æ—¶å€™å°±æœ‰å¤´ç»ªäº†ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ fadeout æ•ˆæœçš„æºä»£ç </p><pre><code class="language-css">@keyframes fadeOutDown {  from {    opacity: 1;  }  to {    opacity: 0;    transform: translate3d(0, 100%, 0);  }}</code></pre><p>ç‚¹å‡»<code>animate.css</code>å®˜ç½‘å¯ä»¥æŸ¥çœ‹æ›´å¤šçš„æ•ˆæœå“¦ã€‚<img src="https://raw.githubusercontent.com/zzz1220/imageUrl/master/img/6.gif" alt="gif"></p><p>ç†è®ºä¸Šï¼Œä»»ä½•å•ç‹¬çš„<code>css</code>å±æ€§éƒ½å¯ä»¥æ‹¿æ¥åšåŠ¨ç”»ï¼Œä½†æ˜¯æ³¨æ„ä¸€ç‚¹ğŸ™‰ä»æ— åˆ°æœ‰ï¼Œä¸è¦ç”¨<code>display:none</code>,åº”è¯¥ç”¨<code>opacity</code>å±æ€§ã€‚</p><p>ç„¶åæ˜¯<code>animate</code>çš„å±æ€§ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS" target="_blank" rel="noopener">CSS</a> <strong>animation</strong> å±æ€§æ˜¯ <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-name" target="_blank" rel="noopener"><code>animation-name</code></a>ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-duration" target="_blank" rel="noopener"><code>animation-duration</code></a>, <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-timing-function" target="_blank" rel="noopener"><code>animation-timing-function</code></a>ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-delay" target="_blank" rel="noopener"><code>animation-delay</code></a>ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-iteration-count" target="_blank" rel="noopener"><code>animation-iteration-count</code></a>ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-direction" target="_blank" rel="noopener"><code>animation-direction</code></a>ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-fill-mode" target="_blank" rel="noopener"><code>animation-fill-mode</code></a> å’Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation-play-state" target="_blank" rel="noopener"><code>animation-play-state</code></a> å±æ€§çš„ä¸€ä¸ªç®€å†™å±æ€§å½¢å¼ã€‚</p><p>è¿™é‡Œä¸ä¸€ä¸€ä»‹ç»äº†ã€‚</p><h1></h1><h3 id="è¿›å…¥ä¸»é¢˜-transformçš„3dæ•ˆæœ"><a class="header-anchor" href="#è¿›å…¥ä¸»é¢˜-transformçš„3dæ•ˆæœ">Â¶</a>è¿›å…¥ä¸»é¢˜â€“<code>transform</code>çš„<code>3D</code>æ•ˆæœ</h3><p>â˜‘ï¸ ç½‘é¡µçš„<code>3D</code>åæ ‡ç³»ï¼š</p><p><img src="https://raw.githubusercontent.com/zzz1220/imageUrl/master//img/1328957-20190425135458622-1593901679.jpg" alt></p><p>å¦‚ä¸Šå›¾ï¼Œç½‘æ ¼å°±æ˜¯ç½‘é¡µçš„åæ ‡ç³»ã€‚æœ‰äº†è¿™å¼ å›¾ï¼Œå°±å¯ä»¥å¾ˆè½»æ¾çš„æƒ³åˆ°å¦‚ä½•è¿ç”¨<code>css</code>çš„å±æ€§å¾—åˆ°æƒ³è¦çš„æ•ˆæœã€‚</p><h4 id="1-å¦‚ä½•ä½¿ç”¨3d"><a class="header-anchor" href="#1-å¦‚ä½•ä½¿ç”¨3d">Â¶</a>1.å¦‚ä½•ä½¿ç”¨<code>3d</code></h4><p><code>transform</code>çš„<code>translate</code>,<code>scale</code>,<code>rotate</code>éƒ½æœ‰<code>3D</code>æ•ˆæœã€‚</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>translate3d(<em>x</em>,<em>y</em>,<em>z</em>)</td><td>å®šä¹‰ 3D è½¬åŒ–ã€‚</td></tr><tr><td>translateX(<em>x</em>)</td><td>å®šä¹‰ 3D è½¬åŒ–ï¼Œä»…ä½¿ç”¨ç”¨äº X è½´çš„å€¼ã€‚</td></tr><tr><td>translateY(<em>y</em>)</td><td>å®šä¹‰ 3D è½¬åŒ–ï¼Œä»…ä½¿ç”¨ç”¨äº Y è½´çš„å€¼ã€‚</td></tr><tr><td>translateZ(<em>z</em>)</td><td>å®šä¹‰ 3D è½¬åŒ–ï¼Œä»…ä½¿ç”¨ç”¨äº Z è½´çš„å€¼ã€‚</td></tr></tbody></table><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>scale3d(<em>x</em>,<em>y</em>,<em>z</em>)</td><td>å®šä¹‰ 3D ç¼©æ”¾è½¬æ¢ã€‚</td></tr><tr><td>scaleX(<em>x</em>)</td><td>å®šä¹‰ 3D ç¼©æ”¾è½¬æ¢ï¼Œé€šè¿‡ç»™å®šä¸€ä¸ª X è½´çš„å€¼ã€‚</td></tr><tr><td>scaleY(<em>y</em>)</td><td>å®šä¹‰ 3D ç¼©æ”¾è½¬æ¢ï¼Œé€šè¿‡ç»™å®šä¸€ä¸ª Y è½´çš„å€¼ã€‚</td></tr><tr><td>scaleZ(<em>z</em>)</td><td>å®šä¹‰ 3D ç¼©æ”¾è½¬æ¢ï¼Œé€šè¿‡ç»™å®šä¸€ä¸ª Z è½´çš„å€¼ã€‚</td></tr></tbody></table><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>rotate3d(<em>x</em>,<em>y</em>,<em>z</em>,<em>angle</em>)</td><td>å®šä¹‰ 3D æ—‹è½¬ã€‚</td></tr><tr><td>rotateX(<em>angle</em>)</td><td>å®šä¹‰æ²¿ X è½´çš„ 3D æ—‹è½¬ã€‚</td></tr><tr><td>rotateY(<em>angle</em>)</td><td>å®šä¹‰æ²¿ Y è½´çš„ 3D æ—‹è½¬ã€‚</td></tr><tr><td>rotateZ(<em>angle</em>)</td><td>å®šä¹‰æ²¿ Z è½´çš„ 3D æ—‹è½¬ã€‚</td></tr></tbody></table><p>ä¹Ÿå¯ä»¥ç”¨</p><table><thead><tr><th>å±æ€§</th><th>å®šä¹‰</th></tr></thead><tbody><tr><td>matrix3d(<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>, <em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>)</td><td>å®šä¹‰ 3D è½¬æ¢ï¼Œä½¿ç”¨ 16 ä¸ªå€¼çš„ 4x4 çŸ©é˜µã€‚</td></tr></tbody></table><p>ä¸‹é¢æ˜¯ 3D å˜æ¢çš„ä¾‹å­</p><iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/zzz1220/se45nykp/9//embedded/html,css,result/light" frameborder="0" allowfullscreen></iframe><p>ä¸Šé¢å¯ä»¥çœ‹å‡ºæ¥ï¼Œ<code>div</code>è„±ç¦»äº†å¹³é¢ï¼Œä½†æ˜¯æ•ˆæœå´ä»¿ä½›è¿˜æ˜¯å¹³é¢çš„ï¼Œå› ä¸ºæˆ‘ä»¬ç¼ºå°‘å®šä¹‰äº†ä¸€ä¸ªå…³é”®çš„å±æ€§ï¼š</p><p>ğŸ·<code>persspective</code>ç»™å…ƒç´ åŠ ä¸Š<code>3D</code>é€è§†(è¿‘å¤§è¿œå°)çš„æ•ˆæœã€‚</p><pre><code class="language-css">transform: perspective(600px); // åŠ åœ¨å­å…ƒç´ ä¸Šï¼Œç»™å•ä¸ªå…ƒç´ æ·»åŠ é€è§†/**æˆ–è€…**/perspective: 600px; // åŠ åœ¨çˆ¶å…ƒç´ ä¸Šï¼Œæ‰€æœ‰çš„å­å…ƒç´ å…±äº«ä¸€ä¸ª3Dç©ºé—´</code></pre><iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/zzz1220/oy0rwgh7/32//embedded/html,css,result/light" frameborder="0" allowfullscreen></iframe><p>çœ‹ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œç»™å•ä¸ªå…ƒç´ æ·»åŠ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰è‡ªå·±çš„é€è§†ç©ºé—´ã€‚</p><p>ğŸ·<code>perspective-orgin</code>é»˜è®¤çš„å˜æ¢ç‚¹éƒ½æ˜¯å…ƒç´ çš„ä¸­å¿ƒç‚¹ï¼Œå¦‚æœä½ æƒ³ä»¥å…¶ä»–çš„ä½ç½®ä¸ºå˜æ¢ç‚¹ï¼Œé‚£å°±å¯ä»¥ç”¨è¿™ä¸ªå±æ€§æ¥åšè°ƒæ•´ã€‚</p><p>å°±åƒ<code>transform-origin</code>åœ¨ 2D å˜æ¢é‡Œé¢è®¾ç½®å˜æ¢ä¸­å¿ƒç‚¹ä¸€æ ·ã€‚ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯å…ƒç´ çš„åº•éƒ¨ä½ç½®ã€‚</p><p>ğŸ·<code>transform-style</code>è¿™ä¸ªå‚æ•°ç”¨æ¥å…±äº«çˆ¶å…ƒç´ çš„ 3D ç©ºé—´ã€‚</p><table><thead><tr><th style="text-align:left">å€¼</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">flat</td><td style="text-align:left">è¡¨ç¤ºæ‰€æœ‰å­å…ƒç´ åœ¨ 2D å¹³é¢å‘ˆç°ã€‚</td></tr><tr><td style="text-align:left">preserve-3d</td><td style="text-align:left">è¡¨ç¤ºæ‰€æœ‰å­å…ƒç´ åœ¨ 3D ç©ºé—´ä¸­å‘ˆç°ã€‚</td></tr></tbody></table><p>ğŸ·<code>backface-visibility</code>å¯ç”¨äºéšè—å†…å®¹çš„èƒŒé¢ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒèƒŒé¢å¯è§ï¼Œè¿™æ„å‘³ç€å³ä½¿åœ¨ç¿»è½¬åï¼Œå˜æ¢çš„å†…å®¹ä»ç„¶å¯è§ã€‚ä½†å½“ backface-visibility è®¾ç½®ä¸º hidden æ—¶ï¼Œæ—‹è½¬åå†…å®¹å°†éšè—ï¼Œå› ä¸ºæ—‹è½¬åæ­£é¢å°†ä¸å†å¯è§ã€‚</p><h4 id="2-3då’Œç¡¬ä»¶åŠ é€Ÿ"><a class="header-anchor" href="#2-3då’Œç¡¬ä»¶åŠ é€Ÿ">Â¶</a>2.<code>3d</code>å’Œç¡¬ä»¶åŠ é€Ÿ</h4><p>åŠ¨ç”»å¡é¡¿æ˜¯åœ¨ç§»åŠ¨ web å¼€å‘æ—¶ç»å¸¸é‡åˆ°çš„é—®é¢˜ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜ä¸€èˆ¬ä¼šç”¨åˆ°<strong>css3 ç¡¬ä»¶åŠ é€Ÿ</strong>ã€‚</p><p>â”ä»€ä¹ˆæ˜¯ç¡¬ä»¶åŠ é€Ÿï¼Ÿ</p><p>DOM æ ‘å’Œ CSS ç»“åˆåå½¢æˆæ¸²æŸ“æ ‘ã€‚æ¸²æŸ“æ ‘ä¸­åŒ…å«äº†å¤§é‡çš„æ¸²æŸ“å…ƒç´ ï¼Œæ¯ä¸€ä¸ªæ¸²æŸ“å…ƒç´ ä¼šè¢«åˆ†åˆ°ä¸€ä¸ªå›¾å±‚ä¸­ï¼Œæ¯ä¸ªå›¾å±‚åˆä¼šè¢«åŠ è½½åˆ° GPU å½¢æˆæ¸²æŸ“çº¹ç†ã€‚GPU ä¸­ transform æ˜¯ä¸ä¼šè§¦å‘ repaint çš„ï¼Œè¿™ä¸€ç‚¹éå¸¸ç±»ä¼¼ 3D ç»˜å›¾åŠŸèƒ½ï¼Œæœ€ç»ˆè¿™äº›ä½¿ç”¨ transform çš„å›¾å±‚éƒ½ä¼šç”±[ç‹¬ç«‹çš„åˆæˆå™¨è¿›ç¨‹è¿›è¡Œå¤„ç†]ã€‚<a href="https://www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome" target="_blank" rel="noopener">https://www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome</a></p><p>å› æ­¤ï¼Œæœ€ç®€å•çš„å¼€å¯ç¡¬ä»¶åŠ é€Ÿçš„æ–¹æ³•å°±æ˜¯è®¾ç½®<code>translateZ(0)</code>ã€‚</p><p>ä½†æ˜¯ï¼Œå¼€å¯ç¡¬ä»¶åŠ é€Ÿåï¼Œä¼šåŠ å¿«ç”¨ç”µï¼Œå¹¶ä¸”ä¸åˆé€‚çš„ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿï¼Œä¼šé€ æˆé¡µé¢å¡é¡¿ã€‚</p><p>å‚è€ƒï¼š<a href="https://div.io/topic/1348" target="_blank" rel="noopener">https://div.io/topic/1348</a> çœ‹ä¸‹<code>index</code>å±æ€§é€ æˆä¸è¯¥åœ¨å¤åˆå±‚ï¼ˆcomposited layerï¼‰ä¸­çš„å…ƒç´ é€ æˆé¡µé¢å¡é¡¿çš„ä¾‹å­ã€‚</p><h4 id="3-3dåŠ¨ç”»çš„ä¸€ä¸ªå®ä¾‹"><a class="header-anchor" href="#3-3dåŠ¨ç”»çš„ä¸€ä¸ªå®ä¾‹">Â¶</a>3. <code>3d</code>åŠ¨ç”»çš„ä¸€ä¸ªå®ä¾‹</h4><iframe scrolling="no" width="100%" height="300" src="//jsfiddle.net/zzz1220/tj1of0m5//embedded/html,css,result/light" frameborder="0" allowfullscreen></iframe><p>åˆ©ç”¨<code>translate</code> å’Œ <code>rotate</code> åˆ¶ä½œçš„ä¸€ä¸ªéª°å­ã€‚</p><p>ä»£ç æ¥æºï¼š</p><p><a href="https://www.cnblogs.com/zhangnan35/p/10709876.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhangnan35/p/10709876.html</a></p><p>å‚è€ƒï¼š</p><p><a href="https://www.jianshu.com/p/f8b1d6e598db" target="_blank" rel="noopener">https://www.jianshu.com/p/f8b1d6e598db</a></p><p><a href="http://beiyuu.com/css3-animation" target="_blank" rel="noopener">http://beiyuu.com/css3-animation</a></p><p><a href="https://www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome" target="_blank" rel="noopener">https://www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è£…é¥°å™¨çš„ç®€å•å®ç°ï¼ˆä¸‹ï¼‰</title>
      <link href="/posts/72b1723d/"/>
      <url>/posts/72b1723d/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸Šæ–‡ä»‹ç»äº†è£…é¥°æ¨¡å¼ï¼Œè£…é¥°å™¨è¯­æ³•ï¼Œä»Šå¤©ç»§ç»­è¯´ä¸€ä¸‹æ€ä¹ˆç”¨javascriptå®ç°è‡ªå®šä¹‰è£…é¥°å™¨ã€‚</p></blockquote><h3 id="å¯ç”¨è£…é¥°å™¨è¯­æ³•"><a class="header-anchor" href="#å¯ç”¨è£…é¥°å™¨è¯­æ³•">Â¶</a>å¯ç”¨è£…é¥°å™¨è¯­æ³•</h3><p>ç›®å‰<code>decorator</code>è¯­æ³•åªæ˜¯é¢˜æ¡ˆï¼Œæƒ³è¦ä½¿ç”¨è£…é¥°å™¨ï¼Œéœ€è¦å®‰è£…<code>babel</code>å’Œ<code>webpack</code>å¹¶ç»“åˆ<code>babel/plugin-proposal-decorators</code> æ’ä»¶ã€‚</p><p>å…³äºå¦‚ä½•é…ç½®è¯·å‚è€ƒ<code>babel</code>æ’ä»¶çš„é…ç½®æ–‡æ¡£ã€‚</p><p>æˆ–è€…ä½ ä¹Ÿå¯ä»¥ç›´æ¥åˆ° <a href="https://babeljs.io/repl/">https://babeljs.io/repl/</a> è¿™ä¸ªåœ°å€ç¼–å†™ä»£ç ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªåœ¨çº¿çš„<code>repl</code>ç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥è¿è¡Œ<code>es6</code>ä»£ç ,è®°å¾—å‹¾é€‰å·¦ä¾§çš„<code>Experimental</code>æ¥å¯ç”¨è£…é¥°å™¨è¯­æ³•ã€‚</p><p>ğŸ”‘ <code>es2015</code>,<code>es2016</code>,<code>es2017</code>å’Œ<code>es6</code>ä¹‹é—´çš„å…³ç³»ï¼š</p><blockquote><p>ES6 æ—¢æ˜¯ä¸€ä¸ªå†å²åè¯ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ³›æŒ‡ï¼Œå«ä¹‰æ˜¯ 5.1 ç‰ˆä»¥åçš„ JavaScript çš„ä¸‹ä¸€ä»£æ ‡å‡†ï¼Œæ¶µç›–äº† ES2015ã€ES2016ã€ES2017 ç­‰ç­‰ï¼Œè€Œ ES2015 åˆ™æ˜¯æ­£å¼åç§°ï¼Œç‰¹æŒ‡è¯¥å¹´å‘å¸ƒçš„æ­£å¼ç‰ˆæœ¬çš„è¯­è¨€æ ‡å‡†ã€‚</p></blockquote><h3 id="ç±»è£…é¥°å™¨ï¼Œæ–¹æ³•è£…é¥°å™¨å’Œå±æ€§è£…é¥°å™¨"><a class="header-anchor" href="#ç±»è£…é¥°å™¨ï¼Œæ–¹æ³•è£…é¥°å™¨å’Œå±æ€§è£…é¥°å™¨">Â¶</a>ç±»è£…é¥°å™¨ï¼Œæ–¹æ³•è£…é¥°å™¨å’Œå±æ€§è£…é¥°å™¨</h3><h5 id="ç±»è£…é¥°å™¨"><a class="header-anchor" href="#ç±»è£…é¥°å™¨">Â¶</a>ç±»è£…é¥°å™¨</h5><p>ç±»è£…é¥°å™¨å°±æ˜¯ç”¨æ¥ä¿®æ”¹ç±»çš„è¡Œä¸ºï¼Œå®ƒæ ‡æ³¨åœ¨ç±»å®šä¹‰çš„ä¸Šæ–¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@testable</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyTestableClass</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">testable</span>(<span class="params">target</span>) &#123; <span class="comment">// target å°±æ˜¯è¢«è£…é¥°çš„ç±»</span></span><br><span class="line">  target.<span class="property">isTestable</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MyTestableClass</span>.<span class="property">isTestable</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç±»è£…é¥°å™¨ï¼Œå®ƒç»™è¢«è£…é¥°çš„ç±»æ·»åŠ äº†ä¸€ä¸ª<code>isTestable</code>çš„é™æ€å±æ€§ã€‚</p><p>ä¸Šé¢æ˜¯ä¸ªç®€å•çš„ä¾‹å­ï¼Œä¸‹é¢æ¥ä¸ªç¨å¾®å¤æ‚çš„ã€‚<br>æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ç»™è£…é¥°å™¨ä¼ å‚æ•°ï¼Œè¦æ€ä¹ˆåšï¼Ÿç†Ÿæ‚‰é«˜é˜¶å‡½æ•°çš„åŒå­¦ä¸€å®šä¼šç«‹åˆ»æƒ³åˆ°ï¼Œå‡½æ•°å¯ä»¥è¿”å›å‡½æ•°ï¼Œåªè¦åœ¨è£…é¥°å™¨å‡½æ•°å¤–é¢å†åŠ ä¸€å±‚å‡½æ•°å°±å¯ä»¥äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">testable</span>(<span class="params">isTrue</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">target</span>) &#123;</span><br><span class="line">target.<span class="property">isTestable</span> = isTrue</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="title function_">testable</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyTestableClass</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">MyTestableClass</span>.<span class="property">isTestable</span>  <span class="comment">// false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯ç»™ç±»æ·»åŠ é™æ€å±æ€§ï¼Œå¦‚æœæƒ³ç»™å®ä¾‹æ·»åŠ å±æ€§ï¼Œéœ€è¦æŠŠå±æ€§æ·»åŠ åœ¨<code>prototype</code>ä¸Š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">testable</span>(<span class="params">isTrue</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">target</span>) &#123;</span><br><span class="line">target.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">isTestable</span> = isTrue</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ğŸ”‘ ä¿®é¥°å™¨å¯¹ç±»çš„è¡Œä¸ºçš„æ”¹å˜ï¼Œæ˜¯ä»£ç ç¼–è¯‘æ—¶å‘ç”Ÿçš„ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶ã€‚è¿™æ„å‘³ç€ï¼Œä¿®é¥°å™¨èƒ½åœ¨ç¼–è¯‘é˜¶æ®µè¿è¡Œä»£ç ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¿®é¥°å™¨æœ¬è´¨å°±æ˜¯ç¼–è¯‘æ—¶æ‰§è¡Œçš„å‡½æ•°ã€‚</p><p>æ¥ä¸‹æ¥æ¥ä¸ªç¨å¾®å¤æ‚ä¸€ç‚¹çš„ä¾‹å­ï¼Œç”¨è£…é¥°å™¨å®ç°<code>mixin</code>,<br>ğŸ”‘ mixinæ¨¡å¼å°±æ˜¯ä¸€äº›æä¾›èƒ½å¤Ÿè¢«ä¸€ä¸ªæˆ–è€…ä¸€ç»„å­ç±»ç®€å•ç»§æ‰¿åŠŸèƒ½çš„ç±»,æ„åœ¨é‡ç”¨å…¶åŠŸèƒ½ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">mixin</span>(<span class="params">foo</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">target</span>)&#123;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(target.<span class="property"><span class="keyword">prototype</span></span>,foo) <span class="comment">// Onject.assign æ˜¯es6é‡Œé¢çš„Objectçš„æ–°å‡½æ•°ï¼Œç”¨æ¥æŠŠç¬¬äºŒä¸ªå‚æ•°çš„å±æ€§åˆå¹¶åˆ°ç¬¬ä¸€ä¸ªå‚æ•°ä¸Š å› ä¸ºè¿™é‡Œä¼ å…¥çš„æ˜¯ç±»ï¼ˆä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°ï¼‰ï¼Œæƒ³è¦åœ¨å®ä¾‹ä¸Šæ·»åŠ å±æ€§ï¼Œéœ€è¦åˆå¹¶åˆ°åŸå‹å¯¹è±¡ä¸Šã€‚</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Foo</span> = &#123;</span><br><span class="line"><span class="title function_">sayHi</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hi&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="title function_">mixin</span>(<span class="title class_">Foo</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Target</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Target</span>().<span class="title function_">sayHi</span>()</span><br><span class="line"><span class="comment">// Hi</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ‰äº†è£…é¥°å™¨ï¼Œä¹‹å‰é‚£äº›çƒ¦äººçš„æ ·æ¿å‡½æ•°å°±å¯ä»¥ç”¨è£…é¥°å™¨ä»£æ›¿äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨<code>redux</code>å’Œ<code>react</code>æ—¶ï¼Œéœ€è¦æŠŠ<code>ui</code>ç»„ä»¶å’Œé€»è¾‘ç»„ä»¶åˆå¹¶ï¼Œç»å¸¸éœ€è¦å†™ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyReactComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">connect</span>(mapStateToProps, mapDispatchToProps)(<span class="title class_">MyReactComponent</span>);</span><br></pre></td></tr></table></figure><p>æœ‰äº†è£…é¥°å™¨ï¼Œå°±å¯ä»¥æ”¹å†™ä¸Šé¢çš„ä»£ç ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title function_">connect</span>(mapStateToProps, mapDispatchToProps)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">MyReactComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;&#125;</span><br></pre></td></tr></table></figure><h5 id="æ–¹æ³•å’Œå±æ€§çš„è£…é¥°"><a class="header-anchor" href="#æ–¹æ³•å’Œå±æ€§çš„è£…é¥°">Â¶</a>æ–¹æ³•å’Œå±æ€§çš„è£…é¥°</h5><p>ä¸Šé¢çš„è£…é¥°å™¨å®šä¹‰å‡½æ•°æˆ‘ä»¬åªç”¨åˆ°äº†ä¸€ä¸ªå‚æ•°ï¼Œå®é™…ä¸Šï¼Œåœ¨è£…é¥°ç±»çš„å±æ€§/æ–¹æ³•æ—¶ä»–æœ‰ä¸‰ä¸ªå‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* target è¢«è£…é¥°çš„ç±»çš„åŸå‹å¯¹è±¡,éœ€è¦æ³¨æ„ï¼Œè£…é¥°classå’Œclassçš„å±æ€§ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸ä¸€æ ·çš„ï¼Œè£…é¥°classæ—¶ï¼Œæ˜¯æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ç±»æœ¬èº«</span></span><br><span class="line"><span class="comment">* key è¦ä¿®é¥°çš„å±æ€§å</span></span><br><span class="line"><span class="comment">* descriptor è¯¥å±æ€§çš„æè¿°å¯¹è±¡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">decorator</span>(<span class="params">target,key,descriptor</span>)&#123;&#125;</span><br></pre></td></tr></table></figure><p>ğŸ”‘ å…³äºæè¿°å¯¹è±¡ï¼Œä¸ç†Ÿæ‚‰çš„å¯ä»¥å»çœ‹<code>jsé«˜çº§ç¨‹åºè®¾è®¡</code>å…³äº <code>defineProperty</code> å’Œ <code>defineProperties</code>çš„ä»‹ç»ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å°±æ˜¯ç”¨æ¥å®šä¹‰å’Œä¿®æ”¹å¯¹è±¡çš„å†…éƒ¨å±æ€§ã€‚<br>ä¸¾ä¸€ä¸ªå¸¸è§çš„ä¾‹å­ï¼Œåœ¨æ¯æ¬¡å‡½æ•°æ‰§è¡Œå‰åï¼ŒæŠŠå‡½æ•°çš„å‚æ•°å’Œç»“æœæ‰“å°å‡ºæ¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">log</span>(<span class="params">target,key,descriptor</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> old = descriptor.<span class="property">value</span></span><br><span class="line">descriptor.<span class="property">value</span> = <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`call <span class="subst">$&#123;key&#125;</span> with,`</span>,...args)</span><br><span class="line"><span class="keyword">const</span> result = old.<span class="title function_">call</span>(<span class="variable language_">this</span>,...args)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`result is <span class="subst">$&#123;result&#125;</span>`</span>)</span><br><span class="line"><span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> descriptor</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Util</span> &#123;</span><br><span class="line">@log</span><br><span class="line"><span class="title function_">add</span>(<span class="params">a,b</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> util = <span class="keyword">new</span> <span class="title class_">Util</span>()</span><br><span class="line">util.<span class="title function_">add</span>(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="comment">// è¿™æ—¶ï¼Œæ§åˆ¶å°ä¼šæ‰“å°å‡ºæ—¥å¿—</span></span><br><span class="line"><span class="comment">// call add with, 1 2</span></span><br><span class="line"><span class="comment">// result is 3</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸€ä¸ªå¯ç¼“å­˜çš„è£…é¥°å™¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">cacheable</span>(<span class="params">target,key,descriptor</span>) &#123;</span><br><span class="line"><span class="keyword">const</span> old = descriptor.<span class="property">value</span></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">typeof</span> old !== <span class="string">&#x27;function&#x27;</span> ) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;must be a function&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> cache = &#123;&#125;</span><br><span class="line">descriptor.<span class="property">value</span> = <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line"><span class="keyword">const</span> key = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(args)</span><br><span class="line"><span class="keyword">if</span>(cache[key]) &#123;</span><br><span class="line"><span class="keyword">return</span> cache[key]</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">cache[key] = old.<span class="title function_">call</span>(<span class="variable language_">this</span>,...args)</span><br><span class="line"><span class="keyword">return</span> cache[key]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> descriptor</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Util</span> &#123;</span><br><span class="line">@cacheable</span><br><span class="line"><span class="title function_">add</span>(<span class="params">a,b</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;add&quot;</span>,a,b)</span><br><span class="line"><span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> util = <span class="keyword">new</span> <span class="title class_">Util</span>()</span><br><span class="line">util.<span class="title function_">add</span>(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">util.<span class="title function_">add</span>(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">util.<span class="title function_">add</span>(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="comment">// åªæœ‰ç¬¬ä¸€æ¬¡è¿è¡Œä¼šæ‰“å°å‡º add 1 2</span></span><br></pre></td></tr></table></figure><p>åŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®ç°å±æ€§ä¸Šçš„è£…é¥°å™¨ï¼Œæ¯”å¦‚å®ç°ä¸€ä¸ªç±»ä¼¼<code>java</code>åŒ…è£…ç±»</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Integer</span>&#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">num</span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">value</span> = num</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">display</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`this is a boxing value , the value is <span class="subst">$&#123;<span class="variable language_">this</span>.value&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">boxing</span>(<span class="params">target,key,descriptor</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> v = descriptor.<span class="property">initializer</span> &amp;&amp; descriptor.<span class="property">initializer</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line">    v= <span class="keyword">new</span> <span class="title class_">Integer</span>(v)</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">get</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> v;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">set</span>: <span class="keyword">function</span>(<span class="params">c</span>) &#123;</span><br><span class="line">                v = <span class="keyword">new</span> <span class="title class_">Integer</span>(c);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Number</span> &#123;</span><br><span class="line"></span><br><span class="line">@boxing</span><br><span class="line">a=<span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> number = <span class="keyword">new</span> <span class="title class_">Number</span>()</span><br><span class="line">number.<span class="property">a</span>.<span class="title function_">display</span>()</span><br><span class="line"><span class="comment">// this is a boxing value , the value is 2</span></span><br><span class="line">number.<span class="property">a</span> = <span class="number">4</span></span><br><span class="line">number.<span class="property">a</span>.<span class="title function_">display</span>()</span><br><span class="line"><span class="comment">// this is a boxing value , the value is 4</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å®ç°äº†ä¸€ä¸ªç®€å•çš„åŒ…è£…<code>Integer</code>ã€‚</p><p>å¦‚æœæˆ‘ä»¬æ¯æ¬¡èµ‹å€¼çš„æ—¶å€™ï¼Œéƒ½å¸Œæœ›æ£€æŸ¥ä¸€ä¸‹æ•°æ®ç±»å‹ï¼Œå¯ä»¥è¿™æ ·åš</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">check</span>(<span class="params">type</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">target,key,descriptor</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> v = descriptor.<span class="property">initializer</span> &amp;&amp; descriptor.<span class="property">initializer</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>)</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">get</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> v;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">set</span>: <span class="keyword">function</span>(<span class="params">c</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> c !== type) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;error type&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">v = c</span><br><span class="line">&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸‰æ–¹åº“"><a class="header-anchor" href="#ç¬¬ä¸‰æ–¹åº“">Â¶</a>ç¬¬ä¸‰æ–¹åº“</h3><p><code>core-decorators.js</code>æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæä¾›äº†ä¸€äº›å¸¸è§çš„è£…é¥°å™¨<br>æ¯”å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @autobind</span></span><br><span class="line"><span class="keyword">import</span> &#123; autobind &#125; <span class="keyword">from</span> <span class="string">&#x27;core-decorators&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  @autobind</span><br><span class="line">  <span class="title function_">getPerson</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="keyword">let</span> getPerson = person.<span class="property">getPerson</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">getPerson</span>() === person;</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// @readonly</span></span><br><span class="line"><span class="keyword">import</span> &#123; readonly &#125; <span class="keyword">from</span> <span class="string">&#x27;core-decorators&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Meal</span> &#123;</span><br><span class="line">  @readonly</span><br><span class="line">  entree = <span class="string">&#x27;steak&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dinner = <span class="keyword">new</span> <span class="title class_">Meal</span>();</span><br><span class="line">dinner.<span class="property">entree</span> = <span class="string">&#x27;salmon&#x27;</span>;</span><br><span class="line"><span class="comment">// Cannot assign to read only property &#x27;entree&#x27; of [object Object]</span></span><br></pre></td></tr></table></figure><p>è¿˜æœ‰æ›´å¤šä¸å†é˜è¿°ã€‚</p><h3 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“">Â¶</a>æ€»ç»“</h3><p>ä¸Šæ–‡åªæ˜¯ç®€å•å¯¹è£…é¥°å™¨æ¨¡å¼åšäº†åŸºæœ¬åŸç†çš„è§£é‡Šå’Œç®€å•demoï¼Œå…·ä½“åœ¨å®æˆ˜ä¸­å¦‚ä½•åº”ç”¨ï¼Œè¿˜éœ€è¦å¾ˆå¤šå…¶ä»–çš„ç»éªŒï¼Œæ¯”å¦‚å¤šä¸ªè£…é¥°å™¨åµŒå¥—å¦‚ä½•ä½¿ç”¨ï¼Œå¦‚ä½•åˆ©ç”¨<code>proxy</code>å®ç°è£…é¥°å™¨ï¼Œåœ¨ä¸Šæ–‡ä¸­éƒ½æ²¡æåŠï¼Œåœ¨æ¥ä¸‹æ¥çš„åšæ–‡é‡Œï¼Œä¼šå®Œæ•´çš„å®ç°ä¸€ä¸ªå…·æœ‰å®é™…æ„ä¹‰çš„è£…é¥°å™¨ä¾‹å­ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> javaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è£…é¥°å™¨çš„ç®€å•å®ç°ï¼ˆä¸Šï¼‰</title>
      <link href="/posts/72b172aa/"/>
      <url>/posts/72b172aa/</url>
      
        <content type="html"><![CDATA[<blockquote><p><code>es7</code>ä¸º<code>javascript</code>æ·»åŠ äº†æ¿€åŠ¨äººå¿ƒçš„æ–°ç‰¹æ€§----è£…é¥°å™¨ï¼Œä¸è¿‡<code>Typrscript</code>æ—©å°±æ”¯æŒäº†è£…é¥°å™¨äº†ï¼Œè£…é¥°å™¨ä¹Ÿä¸æ˜¯<code>ts</code>ç‰¹æœ‰çš„è¯­æ³•ï¼Œå®é™…ä¸Š<code>python</code>ä¹Ÿæœ‰è£…é¥°å™¨ï¼Œåœ¨<code>oop</code>è¯­è¨€é‡Œé¢ï¼Œä¸€ç›´éƒ½æœ‰è£…é¥°å™¨æ¨¡å¼ï¼Œä¹Ÿç§°ä¸º<code>decorator</code>ï¼Œä¸è¿‡éƒ½æ˜¯ä»è¯­è¨€å±‚é¢ï¼Œé€šè¿‡ç»§æ‰¿å’Œç»„åˆå®ç°ï¼Œç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯­æ³•å±‚é¢ç›´æ¥å®ç°è£…é¥°å™¨äº†ã€‚</p></blockquote><h3 id="ä»€ä¹ˆæ˜¯è£…é¥°å™¨æ¨¡å¼"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯è£…é¥°å™¨æ¨¡å¼">Â¶</a>ä»€ä¹ˆæ˜¯è£…é¥°å™¨æ¨¡å¼</h3><p>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰å…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒæ˜¯ä½œä¸ºç°æœ‰çš„ç±»çš„ä¸€ä¸ªåŒ…è£…ã€‚</p><p>è¿™ç§æ¨¡å¼åˆ›å»ºäº†ä¸€ä¸ªè£…é¥°ç±»ï¼Œç”¨æ¥åŒ…è£…åŸæœ‰çš„ç±»ï¼Œå¹¶åœ¨ä¿æŒç±»æ–¹æ³•ç­¾åå®Œæ•´æ€§çš„å‰æä¸‹ï¼Œæä¾›äº†é¢å¤–çš„åŠŸèƒ½ã€‚</p><p><code>java</code>é‡Œé¢çš„è£…é¥°å™¨æ¨¡å¼:</p><p>å‚è€ƒè¿™ä¸ªåœ°å€ï¼š<a href="https://github.com/iluwatar/java-design-patterns/tree/master/decorator"><strong>decorator</strong></a></p><p>ğŸ”¼ä¸Šé¢çš„åœ°å€æ˜¯<code>github</code>ä¸Šä¸€ä¸ªå¾ˆæœ‰åçš„å„ç§è®¾è®¡æ¨¡å¼çš„<code>java</code>å®ç°ã€‚</p><blockquote><p>Attach additional responsibilities to an object dynamically. Decorators provide a flexible alternative to subclassing for extending functionality.</p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼šåŠ¨æ€çš„å°†é™„åŠ èŒè´£æ·»åŠ åˆ°å¯¹è±¡ä¸Šã€‚è£…é¥°å™¨æ¨¡å¼ä¸ºå­ç±»åŒ–æä¾›äº†çµæ´»çš„ä»£æ›¿å’Œæ‰©å±•çš„åŠŸèƒ½ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><p>æˆ‘ä»¬å°æ—¶å€™éƒ½æ‰“è¿‡<code>cs</code>ï¼Œæ¯ä¸ªè­¦å¯Ÿæˆ–è€…åŠ«åŒªéƒ½å¯ä»¥æ‹¿ä¸€æŠŠæ­¦å™¨ï¼Œæˆ–è€…æ˜¯<code>AK47</code>ï¼Œæˆ–è€…æ˜¯<code>m16</code>ï¼Œä¸ºäº†æ›´æ¢æ­¦å™¨ï¼Œæˆ‘ä»¬æ²¡å¿…è¦å»åˆ›é€ æ–°çš„è§’è‰²å®ä¾‹ï¼Œå¯ä»¥ç”¨è£…é¥°å™¨åŠ¨æ€çš„ç”¨æ­¦å™¨è£…é¥°ä»–ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªè§’è‰²æ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">attack</span><span class="params">()</span>;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">getAttackPower</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Police</span> <span class="keyword">implements</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">attack</span><span class="params">()</span>&#123;</span><br><span class="line">        Systom.out.print(<span class="string">&quot;I&#x27;m attacking you&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">getAttackPower</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">5</span>; <span class="comment">// æˆ˜æ–—åŠ›åªæœ‰5çš„æ¸£æ¸£</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AkPolice</span> <span class="keyword">implements</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// æä¾›æ„é€ å‡½æ•°æ¥å¯¹ç›®æ ‡è¿›è¡ŒåŒ…è£…</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AkPolice</span><span class="params">(Police decorted)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.decorted = decorted; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">attack</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.decorted.attack()</span><br><span class="line">        Systom.out.print(<span class="string">&quot;I&#x27;m attacking with a Ak!!&quot;</span>);<span class="comment">//awesome!</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">getAttackPower</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.decorted.getAttackPower()+<span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ğŸ”¼å°±åƒä¸Šé¢çš„ç®€å•ä¾‹å­ï¼Œä¸€ä¸ªåŒ…è£…ç±»æŠŠåŸºæœ¬ç±»<code>warped</code>èµ·æ¥ï¼Œå½¢æˆäº†ä¸€ä¸ªæ–°çš„ç±»ï¼Œæ–°çš„ç±»ä¸ä»…æ·»åŠ äº†æ–°çš„åŠ¨ä½œï¼Œè¿˜ä¿ç•™äº†åŸºæœ¬ç±»çš„åŠ¨ä½œã€‚</p><p>ä¼˜ç‚¹ï¼š</p><p>ğŸ‘ è£…é¥°æ¨¡å¼ä¸ç»§æ‰¿å…³ç³»çš„ç›®çš„éƒ½æ˜¯è¦æ‹“å±•å¯¹è±¡çš„åŠŸèƒ½ï¼Œä½†æ˜¯è£…é¥°æ¨¡å¼å¯ä»¥æä¾›æ¯”ç»§æ‰¿æ›´å¤šçš„çµæ´»æ€§ã€‚è£…é¥°æ¨¡å¼å…è®¸ç³»ç»ŸåŠ¨æ€å†³å®šâ€œè´´ä¸Šâ€ä¸€ä¸ªéœ€è¦çš„â€œè£…é¥°â€ï¼Œæˆ–è€…â€œé™¤æ‰â€ä¸€ä¸ªä¸éœ€è¦çš„â€œè£…é¥°â€ã€‚ç»§æ‰¿å…³ç³»åˆ™ä¸åŒï¼Œç»§æ‰¿å…³ç³»æ˜¯é™æ€çš„ï¼Œå®ƒåœ¨ç³»ç»Ÿè¿è¡Œå‰å°±å†³å®šäº†ã€‚</p><p>ğŸ‘ é€šè¿‡ä¸åŒçš„å…·ä½“è£…é¥°ç±»ä»¥åŠè¿™äº›è£…é¥°ç±»çš„æ’åˆ—ç»„åˆï¼Œè®¾è®¡å¸ˆå¯ä»¥åˆ›é€ å‡ºæ›´å¤šä¸åŒè¡Œä¸ºçš„ç»„åˆã€‚</p><p>ç¼ºç‚¹ï¼š</p><p>ğŸ‘ç§æ¯”ç»§æ‰¿æ›´åŠ çµæ´»æœºåŠ¨çš„ç‰¹æ€§ï¼Œä¹ŸåŒæ—¶æ„å‘³ç€æ›´åŠ å¤šçš„å¤æ‚æ€§ã€‚è£…é¥°æ¨¡å¼ä¼šå¯¼è‡´è®¾è®¡ä¸­å‡ºç°è®¸å¤šå°ç±»ï¼Œå¦‚æœè¿‡åº¦ä½¿ç”¨ï¼Œä¼šä½¿ç¨‹åºå˜å¾—å¾ˆå¤æ‚ã€‚</p><p>è£…é¥°å™¨è¯­æ³•æœ€å¸¸è§çš„åº”ç”¨å°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„<code>java</code>é‡Œé¢çš„<code>AOP</code>(é¢å‘åˆ‡é¢)ç¼–ç¨‹ï¼Œåœ¨ä¸å½±å“åŸæœ‰åŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œå¢åŠ æ–°çš„å¤„ç†é€»è¾‘ï¼Œæ¯”å¦‚æ·»åŠ å„ç§<code>filter</code>,è¿™äº›<code>filter</code>å°±åƒæ´‹è‘±ä¸€æ ·å±‚å±‚åŒ…è£¹ï¼Œæœ€ç»ˆæ‰§è¡ŒåŸæœ‰çš„é€»è¾‘ï¼Œä½†æ˜¯åœ¨ä¹‹å‰å’Œä¹‹åï¼Œéƒ½å¯ä»¥éšæ„æ·»åŠ æ–°çš„è¡Œä¸ºï¼Œå› æ­¤ï¼Œç‰¹åˆ«é€‚åˆå®‰å…¨æ£€æŸ¥ï¼Œç¼“å­˜ï¼Œè°ƒè¯•ï¼Œæ—¥å¿—è®°å½•ç­‰ç­‰è¡Œä¸ºã€‚</p><h3 id="è£…é¥°å™¨è¯­æ³•"><a class="header-anchor" href="#è£…é¥°å™¨è¯­æ³•">Â¶</a>è£…é¥°å™¨è¯­æ³•</h3><p>ç¬¬ä¸€æ¬¡çœ‹åˆ°è£…é¥°å™¨è¯­æ³•æ˜¯åœ¨ä½¿ç”¨<code>python</code>çš„æ—¶å€™ï¼Œç°åœ¨<code>es7</code>ä¹Ÿå®ç°äº†è£…é¥°å™¨è¯­æ³•ã€‚</p><p>é¦–æ¬¡çœ‹åˆ°è£…é¥°å™¨è¯­æ³•ï¼Œç”¨è¿‡<code>java</code>æ³¨è§£çš„ä¹Ÿè®¸ä¼šæ··åˆ°ä¸€èµ·ï¼Œå…¶å®è¿™ä¸¤ä¸ªä¸œè¥¿é™¤äº†é•¿å¾—åƒå¤–ï¼ŒåŸç†å®Œå…¨ä¸ä¸€æ ·ã€‚</p><blockquote><p>Python decorators were inspired in part by Java annotations, and have a similar syntax</p><p>â€‹                                                                                                                      --wikipedia</p></blockquote><p>æ ¹æ®<code>wikipedia</code>çš„è¯´æ³•ï¼Œè£…é¥°å™¨è¯­æ³•çš„çµæ„Ÿæ¥æºäº<code>java</code>çš„æ³¨è§£ï¼Œæ‰€ä»¥ä»–ä»¬æœ‰ç±»ä¼¼çš„è¯­æ³•ã€‚</p><p>æ³¨è§£æ˜¯åˆ©ç”¨åå°„ï¼Œå®ƒæœ¬èº«ä¸æ”¹å˜è¢«æ³¨è§£å¯¹è±¡çš„è¡Œä¸ºå’Œæ€§è´¨ï¼Œåªæœ‰ç†è§£è¿™äº›æ³¨è§£çš„å¤„ç†å™¨æ‰ä¼šæ”¹å˜è¡Œä¸ºï¼Œåœ¨è¿è¡Œçš„æ—¶å€™èµ·ä½œç”¨ã€‚</p><p>è£…é¥°å™¨å®é™…ä¸Šæ˜¯è¯­æ³•ç³–ï¼Œåˆ©äºäº†<code>python</code>,<code>javascript</code>å‡½æ•°å¯ä»¥èµ‹å€¼ï¼Œä¼ å‚çš„ç‰¹æ€§ï¼Œå‡½æ•°æ˜¯ç¬¬ä¸€å…¬æ°‘ï¼Œå‡½æ•°æ˜¯å¯¹è±¡ã€æ˜¯å˜é‡ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°ã€å¯ä»¥æ˜¯è¿”å›å€¼ï¼Œå¯¹åµŒå¥—å‡½æ•°åšäº†ç®€åŒ–ã€‚</p><p>ğŸ˜‹å¼•ç”³ï¼šå¦‚æœæƒ³äº†è§£æ›´å¤šå…³äº<code>javascript</code>å‡½æ•°å¼ç‰¹æ€§çš„çŸ¥è¯†ï¼Œå¯ä»¥çœ‹ä¸‹é¢â¬‡ï¸</p><p>[<a href="https://www.bookstack.cn/books/mostly-adequate-guide-chinese">JS å‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ä¸­æ–‡ç‰ˆ</a> ](<a href="https://www.bookstack.cn/read/mostly-adequate-guide-chinese/README.md">https://www.bookstack.cn/read/mostly-adequate-guide-chinese/README.md</a>)</p><p>ç›¸ä¿¡çœ‹å®Œï¼Œä½ ä¼šå¯¹<code>javascript</code>æœ‰æ–°çš„è®¤è¯†ã€‚</p><p>ä¸‹é¢é‡å¤´æˆæ¥äº†ï¼Œåˆ°åº•åœ¨<code>javascript</code>é‡Œï¼Œæ€ä¹ˆå®ç°è‡ªå·±çš„è£…é¥°å™¨å‘¢ï¼Ÿ</p><p>å…³é”®çš„<code>api</code>æ˜¯<code>Object.defineProperty</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, prop, descriptor)</span><br></pre></td></tr></table></figure><p>å‚æ•°ï¼š</p><p><strong>obj</strong> è¦åœ¨å…¶ä¸Šå®šä¹‰å±æ€§çš„å¯¹è±¡</p><p><strong>prop</strong> è¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åç§°ã€‚</p><p><strong>descriptor</strong> å°†è¢«å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦ã€‚</p><p>è£…é¥°å™¨å¯ä»¥ç”¨åˆ°<code>ç±»</code>ï¼Œå±æ€§å’Œç±»çš„<code>æ–¹æ³•</code>ä¸Šï¼Œä¸èƒ½ç”¨äº<code>function</code>â”<a href="http://es6.ruanyifeng.com/#docs/decorator#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BF%AE%E9%A5%B0%E5%99%A8%E4%B8%8D%E8%83%BD%E7%94%A8%E4%BA%8E%E5%87%BD%E6%95%B0%EF%BC%9F">ä¸ºä»€ä¹ˆä¿®é¥°å™¨ä¸èƒ½ç”¨äºå‡½æ•°ï¼Ÿ</a></p><p>ğŸ‘æƒ³è¯¦ç»†äº†è§£è£…é¥°å™¨è¯­æ³•ï¼Œå¯ä»¥å»çœ‹é˜®ä¸€å³°è€å¸ˆçš„<code>es6</code>æ•™ç¨‹</p><p><a href="http://es6.ruanyifeng.com/#docs/decorator">ä¿®é¥°å™¨</a></p><p>ä¸‹ç¯‡åšæ–‡ï¼Œæˆ‘ä¼šç”¨å®ä¾‹ä»£ç å®ç°ä¸åŒçš„è£…é¥°å™¨ï¼ˆç­‰æˆ‘çœ‹å®Œä¸Šé¢çš„æ•™ç¨‹å…ˆğŸ˜„)ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> javaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Performance--ä¸€ä¸ªç”¨æ¥è·å–é¡µé¢æ€§èƒ½çš„æ¥å£</title>
      <link href="/posts/94e1353c/"/>
      <url>/posts/94e1353c/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘è¢«é—®åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•åˆ¤æ–­é¡µé¢åŠ è½½æ—¶é—´ï¼Œæˆ‘ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„æ˜¯æ‰“å¼€<code>devtool</code>çœ‹ä¸‹<code>Network</code>ä¸‹é¢</p><p><code>DOMContentLoaded</code>å’Œ<code>load</code>åˆ†åˆ«ç”¨äº†å¤šä¹…ï¼Œå¦‚æœè‡ªå·±å†™çš„è¯ï¼Œè¦ç”¨åˆ°<code>window.onload</code>å‡½æ•°ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œwebå·²ç»ç»™å‡ºäº†<code>api</code>ï¼Œè·å–é¡µé¢æ€§èƒ½ï¼Œå¹¶ä¸”å¤§éƒ¨åˆ†ç°ä»£æµè§ˆå™¨ä¹Ÿæ”¯æŒè¿™ä¸ª<code>api</code>.</p></blockquote><h3 id="Performanceç®€ä»‹"><a class="header-anchor" href="#Performanceç®€ä»‹">Â¶</a><strong>Performance</strong>ç®€ä»‹</h3><p>æ ¹æ®<code>mdn</code>é‡Œé¢çš„è¯´æ³•:</p><blockquote><p><strong>Performance</strong> æ¥å£å¯ä»¥è·å–åˆ°å½“å‰é¡µé¢ä¸­ä¸æ€§èƒ½ç›¸å…³çš„ä¿¡æ¯ã€‚å®ƒæ˜¯ High Resolution Time API çš„ä¸€éƒ¨åˆ†ï¼ŒåŒæ—¶ä¹Ÿèåˆäº† Performance Timeline APIã€<a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigation_timing_API">Navigation Timing API</a>ã€ <a href="https://developer.mozilla.org/en-US/docs/Web/API/User_Timing_API">User Timing API</a> å’Œ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Resource_Timing_API">Resource Timing API</a>ã€‚</p></blockquote><p>å¹¶ä¸”ï¼Œè¿™äº›æ•°æ®æ˜¯åªè¯»çš„ã€‚</p><p><code>preformance</code>å¯¹è±¡æœ‰ä¸‰ä¸ªæ ‡å‡†å±æ€§ï¼Œå’Œä¸€ä¸ª<code>chrome</code>æ·»åŠ çš„éæ ‡å‡†åº“â€“<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Performance/memory"><code>performance.memory</code></a>ï¼Œç”¨æ¥è·å–åˆ°åŸºæœ¬å†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼Œä¸€èˆ¬æ¥è¯´ä¸è¦ç”¨è¿™ä¸ªéæ ‡å‡†çš„<code>api</code>ã€‚</p><p>ğŸ‘<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Performance/navigation"><code>Performance.navigation</code></a> [åªè¯»]</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceNavigation"><code>PerformanceNavigation</code></a> å¯¹è±¡æä¾›äº†åœ¨æŒ‡å®šçš„æ—¶é—´æ®µé‡Œå‘ç”Ÿçš„æ“ä½œç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬é¡µé¢æ˜¯åŠ è½½è¿˜æ˜¯åˆ·æ–°ã€å‘ç”Ÿäº†å¤šå°‘æ¬¡é‡å®šå‘ç­‰ç­‰ã€‚Not available in workers.</p><p>ğŸ‘<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Performance/timing"><code>Performance.timing</code></a> [åªè¯»]</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming"><code>PerformanceTiming</code></a> å¯¹è±¡åŒ…å«å»¶è¿Ÿç›¸å…³çš„æ€§èƒ½ä¿¡æ¯ã€‚Not available in workers.</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Performance/memory"><code>performance.memory</code></a></p><p>å…¶æ˜¯ Chrome æ·»åŠ çš„ä¸€ä¸ªéæ ‡å‡†æ‰©å±•ï¼Œè¿™ä¸ªå±æ€§æä¾›äº†ä¸€ä¸ªå¯ä»¥è·å–åˆ°åŸºæœ¬å†…å­˜ä½¿ç”¨æƒ…å†µçš„å¯¹è±¡ã€‚<strong>ä¸åº”è¯¥</strong>ä½¿ç”¨è¿™ä¸ªéæ ‡å‡†çš„ APIã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Performance/timeOrigin"><code>Performance.timeOrigin</code></a> [åªè¯»]</p><p>è¿”å›æ€§èƒ½æµ‹é‡å¼€å§‹æ—¶çš„æ—¶é—´çš„é«˜ç²¾åº¦æ—¶é—´æˆ³ã€‚</p><p>å…³äºæ›´ç²¾ç¡®çš„èµ„æ–™è¯·æŸ¥çœ‹<code>mdn</code>å®˜æ–¹æ–‡æ¡£ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Performance">Performance</a></p><h3 id="å¦‚ä½•æ ¹æ®Performance-timingè·å–åŠ è½½æ—¶é—´"><a class="header-anchor" href="#å¦‚ä½•æ ¹æ®Performance-timingè·å–åŠ è½½æ—¶é—´">Â¶</a>å¦‚ä½•æ ¹æ®<code>Performance.timing</code>è·å–åŠ è½½æ—¶é—´</h3><p>åœ¨æ­¤ä¹‹å‰ï¼Œè¯»è€…éœ€è¦æ˜ç™½ä¸€ç‚¹æµè§ˆå™¨å·¥ä½œçš„åŸºæœ¬æµç¨‹å’ŒåŸç†ï¼Œæ¯”å¦‚ç»å¸¸åœ¨é¢è¯•æ—¶è¢«é—®åˆ°çš„â€œä»urlè¾“å…¥åˆ°é¡µé¢åŠ è½½ç»è¿‡äº†ä»€ä¹ˆæµç¨‹ï¼Ÿâ€</p><p>è¿™é‡Œæœ‰å‡ ç¯‡éå¸¸è¯¦ç»†çš„æ–‡ç« ï¼ˆæœ€èµ·ç æ˜¯æˆ‘é‡åˆ°çš„æœ€è¯¦ç»†çš„ï¼Œå¦‚æœä½ çœ‹åˆ°è¿‡æ›´è¯¦ç»†çš„ï¼Œæˆ–è€…è¿˜æœ‰å…¶ä»–è¡¥å……ï¼Œè¯·åœ¨ä¸‹æ–¹ç•™è¨€ï¼Œä¸‡åˆ†æ„Ÿè°¢ğŸ˜™ ï¼‰ï¼Œä»‹ç»äº†è¿™ä¸ªæµç¨‹ã€‚</p><p><a href="https://segmentfault.com/a/1190000006879700">ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½å‘ç”Ÿäº†ä»€ä¹ˆ</a><br><a href="https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/">æµè§ˆå™¨çš„å·¥ä½œåŸç†ï¼šæ–°å¼ç½‘ç»œæµè§ˆå™¨å¹•åæ­ç§˜</a></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ æœ€èµ·ç è¦çŸ¥é“<code>dns</code>è§£æï¼Œ<code>http</code>è¯·æ±‚ï¼Œé¡µé¢æ¸²æŸ“ç­‰è®¤è¯†ã€‚</p><p><code>timing</code>å°±æ˜¯ä»è¾“å…¥<code>url</code>åˆ°é¡µé¢å±•ç¤ºçš„å…¨è¿‡ç¨‹çš„æ—¶é—´ç»Ÿè®¡ï¼Œå•ä½æ˜¯æ¯«ç§’ï¼Œåªè¯»ã€‚</p><p>â• å±æ€§ï¼š</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/navigationStart"><code>PerformanceTiming.navigationStart</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¡¨å¾äº†ä»åŒä¸€ä¸ªæµè§ˆå™¨ä¸Šä¸‹æ–‡çš„ä¸Šä¸€ä¸ªæ–‡æ¡£å¸è½½(unload)ç»“æŸæ—¶çš„UNIXæ—¶é—´æˆ³ã€‚å¦‚æœæ²¡æœ‰ä¸Šä¸€ä¸ªæ–‡æ¡£ï¼Œè¿™ä¸ªå€¼ä¼šå’ŒPerformanceTiming.fetchStartç›¸åŒã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/unloadEventStart"><code>PerformanceTiming.unloadEventStart</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¡¨å¾äº†<code>unload</code>äº‹ä»¶æŠ›å‡ºæ—¶çš„UNIXæ—¶é—´æˆ³ã€‚å¦‚æœæ²¡æœ‰ä¸Šä¸€ä¸ªæ–‡æ¡£ï¼Œor if the previous document, or one of the needed redirects, is not of the same origin, è¿™ä¸ªå€¼ä¼šè¿”å›0.</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/unloadEventEnd"><code>PerformanceTiming.unloadEventEnd</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¡¨å¾äº†<code>unload</code>äº‹ä»¶å¤„ç†å®Œæˆæ—¶çš„UNIXæ—¶é—´æˆ³ã€‚å¦‚æœæ²¡æœ‰ä¸Šä¸€ä¸ªæ–‡æ¡£ï¼Œor if the previous document, or one of the needed redirects, is not of the same origin, è¿™ä¸ªå€¼ä¼šè¿”å›0.</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/redirectStart"><code>PerformanceTiming.redirectStart</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¡¨å¾äº†ç¬¬ä¸€ä¸ªHTTPé‡å®šå‘å¼€å§‹æ—¶çš„UNIXæ—¶é—´æˆ³ã€‚å¦‚æœæ²¡æœ‰é‡å®šå‘ï¼Œæˆ–è€…é‡å®šå‘ä¸­çš„ä¸€ä¸ªä¸åŒæºï¼Œè¿™ä¸ªå€¼ä¼šè¿”å›0.</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/redirectEnd"><code>PerformanceTiming.redirectEnd</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¡¨å¾äº†æœ€åä¸€ä¸ªHTTPé‡å®šå‘å®Œæˆæ—¶ï¼ˆä¹Ÿå°±æ˜¯è¯´æ˜¯HTTPå“åº”çš„æœ€åä¸€ä¸ªæ¯”ç‰¹ç›´æ¥è¢«æ”¶åˆ°çš„æ—¶é—´ï¼‰çš„UNIXæ—¶é—´æˆ³ã€‚å¦‚æœæ²¡æœ‰é‡å®šå‘ï¼Œæˆ–è€…é‡å®šå‘ä¸­çš„ä¸€ä¸ªä¸åŒæºï¼Œè¿™ä¸ªå€¼ä¼šè¿”å›0.</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/fetchStart"><code>PerformanceTiming.fetchStart</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¡¨å¾äº†æµè§ˆå™¨å‡†å¤‡å¥½ä½¿ç”¨HTTPè¯·æ±‚æ¥è·å–(fetch)æ–‡æ¡£çš„UNIXæ—¶é—´æˆ³ã€‚è¿™ä¸ªæ—¶é—´ç‚¹ä¼šåœ¨æ£€æŸ¥ä»»ä½•åº”ç”¨ç¼“å­˜ä¹‹å‰ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/domainLookupStart"><code>PerformanceTiming.domainLookupStart</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¡¨å¾äº†åŸŸåæŸ¥è¯¢å¼€å§‹çš„UNIXæ—¶é—´æˆ³ã€‚å¦‚æœä½¿ç”¨äº†æŒç»­è¿æ¥(persistent connection)ï¼Œæˆ–è€…è¿™ä¸ªä¿¡æ¯å­˜å‚¨åˆ°äº†ç¼“å­˜æˆ–è€…æœ¬åœ°èµ„æºä¸Šï¼Œè¿™ä¸ªå€¼å°†å’Œ <code>PerformanceTiming.fetchStartä¸€è‡´ã€‚</code></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/domainLookupEnd"><code>PerformanceTiming.domainLookupEnd</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¡¨å¾äº†åŸŸåæŸ¥è¯¢ç»“æŸçš„UNIXæ—¶é—´æˆ³ã€‚å¦‚æœä½¿ç”¨äº†æŒç»­è¿æ¥(persistent connection)ï¼Œæˆ–è€…è¿™ä¸ªä¿¡æ¯å­˜å‚¨åˆ°äº†ç¼“å­˜æˆ–è€…æœ¬åœ°èµ„æºä¸Šï¼Œè¿™ä¸ªå€¼å°†å’Œ <code>PerformanceTiming.fetchStartä¸€è‡´ã€‚</code></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/connectStart"><code>PerformanceTiming.connectStart</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¿”å›HTTPè¯·æ±‚å¼€å§‹å‘æœåŠ¡å™¨å‘é€æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœä½¿ç”¨æŒä¹…è¿æ¥ï¼ˆpersistent connectionï¼‰ï¼Œåˆ™è¿”å›å€¼ç­‰åŒäºfetchStartå±æ€§çš„å€¼ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/connectEnd"><code>PerformanceTiming.connectEnd</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¿”å›æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥å»ºç«‹æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœå»ºç«‹çš„æ˜¯æŒä¹…è¿æ¥ï¼Œåˆ™è¿”å›å€¼ç­‰åŒäºfetchStartå±æ€§çš„å€¼ã€‚è¿æ¥å»ºç«‹æŒ‡çš„æ˜¯æ‰€æœ‰æ¡æ‰‹å’Œè®¤è¯è¿‡ç¨‹å…¨éƒ¨ç»“æŸã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/secureConnectionStart"><code>PerformanceTiming.secureConnectionStart</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¿”å›æµè§ˆå™¨ä¸æœåŠ¡å™¨å¼€å§‹å®‰å…¨é“¾æ¥çš„æ¡æ‰‹æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœå½“å‰ç½‘é¡µä¸è¦æ±‚å®‰å…¨è¿æ¥ï¼Œåˆ™è¿”å›0ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/requestStart"><code>PerformanceTiming.requestStart</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¿”å›æµè§ˆå™¨å‘æœåŠ¡å™¨å‘å‡ºHTTPè¯·æ±‚æ—¶ï¼ˆæˆ–å¼€å§‹è¯»å–æœ¬åœ°ç¼“å­˜æ—¶ï¼‰çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/responseStart"><code>PerformanceTiming.responseStart</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¿”å›æµè§ˆå™¨ä»æœåŠ¡å™¨æ”¶åˆ°ï¼ˆæˆ–ä»æœ¬åœ°ç¼“å­˜è¯»å–ï¼‰ç¬¬ä¸€ä¸ªå­—èŠ‚æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœä¼ è¾“å±‚åœ¨å¼€å§‹è¯·æ±‚ä¹‹åå¤±è´¥å¹¶ä¸”è¿æ¥è¢«é‡å¼€ï¼Œè¯¥å±æ€§å°†ä¼šè¢«æ•°åˆ¶æˆæ–°çš„è¯·æ±‚çš„ç›¸å¯¹åº”çš„å‘èµ·æ—¶é—´ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/responseEnd"><code>PerformanceTiming.responseEnd</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¿”å›æµè§ˆå™¨ä»æœåŠ¡å™¨æ”¶åˆ°ï¼ˆæˆ–ä»æœ¬åœ°ç¼“å­˜è¯»å–ï¼Œæˆ–ä»æœ¬åœ°èµ„æºè¯»å–ï¼‰æœ€åä¸€ä¸ªå­—èŠ‚æ—¶ï¼ˆå¦‚æœåœ¨æ­¤ä¹‹å‰HTTPè¿æ¥å·²ç»å…³é—­ï¼Œåˆ™è¿”å›å…³é—­æ—¶ï¼‰çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/domLoading"><code>PerformanceTiming.domLoading</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¿”å›å½“å‰ç½‘é¡µDOMç»“æ„å¼€å§‹è§£ææ—¶ï¼ˆå³<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/readyState"><code>Document.readyState</code></a>å±æ€§å˜ä¸ºâ€œloadingâ€ã€ç›¸åº”çš„ <code>readystatechange</code>äº‹ä»¶è§¦å‘æ—¶ï¼‰çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/domInteractive"><code>PerformanceTiming.domInteractive</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¿”å›å½“å‰ç½‘é¡µDOMç»“æ„ç»“æŸè§£æã€å¼€å§‹åŠ è½½å†…åµŒèµ„æºæ—¶ï¼ˆå³<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/readyState"><code>Document.readyState</code></a>å±æ€§å˜ä¸ºâ€œinteractiveâ€ã€ç›¸åº”çš„<code>readystatechange</code>äº‹ä»¶è§¦å‘æ—¶ï¼‰çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/domContentLoadedEventStart"><code>PerformanceTiming.domContentLoadedEventStart</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¿”å›å½“è§£æå™¨å‘é€<code>DOMContentLoaded</code> äº‹ä»¶ï¼Œå³æ‰€æœ‰éœ€è¦è¢«æ‰§è¡Œçš„è„šæœ¬å·²ç»è¢«è§£ææ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/domContentLoadedEventEnd"><code>PerformanceTiming.domContentLoadedEventEnd</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¿”å›å½“æ‰€æœ‰éœ€è¦ç«‹å³æ‰§è¡Œçš„è„šæœ¬å·²ç»è¢«æ‰§è¡Œï¼ˆä¸è®ºæ‰§è¡Œé¡ºåºï¼‰æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/domComplete"><code>PerformanceTiming.domComplete</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¿”å›å½“å‰æ–‡æ¡£è§£æå®Œæˆï¼Œå³<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/readyState"><code>Document.readyState</code></a> å˜ä¸º <code>'complete'ä¸”ç›¸å¯¹åº”çš„``readystatechange</code> è¢«è§¦å‘æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/loadEventStart"><code>PerformanceTiming.loadEventStart</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¿”å›è¯¥æ–‡æ¡£ä¸‹ï¼Œ<code>load</code>äº‹ä»¶è¢«å‘é€æ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœè¿™ä¸ªäº‹ä»¶è¿˜æœªè¢«å‘é€ï¼Œå®ƒçš„å€¼å°†ä¼šæ˜¯0ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/loadEventEnd"><code>PerformanceTiming.loadEventEnd</code></a> åªè¯»</p><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·long long å‹çš„æ¯«ç§’æ•°ï¼Œè¿”å›å½“<code>load</code>äº‹ä»¶ç»“æŸï¼Œå³åŠ è½½äº‹ä»¶å®Œæˆæ—¶çš„Unixæ¯«ç§’æ—¶é—´æˆ³ã€‚å¦‚æœè¿™ä¸ªäº‹ä»¶è¿˜æœªè¢«å‘é€ï¼Œæˆ–è€…å°šæœªå®Œæˆï¼Œå®ƒçš„å€¼å°†ä¼šæ˜¯0.</p><p>ğŸ”¼ ä»¥ä¸Šå±æ€§æ¥è‡ª<code>mdn</code>æ–‡æ¡£ã€‚</p><p>æ ¹æ®ä¸Šé¢çš„å®šä¹‰ï¼Œå¯ä»¥å¾—å‡ºä¸‹é¢çš„å¸¸ç”¨çš„æ—¶é—´è®¡ç®—å…¬å¼ï¼š</p><p><strong>å¸¸ç”¨è®¡ç®—ï¼š</strong><br><code>DNS</code>æŸ¥è¯¢è€—æ—¶ ï¼š<code>domainLookupEnd</code> - <code>domainLookupStart</code><br><code>TCP</code>é“¾æ¥è€—æ—¶ ï¼š<code>connectEnd</code> -<code> connectStart</code><br><code>request</code>è¯·æ±‚è€—æ—¶ ï¼š<code>responseEnd</code> - <code>responseStart</code><br>è§£æ<code>dom</code>æ ‘è€—æ—¶ ï¼š <code>domComplete</code> - <code>domInteractive</code><br>ç™½å±æ—¶é—´ ï¼š<code>responseStart</code> -<code> navigationStart</code><br><code>domready</code>æ—¶é—´(ç”¨æˆ·å¯æ“ä½œæ—¶é—´èŠ‚ç‚¹) ï¼š<code>domContentLoadedEventEnd</code> -<code> navigationStart</code><br><code>onload</code>æ—¶é—´(æ€»ä¸‹è½½æ—¶é—´) ï¼š<code>loadEventEnd</code> - <code>navigationStart</code></p><h4 id="å‚è€ƒ"><a class="header-anchor" href="#å‚è€ƒ">Â¶</a>å‚è€ƒ</h4><p>[<a href="https://www.cnblogs.com/bldxh/p/6857324.html">Performance â€” å‰ç«¯æ€§èƒ½ç›‘æ§åˆ©å™¨</a>](<a href="https://www.cnblogs.com/bldxh/p/6857324.html">https://www.cnblogs.com/bldxh/p/6857324.html</a>)</p><p><a href="https://w3c.github.io/navigation-timing/#introduction">w3cæ–‡æ¡£(<a href="https://w3c.github.io/navigation-timing/#introduction">https://w3c.github.io/navigation-timing/#introduction</a>)</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming">mdnæ–‡æ¡£(<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming">https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming</a>)</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ æ³•æ¨¡æ‹Ÿå™¨</title>
      <link href="/posts/909f226/"/>
      <url>/posts/909f226/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸ç”¨ â€œ+â€ æ€ä¹ˆå®ç°åŠ æ³•å‘¢ï¼Ÿç›¸ä¿¡å¤§å®¶çœ‹åˆ°ç¬¬ä¸€æ—¶é—´å°±ä¼šæƒ³åˆ°ç”¨ä½è¿ç®—ï¼Œç‰¹åˆ«æ˜¯è®¡ç®—æœºåŸºç¡€å¥½çš„åŒå­¦ï¼Œç«‹é©¬æƒ³åˆ°è®¡ç®—æœºæœ¬è´¨ä¸å°±æ˜¯2è¿›åˆ¶åšä½è¿ç®—å®ç°è®¡ç®—çš„å—ï¼Ÿ</p></blockquote><h3 id="å…ˆå¤ä¹ ä¸‹ä½è¿ç®—"><a class="header-anchor" href="#å…ˆå¤ä¹ ä¸‹ä½è¿ç®—">Â¶</a>å…ˆå¤ä¹ ä¸‹ä½è¿ç®—</h3><p>ä¸è¿ç®—<code>&amp;</code><br><code>2&amp;3</code><br>2çš„2è¿›åˆ¶æ˜¯<code>10</code><br>3çš„2è¿›åˆ¶æ˜¯<code>11</code><br>æ‰€ä»¥å°±æ˜¯<code>10</code>å’Œ<code>11</code>åšä¸è¿ç®—,åªæœ‰åŒæ–¹éƒ½æ˜¯<code>true</code>çš„æ—¶å€™ï¼Œç»“æœæ‰ä¸º<code>true</code>ã€‚</p><p>æ³¨æ„ï¼šå¦‚æœæ˜¯è´Ÿæ•°ï¼Œéœ€è¦è®¡ç®—è¡¥ç æ¥åšä½è¿ç®—ï¼Œæ­£æ•°çš„è¡¥ç å’Œæœ¬èº«ç›¸ç­‰ã€‚æ¯”å¦‚<code>-1</code></p><p>æºç  1000 0001</p><p>åç  1111 1110</p><p>è¡¥ç  1111 1111</p><table><thead><tr><th>ä¸è¿ç®—</th><th>true</th><th>false</th></tr></thead><tbody><tr><td>true</td><td>true</td><td>false</td></tr><tr><td>false</td><td>false</td><td>false</td></tr></tbody></table><table><thead><tr><th>æˆ–è¿ç®—</th><th>true</th><th>false</th></tr></thead><tbody><tr><td>true</td><td>true</td><td>true</td></tr><tr><td>false</td><td>true</td><td>false</td></tr></tbody></table><table><thead><tr><th>å¼‚æˆ–è¿ç®—</th><th>true</th><th>false</th></tr></thead><tbody><tr><td>true</td><td>false</td><td>true</td></tr><tr><td>false</td><td>true</td><td>false</td></tr></tbody></table><h3 id="å¼‚æˆ–å’Œä¸è¿ç®—"><a class="header-anchor" href="#å¼‚æˆ–å’Œä¸è¿ç®—">Â¶</a>å¼‚æˆ–å’Œä¸è¿ç®—</h3><p>å¼‚æˆ–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10</span>   <span class="comment"># 1010</span></span><br><span class="line">b = <span class="number">5</span>    <span class="comment"># 0101</span></span><br><span class="line">a^b = <span class="number">15</span> <span class="comment"># 1111</span></span><br><span class="line"></span><br><span class="line">c = <span class="number">10</span>    <span class="comment">#1010</span></span><br><span class="line">d = <span class="number">6</span>     <span class="comment">#0110</span></span><br><span class="line">c^b = <span class="number">12</span>  <span class="comment">#1100</span></span><br></pre></td></tr></table></figure><p>ä¸</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10</span>  <span class="comment"># 1010</span></span><br><span class="line">b = <span class="number">5</span>   <span class="comment"># 0101</span></span><br><span class="line">a&amp;b = <span class="number">0</span> <span class="comment"># 0000</span></span><br><span class="line"></span><br><span class="line">c = <span class="number">10</span>   <span class="comment">#1010</span></span><br><span class="line">d = <span class="number">6</span>    <span class="comment">#0110</span></span><br><span class="line">c&amp;b = <span class="number">2</span>  <span class="comment">#0010</span></span><br></pre></td></tr></table></figure><p>çœ‹å‡ºç‚¹çœ‰ç›®æ²¡æœ‰ï¼Ÿ<br>å¼‚æˆ–ï¼Œå¾—åˆ°çš„æ˜¯ä¸¤ä¸ªæ•°æ²¡è¿›ä½çš„å’Œï¼›è€Œä¸ã€‚å¾—åˆ°çš„æ˜¯éœ€è¦è¿›ä½çš„ä½ç½®ï¼ˆè¿™é‡Œçš„ä½ç½®å¹¶ä¸æ˜¯ä¸€ä¸€å¯¹åº”ï¼Œéœ€è¦å‘å·¦ç§»åŠ¨ä¸€ä½ï¼Œï¼‰</p><p>ç®—æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a,b</span>):</span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> b != <span class="number">0</span>:</span><br><span class="line">        res = a^b</span><br><span class="line">        b = (a&amp;b)&lt;&lt;<span class="number">1</span></span><br><span class="line">        a = res</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">bin</span>(a)[<span class="number">2</span>:],<span class="built_in">bin</span>(b)[<span class="number">2</span>:])</span><br><span class="line">    <span class="keyword">return</span> a  </span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®— 10 åŠ  6    </span></span><br><span class="line">add(<span class="number">10</span>,<span class="number">6</span>)</span><br><span class="line"><span class="comment">#output</span></span><br><span class="line"> <span class="number">1100</span>     <span class="number">100</span></span><br><span class="line"> <span class="number">1000</span>    <span class="number">1000</span></span><br><span class="line">    <span class="number">0</span>   <span class="number">10000</span></span><br><span class="line"><span class="number">10000</span>       <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»“æœ</span></span><br><span class="line"><span class="number">16</span></span><br></pre></td></tr></table></figure><p>åŸç†<br>aï¼Œbå…ˆç”¨å¼‚æˆ–è·å–ä¸è¿›ä½çš„ç»“æœï¼Œåœ¨ç”¨ä¸è¿ç®—è·å–è¿›ä½ï¼Œè¿™ä¸ªç§°ä¸ºè¿›ä½è¡¥å¿ï¼Œç„¶åæŠŠè¿™ä¸¤ä¸ªç»“æœç›¸åŠ å°±æ˜¯a+bäº†ï¼Œ<br>ä½†æ˜¯ä¸ç„¶ç”¨åŠ æ³•å•Šï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ å¯ä»¥æŠŠå‰é¢çš„æµç¨‹å†èµ°ä¸€æ¬¡ï¼Œç›´åˆ°è¿›ä½è¡¥å¿ä¸º0ï¼Œè¿™æ—¶å€™ï¼Œä¸Šä¸ªå¼‚æˆ–ç»“æœå°±æ˜¯æœ€ç»ˆç›¸åŠ çš„ç»“æœäº†ã€‚</p><p>æ ¹æ®ä¸Šé¢çš„åŸç†<br>1.a + b çš„é—®é¢˜æ‹†åˆ†ä¸º (a å’Œ b çš„æ— è¿›ä½ç»“æœ) + (a å’Œ b çš„è¿›ä½ç»“æœ)<br>2.æ— è¿›ä½åŠ æ³•ä½¿ç”¨å¼‚æˆ–è¿ç®—è®¡ç®—å¾—å‡º<br>3.è¿›ä½ç»“æœä½¿ç”¨ä¸è¿ç®—å’Œç§»ä½è¿ç®—è®¡ç®—å¾—å‡º<br>4.å¾ªç¯æ­¤è¿‡ç¨‹ï¼Œç›´åˆ°è¿›ä½ä¸º 0</p><p>ç”¨ä¸€ä¸ªå…¬å¼å°±æ˜¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a + b = a^b + (a&amp;b)&lt;&lt;<span class="number">1</span></span><br></pre></td></tr></table></figure><p>ä¸è¿‡å…¶å®è¿˜æœ‰æ›´ç®€å•çš„æ–¹æ³•,æ¯•ç«Ÿ<br><strong>äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘é€‰python</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span>([a, b])</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> javaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>setTimeoutå’ŒsetIntervalçš„åŒºåˆ«</title>
      <link href="/posts/64e435bc/"/>
      <url>/posts/64e435bc/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æˆ‘ä»¬å†å‰ç«¯å¼€å‘ä¸­éœ€è¦å®ç°å®šæ—¶ä»»åŠ¡æˆ–è€…<code>js</code>åŠ¨ç”»ï¼Œéƒ½è¦ç”¨åˆ°<code>setTimeout</code>å’Œ<code>setInterval</code>zè¿™ä¸¤ä¸ªå‡½æ•°ï¼Œä½†æ˜¯å¯¹äºä»–ä»¬çš„åŸç†ï¼Œå¦‚æœä¸æ¸…æ¥šï¼Œå¾€å¾€ä¼šé€ æˆä¸€äº›æ„æƒ³ä¸åˆ°çš„é—®é¢˜ã€‚</p></blockquote><h3 id="setTimeout"><a class="header-anchor" href="#setTimeout">Â¶</a><code>setTimeout</code></h3><p><code>setTimeout</code>æ–¹æ³•è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œè¯¥å®šæ—¶å™¨åœ¨å®šæ—¶å™¨åˆ°æœŸåæ‰§è¡Œä¸€ä¸ªå‡½æ•°æˆ–æŒ‡å®šçš„ä¸€æ®µä»£ç ã€‚</p><p>è¯­æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> id = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>[,delay,param1...])</span><br><span class="line"><span class="keyword">var</span> id = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>[,delay])</span><br><span class="line"><span class="keyword">var</span> id = <span class="built_in">setTimeout</span>(code[,delay])</span><br></pre></td></tr></table></figure><h4 id="å‚æ•°"><a class="header-anchor" href="#å‚æ•°">Â¶</a>å‚æ•°</h4><p><code>function</code></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/function"><code>function</code></a> æ˜¯ä½ æƒ³è¦åœ¨åˆ°æœŸæ—¶é—´(<code>delay</code>æ¯«ç§’)ä¹‹åæ‰§è¡Œçš„<a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function">å‡½æ•°</a>ã€‚</p><p><code>code</code></p><p>è¿™æ˜¯ä¸€ä¸ªå¯é€‰è¯­æ³•ï¼Œä½ å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²è€Œä¸æ˜¯<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/function"><code>function</code></a> ï¼Œåœ¨<code>delay</code>æ¯«ç§’ä¹‹åç¼–è¯‘å’Œæ‰§è¡Œå­—ç¬¦ä¸² (ä½¿ç”¨è¯¥è¯­æ³•æ˜¯<strong>ä¸æ¨èçš„,</strong> åŸå› å’Œä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval"><code>eval()</code></a>ä¸€æ ·ï¼Œæœ‰å®‰å…¨é£é™©)ã€‚</p><p><code>delay </code>å¯é€‰</p><p>å»¶è¿Ÿçš„æ¯«ç§’æ•° (ä¸€ç§’ç­‰äº1000æ¯«ç§’)ï¼Œå‡½æ•°çš„è°ƒç”¨ä¼šåœ¨è¯¥å»¶è¿Ÿä¹‹åå‘ç”Ÿã€‚å¦‚æœçœç•¥è¯¥å‚æ•°ï¼Œdelayå–é»˜è®¤å€¼0ï¼Œæ„å‘³ç€â€œé©¬ä¸Šâ€æ‰§è¡Œï¼Œæˆ–è€…å°½å¿«æ‰§è¡Œã€‚ä¸ç®¡æ˜¯å“ªç§æƒ…å†µï¼Œå®é™…çš„å»¶è¿Ÿæ—¶é—´å¯èƒ½ä¼šæ¯”æœŸå¾…çš„(delayæ¯«ç§’æ•°) å€¼é•¿ï¼ŒåŸå› è¯·æŸ¥çœ‹<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/setTimeout#Reasons_for_delays_longer_than_specified">Reasons for delays longer than specified</a>ã€‚</p><p><code>param1, ..., paramN</code> å¯é€‰</p><p>é™„åŠ å‚æ•°ï¼Œä¸€æ—¦å®šæ—¶å™¨åˆ°æœŸï¼Œå®ƒä»¬ä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/function"><code>function</code></a></p><h4 id="è¿”å›å€¼"><a class="header-anchor" href="#è¿”å›å€¼">Â¶</a>è¿”å›å€¼</h4><p>è¿”å›å€¼<code>timeoutID</code>æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºå®šæ—¶å™¨çš„ç¼–å·ã€‚è¿™ä¸ªå€¼å¯ä»¥ä¼ é€’ç»™<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WindowOrWorkerGlobalScope/clearTimeout"><code>clearTimeout()</code></a>æ¥å–æ¶ˆè¯¥å®šæ—¶å™¨ã€‚</p><h4 id="ç”¨é€”"><a class="header-anchor" href="#ç”¨é€”">Â¶</a>ç”¨é€”</h4><p>ä¸¾ä¸ªä¾‹å­ï¼Œä¸‰ç§’åè·³è½¬æ–°é¡µé¢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    location.<span class="property">href</span> = <span class="string">&quot;url&quot;</span></span><br><span class="line">&#125;,<span class="number">3000</span>)</span><br></pre></td></tr></table></figure><p>åœ¨å‡½æ•°æ‰§è¡Œå‰å–æ¶ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> key;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">    key = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;fn&quot;</span>) &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myStopFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ åªæ˜¯æŒæ¡äº†ä¸Šé¢çš„ç”¨æ³•ï¼Œä¸äº†è§£å®ƒçš„åŸç†ï¼Œå°±ä¼šçŠ¯ä¸€äº›é”™è¯¯</p><p>æ¯”å¦‚ä¸€ä¸ªå¸¸è§çš„é¢è¯•é¢˜</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for (var i = 1;i &lt;= 5;i ++) &#123;</span><br><span class="line">  setTimeout(function timer() &#123;</span><br><span class="line">      console.log(i)</span><br><span class="line">  &#125;,i * 1000)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é—®æ‰“å°å‡ºæ¥çš„æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>å¦‚æœå¯¹é—­åŒ…å’Œä½œç”¨åŸŸä¸äº†è§£çš„åŒå­¦ä¼šä»¥ä¸ºæ˜¯æ¯éš”ä¸€ç§’å°±è¾“å‡º1,2,3,4,5ã€‚ä½†å®é™…ä¸Šæ˜¯æ¯éš”ä¸€ç§’è¾“å‡ºäº†6ã€‚</p><p>åŸå› å°±æ˜¯ä½œç”¨åŸŸï¼Œåœ¨<code>javascript</code>é‡Œé¢æ²¡æœ‰å—ä½œç”¨åŸŸï¼Œå› æ­¤ï¼Œå½“<code>setTimeout</code>é‡Œé¢çš„å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œæ‰€æœ‰çš„iéƒ½æ˜¯<code>for</code>å¾ªç¯é‡Œé¢çš„<code>i</code>ï¼Œæ­¤æ—¶ï¼Œ<code>i</code>æ˜¯6ã€‚</p><p>å¦å¤–ï¼Œè¯´åˆ°<code>setTimeout</code>å°±ä¸€å®šè¦è¯´ä¸€ä¸‹äº‹ä»¶å¾ªç¯ï¼Œè¿™ä¸ªæ¦‚å¿µæ¯”è¾ƒå¤æ‚ï¼Œä¸‹é¢ç®€å•è¯´ä¸€ä¸‹ï¼Œ</p><p><code>setTimeout</code>è¿è¡Œåï¼Œä¼šæŠŠç¬¬ä¸€ä¸ªå‚æ•°çš„å‡½æ•°åœ¨ç¬¬äºŒä¸ªå‚æ•°è®¾ç½®çš„æ—¶é—´ä¹‹åï¼Œå°†å…¶æ”¾å…¥å¼‚æ­¥é˜Ÿåˆ—é‡Œé¢ï¼Œç„¶åç­‰åˆ°ä¸»çº¿ç¨‹å‡½æ•°æ ˆä¸ºç©ºï¼Œåœ¨æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚</p><p>è¿™é‡Œæœ‰ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œ</p><blockquote><p>HTML5 æ ‡å‡†è§„å®šäº†<code>setTimeout()</code>çš„ç¬¬äºŒä¸ªå‚æ•°çš„æœ€å°å€¼ï¼Œå³æœ€çŸ­é—´éš”ï¼Œä¸å¾—ä½äº4æ¯«ç§’ã€‚å¦‚æœä½äºè¿™ä¸ªå€¼ï¼Œå°±ä¼šè‡ªåŠ¨å¢åŠ ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œè€ç‰ˆæœ¬çš„æµè§ˆå™¨éƒ½å°†æœ€çŸ­é—´éš”è®¾ä¸º10æ¯«ç§’ã€‚</p></blockquote><p>è¿™æ„å‘³ç€ï¼Œå³ä½¿ä½ æŠŠç¬¬äºŒä¸ªå‚æ•°è®¾ç½®ä¸º0ï¼Œä¹Ÿè¦æœ€å°‘ç­‰ä¸ª4msæ‰èƒ½è¿›å…¥å¼‚æ­¥é˜Ÿåˆ—ã€‚å¦å¤–ï¼Œå°±ç®—è¿›å…¥å¼‚æ­¥é˜Ÿåˆ—,ä¹Ÿè¦ç­‰é˜Ÿåˆ—é‡Œé¢å…¶ä»–æœªæ‰§è¡Œçš„å‡½æ•°æ‰§è¡Œå®Œï¼Œå› æ­¤ï¼Œå¯ä¸è¦ä»¥ä¸ºåªè¦è®¾ç½®ä¸€ä¸ªæ—¶é—´ï¼Œå°±ä¸€å®šå¯ä»¥å‡†æ—¶æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚</p><p>é‚£ä¹ˆï¼Œæ€ä¹ˆè®©ä¸Šé¢çš„ä»£ç æ‰“å°å‡º0,1,2,3,4,5å‘¢ï¼Ÿ</p><p>å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•ã€‚</p><p>1.<code>es6</code>çš„<code>let</code>å…³é”®è¯</p><p><code>let</code>æ˜¯<code>es6</code>çš„å—ä½œç”¨åŸŸçš„å£°æ˜å…³é”®è¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;<span class="number">5</span>;i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> <span class="title function_">timer</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">  &#125;, i * <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.åˆ©ç”¨é—­åŒ…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;<span class="number">5</span>;i ++) &#123;</span><br><span class="line">  (<span class="keyword">function</span>(<span class="params">i</span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> <span class="title function_">timer</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">    &#125;, i * <span class="number">1000</span>);</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.åˆ©ç”¨ç¬¬ä¸‰ä¸ªå‚æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>( <span class="keyword">function</span> <span class="title function_">timer</span>(<span class="params">i</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);    </span><br><span class="line">   &#125;, i*<span class="number">1000</span>,i );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>tips:</p><p><code>setTimeout</code>ç¬¬ä¸€ä¸ªå‚æ•°å‡½æ•°é‡Œé¢çš„<code>this</code>æ˜¯<code>window</code>ã€‚</p><p>###ã€€setInterval</p><p><strong>setInterval()</strong> æ–¹æ³•é‡å¤è°ƒç”¨ä¸€ä¸ªå‡½æ•°æˆ–æ‰§è¡Œä¸€ä¸ªä»£ç æ®µï¼Œåœ¨æ¯æ¬¡è°ƒç”¨ä¹‹é—´å…·æœ‰å›ºå®šçš„æ—¶é—´å»¶è¿Ÿã€‚</p><p>è¯­æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> intervalID = <span class="variable language_">window</span>.<span class="built_in">setInterval</span>(func, delay[, param1, param2, ...]);</span><br><span class="line"><span class="keyword">let</span> intervalID = <span class="variable language_">window</span>.<span class="built_in">setInterval</span>(code, delay);</span><br></pre></td></tr></table></figure><p>å‚æ•°</p><ul><li><code>intervalID</code> æ˜¯æ­¤é‡å¤æ“ä½œçš„å”¯ä¸€è¾¨è¯†ç¬¦ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°ä¼ ç»™<code>clearInterval``()</code>ã€‚</li><li><code>func</code> æ˜¯ä½ æƒ³è¦é‡å¤è°ƒç”¨çš„å‡½æ•°ã€‚</li><li><code>code</code> æ˜¯å¦ä¸€ç§è¯­æ³•çš„åº”ç”¨ï¼Œæ˜¯æŒ‡ä½ æƒ³è¦é‡å¤æ‰§è¡Œçš„ä¸€æ®µå­—ç¬¦ä¸²æ„æˆçš„ä»£ç (ä½¿ç”¨è¯¥è¯­æ³•æ˜¯<strong>ä¸æ¨è</strong>çš„ï¼Œä¸æ¨èçš„åŸå› å’Œ<a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval#Don't_use_eval!">eval()</a>ä¸€æ ·)ã€‚</li><li><code>delay</code> æ˜¯æ¯æ¬¡å»¶è¿Ÿçš„æ¯«ç§’æ•° (ä¸€ç§’ç­‰äº1000æ¯«ç§’)ï¼Œå‡½æ•°çš„æ¯æ¬¡è°ƒç”¨ä¼šåœ¨è¯¥å»¶è¿Ÿä¹‹åå‘ç”Ÿã€‚å’Œ<a href="https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout#Minimum_delay_and_timeout_nesting">setTimeout</a>ä¸€æ ·ï¼Œå®é™…çš„å»¶è¿Ÿæ—¶é—´å¯èƒ½ä¼šç¨é•¿ä¸€ç‚¹ã€‚</li></ul><p>è¿”å›å€¼</p><p>è¿”å›ä¸€ä¸ª intervalIDã€‚å¯ä»¥ç”¨clearIntervalå‡½æ•°æ¥å–æ¶ˆå®šæ—¶ä»»åŠ¡ã€‚</p><p><strong>è¿™é‡Œéœ€è¦æ³¨æ„ï¼ŒäºsetTimeoutè¿”å›çš„idå…¬ç”¨ä¸€ä¸ªidæ± </strong></p><p>é€šå¸¸ï¼Œè¿™ä¸ªå‡½æ•°ç”¨æ¥æ‰§è¡Œå‘¨æœŸæ‰§è¡Œçš„å‡½æ•°ï¼Œæ¯”å¦‚åŠ¨ç”»ä¹‹ç±»çš„æ•ˆæœã€‚</p><p>mdné‡Œé¢æœ‰ä¸ªæ‰“å­—æœºæ•ˆæœçš„ä¾‹å­ã€‚</p><p><a href="https://mdn.mozillademos.org/files/3997/typewriter.html">æ‰“å­—æœºæ•ˆæœ</a></p><p>å’Œ<code>setTimeout</code>ä¸€æ ·ï¼Œä¹Ÿæ˜¯åŠ å…¥åˆ°å¼‚æ­¥é˜Ÿåˆ—é‡Œï¼Œç­‰å¾…åˆé€‚çš„æ—¶æœºè¿è¡Œã€‚</p><blockquote><p>å½“ä½¿ç”¨<code>setInterval</code>æ—¶,ä»…å½“(åœ¨é˜Ÿåˆ—ä¸­)æ²¡æœ‰è¯¥å®šæ—¶å™¨çš„ä»»ä½•å…¶ä»–ä»£ç å®ä¾‹æ—¶,æ‰å°†å®šæ—¶å™¨ä»£ç æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­,å¼•ç”¨JavaScripté«˜çº§ç¨‹åºè®¾è®¡ç¬¬ä¸‰ç‰ˆä¹¦ä¸­è¯­å¥</p></blockquote><p>(å³ï¼šå½“å‰ä¸€ä¸ªå®šæ—¶å™¨ä»£ç æ‰§è¡Œæ—¶,ç´§è·Ÿåé¢çš„ç¬¬ä¸€ä¸ªå®šæ—¶å™¨ä»£ç å°†æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­,ç­‰å¾…æ‰§è¡Œ,å†åé¢çš„å®šæ—¶å™¨ä»£ç ä¸ä¼šæ·»åŠ åˆ°é˜Ÿåˆ—ä¸­)</p><p>æ‰€ä»¥ï¼Œå¦‚æœä½ çš„å‡½æ•°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰æ‰§è¡Œæ—¶é—´æ¯”è¾ƒé•¿ï¼Œä½†æ˜¯ä½ çš„æ‰§è¡Œé—´éš”æ—¶é—´è®¾ç½®çš„æ¯”è¾ƒçŸ­ï¼Œå¯ä¸è¦ä»¥ä¸ºå¯ä»¥ç²¾å‡†çš„åœ¨é¢„æ–™çš„æ—¶é—´ç‚¹ä¼šæ‰§è¡Œè®¾ç½®çš„å‡½æ•°ã€‚</p><p>æ­¤å¤–ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¹Ÿæœ‰ä¸€ä¸ªæœ€çŸ­çš„é»˜è®¤å‚æ•°ï¼Œåœ¨<code>chrome</code>é‡Œé¢æ˜¯7msã€‚</p><p>å½“å®šæ—¶å™¨ä»£ç æ‰§è¡Œæ—¶é—´è¶…è¿‡æŒ‡å®šé—´éš”,é‚£ä¹ˆæŸäº›å®šæ—¶å™¨ä»£ç å°±ä¼šè¢«è·³è¿‡(å³åé¢çš„å®šæ—¶å™¨ä»£ç ä¸ä¼šè¢«æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­),å‰ä¸€ä¸ªå®šæ—¶å™¨ä»£ç æ‰§è¡Œå®Œæ¯•å,é˜Ÿåˆ—ä¸­çš„å®šæ—¶å™¨ä»£ç ç«‹åˆ»æ‰§è¡Œ,å„å®šæ—¶å™¨ä¹‹é—´çš„ä»£ç æ‰§è¡Œæ²¡æœ‰é—´éš”ã€‚è¿™æ—¶ï¼Œéœ€è¦ä½¿ç”¨é“¾å¼<code>setTimeout</code>ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function()&#123;</span><br><span class="line">    //è¦æ‰§è¡Œçš„ä»£ç  </span><br><span class="line">    setTimeout(arguments.callee,2000);                   </span><br><span class="line">&#125;,2000);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å°±æ˜¯ç”¨<code>setTimeout</code>æ¥æ¨¡æ‹Ÿ<code>setInterval</code>,å¦‚æœé¢è¯•å®˜é—®ä½ æ€ä¹ˆç”¨<code>setTimeout</code>æ¥è§£å†³å®šæ—¶å™¨é—®é¢˜ï¼Œå¯ä»¥ç”¨ä¸Šé¢çš„ä»£ç æ¥å›ç­”å“¦ã€‚</p><p>å¦‚æœè¦æ±‚åœ¨æ¯éš”ä¸€ä¸ªå›ºå®šçš„æ—¶é—´é—´éš”åå°±ç²¾ç¡®åœ°æ‰§è¡ŒæŸåŠ¨ä½œï¼Œé‚£ä¹ˆæœ€å¥½ä½¿ç”¨<code>setInterval</code>ï¼Œ</p><p>æ¯”å¦‚å‡½æ•°æ‰§è¡Œçš„æ—¶é—´æ¯”è¾ƒçŸ­çš„ï¼Œç”¨æ¥å®ç°åŠ¨ç”»æ•ˆæœã€‚</p><p>å¦‚æœæ¯æ¬¡å‡½æ•°çš„è°ƒç”¨éœ€è¦ç¹é‡çš„è®¡ç®—ä»¥åŠå¾ˆé•¿çš„å¤„ç†æ—¶é—´ï¼Œè€Œä¸”ä¸å¸Œæœ›ä»–ä»¬ä¹‹é—´äº’ç›¸å¹²æ‰°ï¼Œé‚£ä¹ˆæœ€å¥½ä½¿ç”¨<code>setTimeout</code>ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> javaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿«ä¹æ•°</title>
      <link href="/posts/9ba82001/"/>
      <url>/posts/9ba82001/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¿«ä¹å°±å®Œäº‹äº†ã€‚</p></blockquote><h3 id="å¿«ä¹æ•°æ˜¯ä»€ä¹ˆ"><a class="header-anchor" href="#å¿«ä¹æ•°æ˜¯ä»€ä¹ˆ">Â¶</a>å¿«ä¹æ•°æ˜¯ä»€ä¹ˆ</h3><p>ä¸€ä¸ªâ€œå¿«ä¹æ•°â€å®šä¹‰ä¸ºï¼šå¯¹äºä¸€ä¸ªæ­£æ•´æ•°ï¼Œæ¯ä¸€æ¬¡å°†è¯¥æ•°æ›¿æ¢ä¸ºå®ƒæ¯ä¸ªä½ç½®ä¸Šçš„æ•°å­—çš„å¹³æ–¹å’Œï¼Œç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°è¿™ä¸ªæ•°å˜ä¸º 1ï¼Œä¹Ÿå¯èƒ½æ˜¯æ— é™å¾ªç¯ä½†å§‹ç»ˆå˜ä¸åˆ° 1ã€‚å¦‚æœå¯ä»¥å˜ä¸º 1ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±æ˜¯å¿«ä¹æ•°ã€‚</p><p>ç¤ºä¾‹:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: <span class="number">19</span></span><br><span class="line">è¾“å‡º: <span class="literal">true</span></span><br><span class="line">è§£é‡Š: </span><br><span class="line"><span class="number">1</span>^<span class="number">2</span> + <span class="number">9</span>^<span class="number">2</span> = <span class="number">82</span></span><br><span class="line"><span class="number">8</span>^<span class="number">2</span> + <span class="number">2</span>^<span class="number">2</span> = <span class="number">68</span></span><br><span class="line"><span class="number">6</span>^<span class="number">2</span> + <span class="number">8</span>^<span class="number">2</span> = <span class="number">100</span></span><br><span class="line"><span class="number">1</span>^<span class="number">2</span> + <span class="number">0</span>^<span class="number">2</span> + <span class="number">0</span>^<span class="number">2</span> = <span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™ä¸€ä¸ªç®—æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯â€œå¿«ä¹æ•°â€ã€‚"><a class="header-anchor" href="#ç¼–å†™ä¸€ä¸ªç®—æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯â€œå¿«ä¹æ•°â€ã€‚">Â¶</a>ç¼–å†™ä¸€ä¸ªç®—æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯â€œå¿«ä¹æ•°â€ã€‚</h3><p>æ€è·¯ï¼Œä¸æ–­çš„æ±‚è¾“å…¥æ•°å­—æ¯ä¸ªä½ç½®å¹³æ–¹å’Œï¼Œç„¶åçœ‹æ˜¯å¦ç­‰äº1ï¼Œç­‰äº1å°±æ˜¯å¿«ä¹æ•°ï¼Œé—®é¢˜æ˜¯ï¼Œä»€ä¹ˆæ—¶å€™åˆ¤æ–­falseã€‚<br>ç­”æ¡ˆå°±æ˜¯å‡ºç°æ— çº¿å¾ªç¯çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯å‡ºç°é‡å¤çš„æ•°å­—ï¼Œå¿…å®šä¼šè¿›è¡Œä¸‹ä¸€æ¬¡å¾ªç¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isHappy</span>(<span class="params">self, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        already = <span class="built_in">set</span>()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> n != <span class="number">1</span>:</span><br><span class="line">            nums = <span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> n &gt; <span class="number">0</span>:</span><br><span class="line">                temp = n % <span class="number">10</span></span><br><span class="line">                nums = nums + temp * temp</span><br><span class="line">                n = n // <span class="number">10</span></span><br><span class="line">            <span class="keyword">if</span> nums <span class="keyword">in</span> already:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                already.add(nums)</span><br><span class="line">                n = nums</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span>    </span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘çš„å¾ªç¯éå†æ–¹æ³•</title>
      <link href="/posts/8925371c/"/>
      <url>/posts/8925371c/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘ç¨å¾®åˆ·äº†ä¸€ä¸‹<code>leetcode</code>ï¼Œæƒ³å·©å›ºä¸€ä¸‹ç¼–ç¨‹åŠŸåº•ï¼Œä½†æ˜¯å‘ç°å·¥ä½œåçš„å¾ˆå°‘ç”¨åˆ°åœ¨å­¦æ ¡æ—¶ç”¨çš„æ•°æ®ç»“æ„ï¼Œå¥½å¤šéƒ½å¿˜äº†ï¼Œåœ¨è¿™é‡Œåšä¸‹è®°å½•ã€‚</p></blockquote><h3 id="1-äºŒå‰æ ‘çš„å‰åºï¼Œä¸­åºï¼Œååºéå†"><a class="header-anchor" href="#1-äºŒå‰æ ‘çš„å‰åºï¼Œä¸­åºï¼Œååºéå†">Â¶</a>1.äºŒå‰æ ‘çš„å‰åºï¼Œä¸­åºï¼Œååºéå†</h3><p>å‰åºéå†æ–¹å‘æ˜¯ ä¸­ å·¦ å³</p><p>ä¸­åºéå†æ–¹å‘æ˜¯ å·¦ ä¸­ å³</p><p>ååºéå†æ–¹å‘æ˜¯ å³ å·¦ ä¸­</p><p>æ ¹æ®ä¸Šé¢çš„å®šä¹‰ï¼Œçœ‹çš„å‡ºæ¥å¯¹äºå·¦å³èŠ‚ç‚¹ï¼Œé¡ºåºæ˜¯ä¸å˜çš„ï¼Œåªæ˜¯ä¸­é—´èŠ‚ç‚¹å‡ºç°çš„ä½ç½®æ”¹å˜ã€‚æ‰€ä»¥ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªé˜²æ­¢å¿˜è®°çš„æŠ€å·§ã€‚</p><h3 id="2-ä»£ç å®ç°"><a class="header-anchor" href="#2-ä»£ç å®ç°">Â¶</a>2.ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰èŠ‚ç‚¹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TreeNode</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x</span>):</span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="literal">None</span></span><br><span class="line">        self.right = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡†å¤‡æµ‹è¯•æ•°æ®</span></span><br><span class="line">a = TreeNode(<span class="number">1</span>)</span><br><span class="line">a.left = TreeNode(<span class="number">2</span>)</span><br><span class="line">a.left.left = TreeNode(<span class="number">4</span>)</span><br><span class="line">a.left.right = TreeNode(<span class="number">5</span>)</span><br><span class="line">a.right = TreeNode(<span class="number">3</span>)</span><br><span class="line">a.right.left = TreeNode(<span class="number">6</span>)</span><br><span class="line">a.right.right = TreeNode(<span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inorderTraversal</span>(<span class="params">self,root</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        é€’å½’å®ç°ä¸­åºéå†</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        <span class="keyword">return</span> self.inorderTraversal(root.left) + [root.val] + self.inorderTraversal(root.right)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inerderTraversalLoop</span>(<span class="params">self,root</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        å¾ªç¯å®ç°ä¸­åºéå†</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        result = []</span><br><span class="line">        stack = []</span><br><span class="line">        curr = root</span><br><span class="line">        <span class="keyword">while</span> curr <span class="keyword">or</span> stack:</span><br><span class="line">            <span class="keyword">if</span> curr:</span><br><span class="line">                stack.append(curr)</span><br><span class="line">                curr=curr.left</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                curr = stack.pop()</span><br><span class="line">                result.append(curr.val)</span><br><span class="line">                curr = curr.right</span><br><span class="line">        <span class="keyword">return</span> result        </span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">predorderTraversal</span>(<span class="params">self, root</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        é€’å½’å®ç°å‰åºéå†</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        <span class="keyword">return</span> [root.val] + self.predorderTraversal(root.left) + self.predorderTraversal(root.right)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">predorderTraversalLoop</span>(<span class="params">self,root</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        å¾ªç¯å®ç°å‰åºéå†</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        result = []</span><br><span class="line">        stack = []</span><br><span class="line">        curr = root</span><br><span class="line">        <span class="keyword">while</span> curr <span class="keyword">or</span> stack:</span><br><span class="line">            <span class="keyword">if</span> curr:</span><br><span class="line">                result.append(curr.val)</span><br><span class="line">                stack.append(curr.right)</span><br><span class="line">                curr = curr.left</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                curr = stack.pop()</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">return</span> result         </span><br><span class="line">            </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">postorderTraversal</span>(<span class="params">self,root</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        é€’å½’å®ç°åç»­éå†</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        <span class="keyword">return</span> self.postorderTraversal(root.left) + self.postorderTraversal(root.right) + [root.val]</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">postorderTraversalLoop</span>(<span class="params">self,root</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        å¾ªç¯å®ç°åç»­éå†</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        result = []</span><br><span class="line">        stack = []</span><br><span class="line">        curr = root</span><br><span class="line">        <span class="keyword">while</span> curr <span class="keyword">or</span> stack:</span><br><span class="line">            <span class="keyword">if</span> curr:</span><br><span class="line">               result.append(curr.val)</span><br><span class="line">               stack.append(curr.left)</span><br><span class="line">               curr = curr.right</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">               curr = stack.pop()</span><br><span class="line">        <span class="keyword">return</span> result[::-<span class="number">1</span>]     </span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    s = Solution()</span><br><span class="line">    <span class="built_in">print</span>(s.inorderTraversal(a))</span><br><span class="line">    <span class="built_in">print</span>(s.inerderTraversalLoop(a))</span><br><span class="line">    <span class="built_in">print</span>(s.predorderTraversal(a))</span><br><span class="line">    <span class="built_in">print</span>(s.predorderTraversalLoop(a))</span><br><span class="line">    <span class="built_in">print</span>(s.postorderTraversal(a))</span><br><span class="line">    <span class="built_in">print</span>(s.postorderTraversalLoop(a))</span><br><span class="line"><span class="comment"># [4, 2, 5, 1, 6, 3, 7]</span></span><br><span class="line"><span class="comment"># [4, 2, 5, 1, 6, 3, 7]</span></span><br><span class="line"><span class="comment"># [1, 2, 4, 5, 3, 6, 7]</span></span><br><span class="line"><span class="comment"># [1, 2, 4, 5, 3, 6, 7]</span></span><br><span class="line"><span class="comment"># [4, 5, 2, 6, 7, 3, 1]</span></span><br><span class="line"><span class="comment"># [4, 5, 2, 6, 7, 3, 1]   </span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢å°±æ˜¯å®ç°ä»£ç ã€‚</p><p>å…ˆè¯´ä¸‹é€’å½’å®ç°ï¼Œæ ¹æ®ç¬¬ä¸€èŠ‚çš„éå†é¡ºåºå®šä¹‰ï¼Œè¿™é‡Œå¾ˆç®€å•å°±å¯ä»¥å†™å‡ºé€’å½’ç¨‹åºï¼Œåªæ˜¯è¿”å›çš„æ—¶å€™ï¼Œæ›´æ”¹ä¸‹ä¸­é—´èŠ‚ç‚¹çš„ä½ç½®å°±å¥½ã€‚</p><p>åœ¨è¯´ä¸‹å¾ªç¯å®ç°ï¼Œåœ¨<code>LeetCode</code>é‡Œé¢ï¼Œå¾ªç¯éƒ½æ˜¯<code>hard</code>å’Œ<code>middle</code>çš„é¢˜ï¼Œå¯è§ï¼Œç”¨å¾ªç¯å®ç°èµ·æ¥å¹¶ä¸å®¹æ˜“ã€‚</p><p>ä¸»è¦æ˜¯è¦åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢å®ç°éå†åˆ°æ•´ä¸ªæ ‘å½¢ç»“æ„ï¼Œå¦‚æœä½ èƒ½æƒ³åˆ°ç”¨<strong>æ ˆ</strong>ï¼ˆ<code>stack</code>ï¼‰æ¥å­˜èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä½ åº”è¯¥å·®ä¸å¤šå¯¹æ•°æ®ç»“æ„è¿ç”¨æœ‰ä¸€å®šç»éªŒäº†ã€‚</p><p>å¦‚ä¸‹çš„äºŒå‰æ ‘</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">      <span class="number">1</span></span><br><span class="line">   <span class="number">2</span>      <span class="number">3</span></span><br><span class="line"><span class="number">4</span>    <span class="number">5</span></span><br></pre></td></tr></table></figure><p>å¯¹äºä¸­åºéå†</p><p>æ¯æ¬¡å°†å½“å‰ç»“ç‚¹<code>curr</code>çš„å·¦å­ç»“ç‚¹pushåˆ°æ ˆä¸­ï¼Œç›´åˆ°å½“å‰ç»“ç‚¹<code>curr</code>ä¸ºNoneã€‚è¿™æ—¶ï¼Œ<code>pop</code>å‡ºæ ˆé¡¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè®¾å…¶ä¸ºå½“å‰ç»“ç‚¹ï¼Œå¹¶è¾“å‡ºè¯¥ç»“ç‚¹çš„<code>val</code>å€¼ï¼Œä¸”å¼€å§‹éå†è¯¥ç»“ç‚¹çš„å³å­æ ‘ã€‚å½“<code>stack</code>å’Œ<code>curr</code>éƒ½ä¸ºç©ºçš„æ—¶å€™ï¼Œç»“æŸå¾ªç¯ã€‚</p><p>å¯¹äºå‰åºéå†</p><p>è¾“å‡ºå½“å‰ç»“ç‚¹<code>curr</code>çš„<code>val</code>ï¼Œå¹¶å°†å³å­ç»“ç‚¹<code>push</code>åˆ°æ ˆä¸­ï¼Œç„¶åå°†å·¦å­ç»“ç‚¹è®¾ä¸ºå½“å‰ç»“ç‚¹ã€‚å…¥æ ˆå’Œå‡ºæ ˆæ¡ä»¶ï¼ˆå½“å‰ç»“ç‚¹<code>curr</code>ä¸ä¸º<code>None</code>æ—¶ï¼Œæ¯ä¸€æ¬¡å¾ªç¯å°†å½“å‰ç»“ç‚¹<code>curr</code>å…¥æ ˆï¼›å½“å‰ç»“ç‚¹<code>curr</code>ä¸º<code>None</code>æ—¶ï¼Œåˆ™å‡ºæ ˆä¸€ä¸ªç»“ç‚¹ï¼‰ä»¥åŠå¾ªç¯ç»“æŸæ¡ä»¶ï¼ˆæ•´ä¸ªå¾ªç¯åœ¨<code>stack</code>å’Œ<code>curr</code>çš†ä¸º<code>None</code>çš„æ—¶å€™ç»“æŸï¼‰ä¸ä¸­åºéå†ä¸€æ¨¡ä¸€æ ·ã€‚</p><p>å¯¹äºååºéå†</p><p>ååºéå†åœ¨<code>leetcode</code>ä¸Šæ˜¯<code>hard</code>éš¾åº¦çš„é¢˜ï¼Œè¿™é‡Œæœ‰ä¸ªæŠ€å·§ï¼Œååºæ˜¯å·¦å³ä¸­ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸­å³å·¦çš„æ–¹å¼éå†ï¼Œç„¶ååå‘è¾“å‡ºå°±å¯ä»¥äº†ã€‚è€Œä¸”ä¸­å³å·¦ä¸å°±æ˜¯å‰åºéå†å·¦å³äº’ç›¸æ¢ä¸‹å—ï¼Ÿ</p><h3 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“">Â¶</a>æ€»ç»“</h3><p>äºŒå‰æ ‘çš„å¾ªç¯éå†ï¼Œè¿˜æ˜¯è¦å€ŸåŠ©äºæ ˆè¿™ä¸ªéå¸¸æœ‰ç”¨çš„æ•°æ®ç»“æ„ï¼Œæœ‰æ—¶æˆ‘ä»¬éƒ½æ˜ç™½ï¼Œæ¯”å¦‚ï¼Œæ ˆå•Šï¼Œé˜Ÿåˆ—å•Šï¼Œè¿™äº›ç»“æ„æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Œä½†æ˜¯ï¼Œè¦çœŸæ­£çµæ´»çš„ä½¿ç”¨è¿™äº›æ•°æ®ç»“æ„ï¼Œè¿˜éœ€è¦å¤šå¤šç»ƒä¹ ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> äºŒå‰æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘å¸ƒè®¢é˜…æ¨¡å¼çš„javascriptå®ç°</title>
      <link href="/posts/4ec38d83/"/>
      <url>/posts/4ec38d83/</url>
      
        <content type="html"><![CDATA[<h3 id="å‘å¸ƒè®¢é˜…æ¨¡å¼"><a class="header-anchor" href="#å‘å¸ƒè®¢é˜…æ¨¡å¼">Â¶</a>å‘å¸ƒè®¢é˜…æ¨¡å¼</h3><p>åœ¨<a href="https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84">è½¯ä»¶æ¶æ„</a>ä¸­ï¼Œ<strong>å‘å¸ƒ-è®¢é˜…</strong>æ˜¯ä¸€ç§<a href="https://zh.wikipedia.org/wiki/%E6%B6%88%E6%81%AF">æ¶ˆæ¯</a><a href="https://zh.wikipedia.org/wiki/%E8%8C%83%E5%BC%8F">èŒƒå¼</a>ï¼Œæ¶ˆæ¯çš„å‘é€è€…ï¼ˆç§°ä¸ºå‘å¸ƒè€…ï¼‰ä¸ä¼šå°†æ¶ˆæ¯ç›´æ¥å‘é€ç»™ç‰¹å®šçš„æ¥æ”¶è€…ï¼ˆç§°ä¸ºè®¢é˜…è€…ï¼‰ã€‚è€Œæ˜¯å°†å‘å¸ƒçš„æ¶ˆæ¯åˆ†ä¸ºä¸åŒçš„ç±»åˆ«ï¼Œæ— éœ€äº†è§£å“ªäº›è®¢é˜…è€…ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å¯èƒ½å­˜åœ¨ã€‚åŒæ ·çš„ï¼Œè®¢é˜…è€…å¯ä»¥è¡¨è¾¾å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªç±»åˆ«çš„å…´è¶£ï¼Œåªæ¥æ”¶æ„Ÿå…´è¶£çš„æ¶ˆæ¯ï¼Œæ— éœ€äº†è§£å“ªäº›å‘å¸ƒè€…ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å­˜åœ¨ã€‚</p><p>å‘å¸ƒ/è®¢é˜…æ˜¯<a href="https://zh.wikipedia.org/wiki/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97">æ¶ˆæ¯é˜Ÿåˆ—</a>èŒƒå¼çš„å…„å¼Ÿï¼Œé€šå¸¸æ˜¯æ›´å¤§çš„<a href="https://zh.wikipedia.org/w/index.php?title=%E9%9D%A2%E5%90%91%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6&amp;action=edit&amp;redlink=1">é¢å‘æ¶ˆæ¯ä¸­é—´ä»¶</a>ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚å¤§å¤šæ•°æ¶ˆæ¯ç³»ç»Ÿåœ¨<a href="https://zh.wikipedia.org/wiki/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3">API</a>ä¸­åŒæ—¶æ”¯æŒæ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹å’Œå‘å¸ƒ/è®¢é˜…æ¨¡å‹ï¼Œä¾‹å¦‚<a href="https://zh.wikipedia.org/wiki/Java%E6%B6%88%E6%81%AF%E6%9C%8D%E5%8A%A1">Javaæ¶ˆæ¯æœåŠ¡</a>ï¼ˆJMSï¼‰ã€‚</p><p>è¿™ç§æ¨¡å¼æä¾›äº†æ›´å¤§çš„ç½‘ç»œ<a href="https://zh.wikipedia.org/wiki/%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7">å¯æ‰©å±•æ€§</a>å’Œæ›´åŠ¨æ€çš„<a href="https://zh.wikipedia.org/wiki/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91">ç½‘ç»œæ‹“æ‰‘</a>ï¼ŒåŒæ—¶ä¹Ÿé™ä½äº†å¯¹å‘å¸ƒè€…å’Œå‘å¸ƒæ•°æ®çš„ç»“æ„ä¿®æ”¹çš„çµæ´»æ€§ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ol><li>æ¾è€¦åˆï¼šå‘å¸ƒè€…ä¸è®¢é˜…è€…<a href="https://zh.wikipedia.org/wiki/%E6%9D%BE%E8%80%A6%E5%90%88">æ¾è€¦åˆ</a>ï¼Œç”šè‡³ä¸éœ€è¦çŸ¥é“å®ƒä»¬çš„å­˜åœ¨ã€‚</li><li>å¯æ‰©å±•æ€§ï¼šé€šè¿‡å¹¶è¡Œæ“ä½œï¼Œæ¶ˆæ¯ç¼“å­˜ï¼ŒåŸºäºæ ‘æˆ–åŸºäºç½‘ç»œçš„è·¯ç”±ç­‰æŠ€æœ¯ï¼Œå‘å¸ƒ/è®¢é˜…æä¾›äº†æ¯”ä¼ ç»Ÿçš„å®¢æˆ·ç«¯â€“æœåŠ¡å™¨æ›´å¥½çš„<a href="https://zh.wikipedia.org/wiki/%E5%8F%AF%E6%89%A9%E6%94%BE%E6%80%A7">å¯æ‰©å±•æ€§</a>ã€‚</li></ol><h3 id="JavaScripté‡Œçš„å‘å¸ƒè®¢é˜…æ¨¡å¼"><a class="header-anchor" href="#JavaScripté‡Œçš„å‘å¸ƒè®¢é˜…æ¨¡å¼">Â¶</a><code>JavaScript</code>é‡Œçš„å‘å¸ƒè®¢é˜…æ¨¡å¼</h3><p>åœ¨<code>dom</code>äº‹ä»¶é‡Œé¢ï¼Œæœ‰ä¸€ç§äº‹ä»¶ç›‘å¬çš„æ¨¡å¼å°±æ˜¯åŸºäºå‘å¸ƒè®¢é˜…è®¾è®¡çš„ï¼Œæ¯”å¦‚éå¸¸å¸¸è§çš„ç»™èŠ‚ç‚¹æ·»åŠ ç‚¹å‡»äº‹ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> button = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;button&quot;</span>)</span><br><span class="line">button.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="function">() =&gt;</span> &#123;<span class="title function_">alert</span>(<span class="string">&#x27;click&#x27;</span>)&#125;,<span class="literal">false</span>)</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„å†™æ³•å¥½å¤„å¾ˆæ˜æ˜¾ï¼Œåˆ†ç¦»äº‹ä»¶è§¦å‘å’Œäº‹ä»¶å†…å®¹è§£è€¦ã€‚</p><p>åœ¨<code>node</code>é‡Œé¢ï¼Œè¿˜æœ‰<code>EventEmitter</code>è¿™ä¸ªç±»ï¼Œç”¨æ¥å®ç°å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œæ¥å¤„ç†ä¸åŒå¯¹è±¡ä¹‹é—´çš„äº‹ä»¶è°ƒç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">EventEmitter</span> = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyEventEmitter</span> <span class="keyword">extends</span> <span class="title class_">EventEmitter</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myEventEmitter = <span class="keyword">new</span> <span class="title class_">MyEventEmitter</span></span><br><span class="line">myEventEmitter.<span class="title function_">on</span>(<span class="string">&#x27;event&#x27;</span>,<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;target this event&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">myEventEmitter.<span class="title function_">emit</span>(<span class="string">&quot;event&quot;</span>)</span><br><span class="line"><span class="comment">// target this event</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä¹‹å‰ç”¨<code>BackBone</code>æ„å»ºå•é¡µé¢åº”ç”¨çš„æ—¶å€™ï¼Œå°±å¹¿æ³›ç”¨åˆ°äº†å‘å¸ƒè®¢é˜…æ¨¡å¼å¤„ç†ä¸åŒç»„ä»¶ä¹‹é—´çš„æ•°æ®äº¤äº’ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•å¦‚æœæ»¥ç”¨ï¼Œä¼šé€ æˆäº‹ä»¶äº¤äº’é€»è¾‘çš„ä¸æ¸…æ™°ï¼Œæ‰€ä»¥ï¼Œçˆ¶å­ç»„ä»¶æ•°æ®äº¤äº’è¿˜æ˜¯æ¨èç”¨å›è°ƒçš„æ–¹å¼æ¥åšã€‚</p><h3 id="æ€ä¹ˆå®ç°eventEmitter"><a class="header-anchor" href="#æ€ä¹ˆå®ç°eventEmitter">Â¶</a>æ€ä¹ˆå®ç°<code>eventEmitter</code></h3><p>ä¸‹é¢æ˜¯ç®€å•å®ç°<code>eventEmitter</code>çš„<code>javaScript</code>ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">EventEmitter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_event</span> = &#123;&#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">maxListenerNum</span> = <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">on</span> = <span class="keyword">function</span>(<span class="params">type,callback</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> callback !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&#x27;callback must be a function&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">_event</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_event</span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>) <span class="comment">// è¿™é‡Œåˆ¤æ–­ä¸å­˜åœ¨å°±ç”Ÿæˆä¸€ä¸ªï¼Œå¦‚æœæ˜¯ç»§æ‰¿çš„ï¼Œä¸ä¼šç»§æ‰¿è¿™ä¸ª _event</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">_event</span>[type] ) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">_event</span>[type.<span class="property">length</span> &gt; <span class="variable language_">this</span>.<span class="property">maxListenerNum</span>] ) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;too long&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_event</span>[type].<span class="title function_">push</span>(callback)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_event</span>[type] = [callback]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">once</span> = <span class="keyword">function</span> (<span class="params">type,callback</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="title function_">warp</span> = (<span class="params">...args</span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">callback</span>(...args)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">removeListener</span>(type,warp)</span><br><span class="line">    &#125;</span><br><span class="line">    warp.<span class="property">flag</span> = callback</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">on</span>(type,warp)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">removeListener</span> = <span class="keyword">function</span>(<span class="params">type,callback</span>)  &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">_event</span>[type] ) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_event</span>[type].<span class="title function_">splice</span>(<span class="variable language_">this</span>.<span class="property">_event</span>[type].<span class="title function_">indexOf</span>(callback),<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">removeListeners</span> = <span class="keyword">function</span>(<span class="params">type</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_event</span>[type] = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">EventEmitter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">emit</span> = <span class="keyword">function</span>(<span class="params">type,...args</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">_event</span>[type]) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_event</span>[type].<span class="title function_">forEach</span>(<span class="function"><span class="params">fn</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">fn</span>(...args)</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> my = <span class="keyword">new</span> <span class="title class_">EventEmitter</span></span><br><span class="line"></span><br><span class="line">my.<span class="title function_">on</span>(<span class="string">&#x27;a&#x27;</span>,<span class="function">(<span class="params">a</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">my.<span class="title function_">once</span>(<span class="string">&#x27;once&#x27;</span>, <span class="function">(<span class="params">a</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">add</span> = (<span class="params">a,b</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a+b); </span><br><span class="line">&#125;</span><br><span class="line">my.<span class="title function_">on</span>(<span class="string">&#x27;b&#x27;</span>,add)</span><br><span class="line">my.<span class="title function_">emit</span>(<span class="string">&#x27;a&#x27;</span>,<span class="number">1</span>)</span><br><span class="line">my.<span class="title function_">emit</span>(<span class="string">&#x27;a&#x27;</span>,<span class="number">2</span>)</span><br><span class="line">my.<span class="title function_">emit</span>(<span class="string">&#x27;b&#x27;</span>,<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">my.<span class="title function_">emit</span>(<span class="string">&#x27;once&#x27;</span>,<span class="number">1</span>)</span><br><span class="line">my.<span class="title function_">emit</span>(<span class="string">&#x27;once&#x27;</span>,<span class="number">2</span>)</span><br><span class="line">my.<span class="title function_">removeListeners</span>(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">my.<span class="title function_">emit</span>(<span class="string">&#x27;a&#x27;</span>,<span class="number">1</span>)</span><br><span class="line">my.<span class="title function_">removeListener</span>(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">my.<span class="title function_">emit</span>(<span class="string">&#x27;b&#x27;</span>,<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è¾“å‡º</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">2</span></span><br><span class="line"><span class="comment">3</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š</p><p>1.<a href="https://zh.wikipedia.org/zh-hans/%E5%8F%91%E5%B8%83/%E8%AE%A2%E9%98%85">https://zh.wikipedia.org/zh-hans/%E5%8F%91%E5%B8%83/%E8%AE%A2%E9%98%85</a></p><p>2.<a href="https://segmentfault.com/a/1190000015762318">https://segmentfault.com/a/1190000015762318</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> javaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å½»åº•ææ‡‚ajax</title>
      <link href="/posts/e9a05528/"/>
      <url>/posts/e9a05528/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ¯ä¸ªä¼šç”¨<code>jquery</code>çš„äººéƒ½ä¼šç”¨<code>$.ajax</code>å‘èµ·ä¸€ä¸ª<code>ajax</code>è¯·æ±‚ï¼Œç„¶åå†å›è°ƒå‡½æ•°é‡Œé¢å–å¾—è¿”å›çš„æ•°æ®ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„äººéƒ½çŸ¥é“è¿™ä¸ªæµç¨‹é‡Œé¢å‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Œæœ¬æ–‡å°±æ·±å…¥è®¨è®ºä¸‹å…³äº<code>ajax</code>çš„æ‰€æœ‰ï¼ˆå¤§éƒ¨åˆ†ï¼‰ç»†èŠ‚ã€‚</p></blockquote><p>[TOC]</p><h3 id="1-Ajaxå…¶å®æ˜¯æ ‡å‡†"><a class="header-anchor" href="#1-Ajaxå…¶å®æ˜¯æ ‡å‡†">Â¶</a>1.Ajaxå…¶å®æ˜¯æ ‡å‡†</h3><p>å¾ˆå¤šäººè¯¯ä»¥ä¸º<code>XMLHttpRequest</code>å°±æ˜¯<code>Ajax</code>ï¼Œå…¶å®ä¸ç„¶ï¼Œä»–ä»¬ä¸¤ä¸ªæ˜¯ä¸¤ä¸ªä¸åŒç»´åº¦çš„æ¦‚å¿µã€‚</p><p>æœç´¢<code>ajax</code>çš„<code>wiki</code>ï¼Œæ˜¯è¿™æ ·ä»‹ç»çš„ï¼š</p><blockquote><p><strong>AJAX</strong>å³â€œ<strong>Asynchronous JavaScript and XML</strong>â€ï¼ˆå¼‚æ­¥çš„<a href="https://zh.wikipedia.org/wiki/JavaScript">JavaScript</a>ä¸<a href="https://zh.wikipedia.org/wiki/XML">XML</a>æŠ€æœ¯ï¼‰ï¼ŒæŒ‡çš„æ˜¯ä¸€å¥—ç»¼åˆäº†å¤šé¡¹æŠ€æœ¯çš„<a href="https://zh.wikipedia.org/wiki/%E7%80%8F%E8%A6%BD%E5%99%A8">æµè§ˆå™¨</a>ç«¯<a href="https://zh.wikipedia.org/wiki/%E7%B6%B2%E9%A0%81">ç½‘é¡µ</a>å¼€å‘æŠ€æœ¯ã€‚Ajaxçš„æ¦‚å¿µç”±<a href="https://zh.wikipedia.org/wiki/%E5%82%91%E8%A5%BF%C2%B7%E8%A9%B9%E5%A7%86%E5%A3%AB%C2%B7%E8%B3%88%E7%91%9E%E7%89%B9">æ°è¥¿Â·è©¹å§†å£«Â·è´¾ç‘ç‰¹</a>æ‰€æå‡ºã€‚</p></blockquote><h4 id="ajaxæŠ€æœ¯å‘å±•å²"><a class="header-anchor" href="#ajaxæŠ€æœ¯å‘å±•å²">Â¶</a>ajaxæŠ€æœ¯å‘å±•å²</h4><p>â€‹        ä¸Šä¸ªä¸–çºª90å¹´ä»£ï¼Œå‡ ä¹æ‰€æœ‰çš„ç½‘ç«™éƒ½ç”±HTMLé¡µé¢å®ç°ï¼ŒæœåŠ¡å™¨å¤„ç†æ¯ä¸€ä¸ªç”¨æˆ·è¯·æ±‚éƒ½éœ€è¦é‡æ–°åŠ è½½ç½‘é¡µã€‚è¿™æ ·çš„å¤„ç†æ–¹å¼æ•ˆç‡ä¸é«˜ã€‚ç”¨æˆ·çš„ä½“éªŒæ˜¯æ‰€æœ‰é¡µé¢éƒ½ä¼šæ¶ˆå¤±ï¼Œå†é‡æ–°åŠ è½½ï¼Œå³ä½¿åªæ˜¯ä¸€éƒ¨åˆ†é¡µé¢å…ƒç´ æ”¹å˜ä¹Ÿè¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼Œä¸ä»…è¦åˆ·æ–°æ”¹å˜çš„éƒ¨åˆ†ï¼Œè¿æ²¡æœ‰å˜åŒ–çš„éƒ¨åˆ†ä¹Ÿè¦åˆ·æ–°ã€‚è¿™ä¼šåŠ é‡æœåŠ¡å™¨çš„è´Ÿæ‹…ã€‚</p><p>â€‹        è¿™å¯ä»¥ç”¨<a href="https://zh.wikipedia.org/wiki/%E7%95%B0%E6%AD%A5">å¼‚æ­¥</a>åŠ è½½æ¥è§£å†³ã€‚1995å¹´ï¼ŒJAVAè¯­è¨€çš„ç¬¬ä¸€ç‰ˆå‘å¸ƒï¼Œéšä¹‹å‘å¸ƒçš„çš„Java appletsï¼ˆJAVAå°ç¨‹åºï¼‰é¦–æ¬¡å®ç°äº†å¼‚æ­¥åŠ è½½ã€‚æµè§ˆå™¨é€šè¿‡è¿è¡ŒåµŒå…¥ç½‘é¡µä¸­çš„Java appletsä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®ï¼Œä¸å¿…åˆ·æ–°ç½‘é¡µã€‚1996å¹´ï¼ŒInternet Explorerå°†iframeå…ƒç´ åŠ å…¥åˆ°HTMLï¼Œæ”¯æŒå±€éƒ¨åˆ·æ–°ç½‘é¡µã€‚</p><p>â€‹        1998å¹´å‰åï¼ŒOutlook Web Accesså°ç»„å†™æˆäº†å…è®¸<a href="https://zh.wikipedia.org/w/index.php?title=%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%84%9A%E6%9C%AC&amp;action=edit&amp;redlink=1">å®¢æˆ·ç«¯è„šæœ¬</a>å‘é€HTTPè¯·æ±‚ï¼ˆ<a href="https://zh.wikipedia.org/wiki/XMLHTTP">XMLHTTP</a>ï¼‰çš„ç¬¬ä¸€ä¸ªç»„ä»¶ã€‚è¯¥ç»„ä»¶åŸå±äºå¾®è½¯Exchange Serverï¼Œå¹¶ä¸”è¿…é€Ÿåœ°æˆä¸ºäº†Internet Explorer 4.0[<a href="https://zh.wikipedia.org/wiki/AJAX#cite_note-2">2]</a>çš„ä¸€éƒ¨åˆ†ã€‚éƒ¨åˆ†è§‚å¯Ÿå®¶è®¤ä¸ºï¼ŒOutlook Web Accessæ˜¯ç¬¬ä¸€ä¸ªåº”ç”¨äº†AjaxæŠ€æœ¯çš„æˆåŠŸçš„å•†ä¸šåº”ç”¨ç¨‹åºï¼Œå¹¶æˆä¸ºåŒ…æ‹¬Oddpostçš„ç½‘ç»œé‚®ä»¶äº§å“åœ¨å†…çš„è®¸å¤šäº§å“çš„é¢†å¤´ç¾Šã€‚ä½†æ˜¯ï¼Œ2005å¹´åˆï¼Œè®¸å¤šäº‹ä»¶ä½¿å¾—Ajaxè¢«å¤§ä¼—æ‰€æ¥å—ã€‚<a href="https://zh.wikipedia.org/wiki/Google">Google</a>åœ¨å®ƒè‘—åçš„äº¤äº’åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨äº†å¼‚æ­¥é€šè®¯ï¼Œå¦‚<a href="https://zh.wikipedia.org/w/index.php?title=Google%E8%AE%A8%E8%AE%BA%E7%BB%84&amp;action=edit&amp;redlink=1">Googleè®¨è®ºç»„</a>ã€<a href="https://zh.wikipedia.org/wiki/Google%E5%9C%B0%E5%9B%BE">Googleåœ°å›¾</a>ã€<a href="https://zh.wikipedia.org/w/index.php?title=Google%E6%90%9C%E7%B4%A2%E5%BB%BA%E8%AE%AE&amp;action=edit&amp;redlink=1">Googleæœç´¢å»ºè®®</a>ã€<a href="https://zh.wikipedia.org/wiki/Gmail">Gmail</a>ç­‰ã€‚Ajaxè¿™ä¸ªè¯ç”±ã€Š<em>Ajax: A New Approach to Web Applications</em>ã€‹ä¸€æ–‡æ‰€åˆ›ï¼Œè¯¥æ–‡çš„è¿…é€Ÿæµä¼ æé«˜äº†äººä»¬ä½¿ç”¨è¯¥é¡¹æŠ€æœ¯çš„æ„è¯†ã€‚å¦å¤–ï¼Œå¯¹Mozilla/Geckoçš„æ”¯æŒä½¿å¾—è¯¥æŠ€æœ¯èµ°å‘æˆç†Ÿï¼Œå˜å¾—æ›´ä¸ºç®€å•æ˜“ç”¨ã€‚</p><p>â€‹        æ‰€ä»¥<code>ajax</code>æ˜¯ä¸€ç§æŠ€æœ¯æ–¹æ¡ˆï¼Œ<code>XMLHttpRequest</code>æ˜¯<code>ajax</code>åœ¨webç«¯å®ç°æ‰€ä¾èµ–çš„ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯è¿™ä¸ªå¯¹è±¡ä½¿å¾—æµè§ˆå™¨å¯ä»¥å‘å‡º<code>HTTP</code>è¯·æ±‚ä¸æ¥æ”¶<code>HTTP</code>å“åº”ï¼Œæ¥å¼‚æ­¥çš„æ“ä½œç½‘é¡µã€‚</p><p>â€‹        åªæ˜¯ç°åœ¨ï¼Œå¸‚é¢ä¸ŠåŸºæœ¬éƒ½ç”¨<code>XMLHttpRequest</code> æ¥å‘é€<code>ajax</code>è¯·æ±‚ã€‚</p><p>â€‹        <code>es6</code>æ–°å¢äº†<code>fetch</code>æ¥ä»£æ›¿<code>XMLHttpRequest</code> ,æ¯”èµ·<code>XMLHttpRequest</code>å…·æœ‰æ›´å¥½çš„å¯æ‰©å±•æ€§å’Œé«˜æ•ˆæ€§ï¼Œä¸‹æ–‡ä¼šè¯¦ç»†ä»‹ç»ã€‚</p><p>â€‹</p><h3 id="2-XMLHttpRequestä»‹ç»"><a class="header-anchor" href="#2-XMLHttpRequestä»‹ç»">Â¶</a>2.<code>XMLHttpRequest</code>ä»‹ç»</h3><blockquote><p>â€‹       <strong>XMLHTTP</strong>æ˜¯ä¸€ç»„<a href="https://zh.wikipedia.org/wiki/API">API</a>å‡½æ•°é›†ï¼Œå¯è¢«<a href="https://zh.wikipedia.org/wiki/JavaScript">JavaScript</a>ã€JScriptã€<a href="https://zh.wikipedia.org/wiki/VBScript">VBScript</a>ä»¥åŠå…¶å®ƒ<a href="https://zh.wikipedia.org/wiki/Web%E6%B5%8F%E8%A7%88%E5%99%A8">webæµè§ˆå™¨</a>å†…åµŒçš„<a href="https://zh.wikipedia.org/wiki/%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80">è„šæœ¬è¯­è¨€</a>è°ƒç”¨ï¼Œé€šè¿‡<a href="https://zh.wikipedia.org/wiki/HTTP">HTTP</a>åœ¨æµè§ˆå™¨å’Œ<a href="https://zh.wikipedia.org/wiki/Web%E6%9C%8D%E5%8A%A1%E5%99%A8">webæœåŠ¡å™¨</a>ä¹‹é—´æ”¶å‘<a href="https://zh.wikipedia.org/wiki/XML">XML</a>æˆ–å…¶å®ƒæ•°æ®ã€‚XMLHTTPæœ€å¤§çš„å¥½å¤„åœ¨äºå¯ä»¥åŠ¨æ€åœ°æ›´æ–°ç½‘é¡µï¼Œå®ƒæ— éœ€é‡æ–°ä»æœåŠ¡å™¨è¯»å–æ•´ä¸ªç½‘é¡µï¼Œä¹Ÿä¸éœ€è¦å®‰è£…é¢å¤–çš„æ’ä»¶ã€‚è¯¥æŠ€æœ¯è¢«è®¸å¤šç½‘ç«™ä½¿ç”¨ï¼Œä»¥å®ç°å¿«é€Ÿå“åº”çš„åŠ¨æ€ç½‘é¡µåº”ç”¨ã€‚ä¾‹å¦‚ï¼š<a href="https://zh.wikipedia.org/wiki/Google">Google</a>çš„<a href="https://zh.wikipedia.org/wiki/Gmail">Gmail</a>æœåŠ¡ã€Google SuggeståŠ¨æ€æŸ¥æ‰¾ç•Œé¢ä»¥åŠ<a href="https://zh.wikipedia.org/wiki/Google%E5%9C%B0%E5%9B%BE">Google Map</a>åœ°ç†ä¿¡æ¯æœåŠ¡ã€‚</p></blockquote><p>â€‹        ä¸€å¼€å§‹ï¼Œå·¨ç¡¬å…¬å¸å‘æ˜äº†è¿™ä¸ªå¯ä»¥ç”¨æ¥æ„é€ æ— åˆ·æ–°é¡µé¢çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥é€šè¿‡<code>javascript</code>,<code>VBScript</code>æˆ–è€…å…¶ä»–çš„æµè§ˆå™¨å†…ç½®è„šæœ¬è®¿é—®ï¼Œåæ¥å…¶ä»–çš„æµè§ˆå™¨å¼€å‘å…¬å¸ä¹Ÿé€æ­¥å®ç°äº†è¿™ä¸ªæ ‡å‡†å¯¹è±¡ï¼Œåˆ°äº†<code>dom3</code>æ ‡å‡†æ—¶ä»£ï¼Œå®ƒå·²ç»æˆä¸º<a href="https://zh.wikipedia.org/wiki/W3C">W3C</a>æ¨èçš„æ–¹æ³•ã€‚æˆªæ­¢2011å¹´ï¼Œå¤§å¤šæ•°æµè§ˆå™¨å·²ç»æ”¯æŒã€‚äº’è”ç½‘ç¨‹åºè¿æ¥äº†æ— åˆ·æ–°çš„é¡µé¢æ—¶ä»£ï¼Œè¯ç”Ÿäº†ä¸€å¤§æ‰¹ä¼˜ç§€çš„<code>web</code>åº”ç”¨ã€‚</p><p>â€‹ç°ä»£æµè§ˆå™¨åŸºæœ¬éƒ½æ”¯æŒ<code>ajax</code>,ä½†æ˜¯ä»–ä»¬çš„æŠ€æœ¯æ–¹æ¡ˆå´åˆ†ä¸ºä¸¤ç§ï¼š</p><p>â€‹æ ‡å‡†æµè§ˆå™¨é€šè¿‡ <code>XMLHttpRequest</code> å¯¹è±¡å®ç°äº†ajaxçš„åŠŸèƒ½. åªéœ€è¦é€šè¿‡ä¸€è¡Œè¯­å¥ä¾¿å¯åˆ›å»ºä¸€ä¸ªç”¨äºå‘é€ajaxè¯·æ±‚çš„å¯¹è±¡.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br></pre></td></tr></table></figure><p>â€‹IEæµè§ˆå™¨é€šè¿‡<code>XMLHttpRequest</code>æˆ–è€…<code>ActiveXObject</code>å¯¹è±¡åŒæ ·å®ç°äº†ajaxçš„åŠŸèƒ½ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">ActiveXObject</span>(<span class="title class_">ProgID</span>);</span><br><span class="line"><span class="comment">// progIDå¯ä»¥æ˜¯ä¸‹é¢çš„å€¼ï¼Œå¯¹åº”ä¸åŒçš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="title class_">Microsoft</span>.<span class="property">XMLHTTP</span></span><br><span class="line"><span class="title class_">Microsoft</span>.<span class="property">XMLHTTP</span><span class="number">.1</span><span class="number">.0</span></span><br><span class="line"><span class="title class_">Msxml2</span>.<span class="property">ServerXMLHTTP</span></span><br><span class="line"><span class="title class_">Msxml2</span>.<span class="property">ServerXMLHTTP</span><span class="number">.3</span><span class="number">.0</span></span><br><span class="line"><span class="title class_">Msxml2</span>.<span class="property">ServerXMLHTTP</span><span class="number">.4</span><span class="number">.0</span></span><br><span class="line"><span class="title class_">Msxml2</span>.<span class="property">ServerXMLHTTP</span><span class="number">.5</span><span class="number">.0</span></span><br><span class="line"><span class="title class_">Msxml2</span>.<span class="property">ServerXMLHTTP</span><span class="number">.6</span><span class="number">.0</span></span><br><span class="line"><span class="title class_">Msxml2</span>.<span class="property">XMLHTTP</span></span><br><span class="line"><span class="title class_">Msxml2</span>.<span class="property">XMLHTTP</span><span class="number">.3</span><span class="number">.0</span></span><br><span class="line"><span class="title class_">Msxml2</span>.<span class="property">XMLHTTP</span><span class="number">.4</span><span class="number">.0</span></span><br><span class="line"><span class="title class_">Msxml2</span>.<span class="property">XMLHTTP</span><span class="number">.5</span><span class="number">.0</span></span><br><span class="line"><span class="title class_">Msxml2</span>.<span class="property">XMLHTTP</span><span class="number">.6</span><span class="number">.0</span></span><br></pre></td></tr></table></figure><p>â€‹rå¦‚ä½•å–å¾—å…¨å¹³å°å…¼å®¹çš„<code>XMLHttpRequest</code>å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getXHR</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> xhr = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">if</span>(<span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span>) &#123;</span><br><span class="line">    xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">ActiveXObject</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      xhr = <span class="keyword">new</span> <span class="title class_">ActiveXObject</span>(<span class="string">&quot;Msxml2.XMLHTTP&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        xhr = <span class="keyword">new</span> <span class="title class_">ActiveXObject</span>(<span class="string">&quot;Microsoft.XMLHTTP&quot;</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123; </span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;æ‚¨çš„æµè§ˆå™¨æš‚ä¸æ”¯æŒAjax!&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> xhr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹<code>HTML 5</code>çš„æ¦‚å¿µå½¢æˆåï¼Œ<code>W3C</code>å¼€å§‹è€ƒè™‘æ ‡å‡†åŒ–è¿™ä¸ªæ¥å£ã€‚2008å¹´2æœˆï¼Œå°±æå‡ºäº†<a href="http://dev.w3.org/2006/webapi/XMLHttpRequest-2/">XMLHttpRequest Level 2</a> è‰æ¡ˆï¼ˆä¹‹å‰æ˜¯<code>Level 1</code>ï¼‰ã€‚è¿™ä¸ªæ–°ç‰ˆæœ¬æå‡ºäº†å¾ˆå¤šå®ç”¨çš„åŠŸèƒ½ï¼Œå¤§å¤§çš„åŠ å¿«äº†äº’è”ç½‘é©æ–°ã€‚</p><p>â€‹<em>è¿™é‡Œå¯¹æ¯”<code>level 1</code> å’Œ <code>level 2</code> çš„åŒºåˆ«</em></p><table><thead><tr><th>ç‰¹æ€§</th><th>level 1</th><th>level 2</th></tr></thead><tbody><tr><td>æ–‡æœ¬æ•°æ®ä¼ é€</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>è¯»å–ä¸Šä¼ äºŒè¿›åˆ¶</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>è¿›åº¦ä¿¡æ¯</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>åŒæºé™åˆ¶</td><td>ä¸æ”¯æŒè·¨åŸŸ</td><td>å¯å‘é€è·¨åŸŸè¯·æ±‚</td></tr><tr><td>è¶…æ—¶æ—¶é—´</td><td>ä¸æ”¯æŒè‡ªå·±è®¾ç½®</td><td><code>xhr.timeout</code>è®¾ç½®è¶…æ—¶æ—¶é—´</td></tr></tbody></table><p>â€‹æ­¤å¤–ï¼Œä¸ºäº†æ–¹ä¾¿è¡¨å•å¤„ç†ï¼Œ<code>html5</code>æ–°åŠ äº†ä¸ª<code>FormData</code>å¯¹è±¡ï¼Œæ–°çš„æ ‡å‡†åŒæ ·æ”¯æŒè¿™ä¸ªå¯¹è±¡ï¼Œç”¨æ¥æ¨¡æ‹Ÿè¡¨å•ã€‚</p><p>å…³äº<code>level 1</code> å’Œ <code>level 2</code>çš„åŒºåˆ«ï¼Œå¯ä¹Ÿå‚è€ƒ<a href="http://www.ruanyifeng.com/blog/2012/09/xmlhttprequest_level_2.html">XMLHttpRequest Level 2 ä½¿ç”¨æŒ‡å—</a>ï¼Œé˜®è€å¸ˆå¯¹æ¯ä¸ªæ–°ç‰¹æ€§éƒ½å†™äº†ä»£ç å®ä¾‹ã€‚</p><p><code>XMLHttpRequest</code>å¯¹è±¡ï¼š</p><p>å±æ€§ï¼š</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/channel"><code>channel</code></a> è‰æ¡ˆï¼Œä¸çŸ¥é“æ˜¯å•¥<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/mozAnon"><code>mozAnon</code></a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/mozBackgroundRequest"><code>mozBackgroundRequest</code></a>è‰æ¡ˆï¼Œå¸ƒå°”å€¼ï¼Œä¸ºTrue æ—¶ï¼Œæœ¬æ¬¡è¯·æ±‚ä¸å¸¦cookiesæˆ–è€…å¤´éƒ¨è®¤è¯ä¿¡æ¯<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/mozResponseArrayBuffer"><code>mozResponseArrayBuffer</code></a> è‰æ¡ˆ<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/mozSystem"><code>mozSystem</code></a> è‰æ¡ˆ<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/multipart"><code>multipart</code></a> è‰æ¡ˆ<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/onreadystatechange"><code>onreadystatechange</code></a> åªè¦``readyState` å‘ç”Ÿæ”¹å˜ï¼Œå°±è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/readyState"><code>readyState</code></a> å½“å‰çš„çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯0:UNSENT,1:OPENED,2:HEADERS_RECEIVED,3:LOADING,4:DONEã€‚åœ¨ieé‡Œï¼ŒçŠ¶æ€åç§°ä¸ä¸€æ ·ã€‚<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/response"><code>response</code></a>è¯·æ±‚å“åº”çš„æ­£æ–‡<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/responseText"><code>responseText</code></a> è¿”å›ä¸€ä¸ªDOMStringï¼Œå®ƒåŒ…å«å¯¹æ–‡æœ¬çš„è¯·æ±‚çš„å“åº”ã€‚<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/responseType"><code>responseType</code></a> è¿”å›æ•°æ®çš„ç±»å‹ï¼Œå…·ä½“è§ä¸‹æ–‡<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/responseURL"><code>responseURL</code></a> è¿”å›å“åº”çš„åºåˆ—åŒ–URLæˆ–ç©ºå­—ç¬¦ä¸²<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/responseXML"><code>responseXML</code></a> è¿”å›ä¸€ä¸ªåŒ…å«è¯·æ±‚æ£€ç´¢çš„HTMLæˆ–XMLçš„<code>Document</code><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/status"><code>status</code></a> å“åº”çš„æ•°å­—çŠ¶æ€ç ï¼Œé‡‡ç”¨æ ‡å‡†HTTP çŠ¶æ€ç <br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/statusText"><code>statusText</code></a> çŠ¶æ€ç å¯¹åº”çš„æ–‡æœ¬ä¿¡æ¯<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/timeout"><code>timeout</code></a> è¶…æ—¶æ—¶é—´<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/upload"><code>upload</code></a> è¿”å›<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequestUpload"><code>XMLHttpRequestUpload</code></a> å¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºä¸Šä¼ çš„è¿›åº¦<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/withCredentials"><code>withCredentials</code></a> ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…ï¼Œå’Œè·¨åŸŸè¯·æ±‚è®¤è¯æœ‰å…³</p><p>æ–¹æ³•ï¼š</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/abort"><code>abort()</code></a>ç»ˆæ­¢è¯·æ±‚ï¼Œ<code>readyState</code>ä¼šå˜ä¸º0<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/getAllResponseHeaders"><code>getAllResponseHeaders()</code></a>è¿”å›æ‰€æœ‰çš„å“åº”å¤´<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/getResponseHeader"><code>getResponseHeader()</code></a>è¿”å›æŒ‡å®šçš„å“åº”å¤´<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/open"><code>open()</code></a>åˆå§‹åŒ–ä¸€ä¸ªè¯·æ±‚ã€‚<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/overrideMimeType"><code>overrideMimeType()</code></a><code>level 1</code>çš„æ–¹æ³•ï¼Œç”¨responseTypeä»£æ›¿</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/send"><code>send()</code></a>å‘é€httpè¯·æ±‚<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/sendAsBinary"><code>sendAsBinary()</code></a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/setRequestHeader"><code>setRequestHeader()</code></a>è®¾ç½®httpè¯·æ±‚å¤´</p><h3 id="3-ä½¿ç”¨XMLHttpRequest"><a class="header-anchor" href="#3-ä½¿ç”¨XMLHttpRequest">Â¶</a>3.ä½¿ç”¨<code>XMLHttpRequest</code></h3><p>ä¸‹é¢æ˜¯ç”¨ <code>XMLHttpRequest</code>å‘é€<code>ajax</code>  <code>get</code> è¯·æ±‚çš„ä¾‹å­ï¼ˆç”¨åˆ°äº†å¤§éƒ¨åˆ†<code>api</code>ï¼‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>(); <span class="comment">// æ–°å»ºä¸€ä¸ªXMLHttpRequestå¯¹è±¡å®ä¾‹</span></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;get&#x27;</span>,<span class="string">&quot;url&quot;</span>); <span class="comment">// è®¾ç½®è¯·æ±‚æ–¹æ³•å’Œåœ°å€ </span></span><br><span class="line">xhr.<span class="property">responseType</span> = <span class="string">&quot;text&quot;</span>; <span class="comment">// è®¾ç½®è¿”å›çš„æ•°æ®ç±»å‹</span></span><br><span class="line">xhr.<span class="property">timeout</span> = <span class="number">3000</span>; <span class="comment">// è®¾ç½®è¶…æ—¶æ—¶é—´</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¶…æ—¶å¤„ç†å‡½æ•°</span></span><br><span class="line">xhr.<span class="property">ontimeout</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123; </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;timeout&quot;</span>)</span><br><span class="line">&#125;; </span><br><span class="line"><span class="comment">// è¯·æ±‚é”™è¯¯å¤„ç†å‡½æ•°</span></span><br><span class="line">xhr.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123; </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;error&quot;</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚è¿›åº¦å¤„ç†å‡½æ•°</span></span><br><span class="line">xhr.<span class="property">upload</span>.<span class="property">onprogress</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123; </span><br><span class="line"> <span class="keyword">if</span> (e.<span class="property">lengthComputable</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> completedPercent = e.<span class="property">loaded</span> / e.<span class="property">total</span>; <span class="comment">// è¯·æ±‚ç™¾åˆ†æ¯”</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¯¹completedPercent æ“ä½œ</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆåŠŸæ¥æ”¶åˆ°è¯·æ±‚çš„å‡½æ•°</span></span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">status</span> = <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">responseText</span>)ï¼›</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">send</span>(); <span class="comment">// å‘é€è¯·æ±‚</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œä»‹ç»ä¸€äº›å¸¸ç”¨çš„<code>api</code>ï¼š</p><p>æ›´è¯¦ç»†çš„å¯ä»¥çœ‹<code>mdn</code>çš„æ–‡æ¡£,é‡Œé¢æœ‰<code>XMLHttpRequest</code>å¯¹è±¡æ‰€æœ‰çš„å±æ€§ï¼Œæ–¹æ³•ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest">XMLHttpRequest </a></p><h4 id="open"><a class="header-anchor" href="#open">Â¶</a>open()`</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">XMLHttpRequest</span>.<span class="title function_">open</span>(method, url)</span><br><span class="line"><span class="title class_">XMLHttpRequest</span>.<span class="title function_">open</span>(method, url, <span class="keyword">async</span>)</span><br><span class="line"><span class="title class_">XMLHttpRequest</span>.<span class="title function_">open</span>(method, url, <span class="keyword">async</span>, user)</span><br><span class="line"><span class="title class_">XMLHttpRequest</span>.<span class="title function_">open</span>(method, url, <span class="keyword">async</span>, user, password)</span><br></pre></td></tr></table></figure><p><code>method</code> å°±æ˜¯éœ€è¦ä½¿ç”¨çš„httpæ–¹æ³•ï¼ŒåŒ…æ‹¬[GET],[POST],[PUT],[DELETE]ç­‰ã€‚</p><p><code>url</code>å°±æ˜¯è¯·æ±‚çš„åœ°å€<code>url</code>ã€‚</p><p><code>async</code> @å¯é€‰ ä¸€ä¸ªå¯é€‰çš„å¸ƒå°”å‚æ•°ï¼Œé»˜è®¤ä¸º<code>true</code>ï¼Œè¡¨ç¤ºè¦ä¸è¦å¼‚æ­¥æ‰§è¡Œæ“ä½œã€‚å¦‚æœå€¼ä¸º<code>false</code>ï¼Œ<code>send()</code>æ–¹æ³•ç›´åˆ°æ”¶åˆ°ç­”å¤å‰ä¸ä¼šè¿”å›ã€‚å¦‚æœ<code>true</code>ï¼Œå·²å®Œæˆäº‹åŠ¡çš„é€šçŸ¥å¯ä¾›äº‹ä»¶ç›‘å¬å™¨ä½¿ç”¨ã€‚å¦‚æœ<code>multipart</code>å±æ€§ä¸º<code>true</code>åˆ™è¿™ä¸ªå¿…é¡»ä¸º<code>true</code>ï¼Œå¦åˆ™å°†å¼•å‘å¼‚å¸¸ã€‚</p><p><code>user</code>@ å¯é€‰ ç”¨æˆ·åç”¨äºè®¤è¯ç”¨é€”ï¼›é»˜è®¤ä¸º<code>null</code>ã€‚</p><p><code>password</code> @å¯é€‰ å¯†ç ç”¨äºè®¤è¯ç”¨é€”ï¼Œé»˜è®¤ä¸º<code>null</code>ã€‚</p><h4 id="setRequestHeader"><a class="header-anchor" href="#setRequestHeader">Â¶</a><code>setRequestHeader()</code></h4><p>**<code>XMLHttpRequest.setRequestHeader()**</code> æ˜¯è®¾ç½®HTTPè¯·æ±‚å¤´éƒ¨çš„æ–¹æ³•ã€‚æ­¤æ–¹æ³•å¿…é¡»åœ¨  <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/open"><code>open()</code></a>æ–¹æ³•å’Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/send"><code>send()</code></a>   ä¹‹é—´è°ƒç”¨ã€‚å¦‚æœå¤šæ¬¡å¯¹åŒä¸€ä¸ªè¯·æ±‚å¤´èµ‹å€¼ï¼Œåªä¼šç”Ÿæˆä¸€ä¸ªåˆå¹¶äº†å¤šä¸ªå€¼çš„è¯·æ±‚å¤´ã€‚</p><h4 id="send"><a class="header-anchor" href="#send">Â¶</a>send()</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">void send();</span><br><span class="line">void send(ArrayBuffer data);</span><br><span class="line">void send(ArrayBufferView data);</span><br><span class="line">void send(Blob data);</span><br><span class="line">void send(Document data);</span><br><span class="line">void send(DOMString? data);</span><br><span class="line">void send(FormData data);</span><br></pre></td></tr></table></figure><p>â€‹æ–¹æ³•ç”¨äºå‘é€ HTTP è¯·æ±‚ã€‚å¦‚æœæ˜¯å¼‚æ­¥è¯·æ±‚ï¼ˆé»˜è®¤ä¸ºå¼‚æ­¥è¯·æ±‚ï¼‰ï¼Œåˆ™æ­¤æ–¹æ³•ä¼šåœ¨è¯·æ±‚å‘é€åç«‹å³è¿”å›ï¼›å¦‚æœæ˜¯åŒæ­¥è¯·æ±‚ï¼Œåˆ™æ­¤æ–¹æ³•ç›´åˆ°å“åº”åˆ°è¾¾åæ‰ä¼šè¿”å›ã€‚<code>XMLHttpRequest.send()</code> æ–¹æ³•æ¥å—ä¸€ä¸ªå¯é€‰çš„å‚æ•°ï¼Œå…¶ä½œä¸ºè¯·æ±‚ä¸»ä½“ï¼›å¦‚æœè¯·æ±‚æ–¹æ³•æ˜¯ GET æˆ–è€… HEADï¼Œåˆ™åº”å°†è¯·æ±‚ä¸»ä½“è®¾ç½®ä¸º nullï¼Œæ­¤æ—¶å‚æ•°åº”è¯¥åœ¨<code>url</code>åé¢ã€‚</p><p>ğŸ˜ è‡ªå®šä¹‰ä¸€äº›headerå±æ€§è¿›è¡Œè·¨åŸŸè¯·æ±‚æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°&quot;<strong>not allowed by Access-Control-Allow-Headers in preflight response</strong>&quot;ï¼Œä½ å¯èƒ½éœ€è¦åœ¨ä½ çš„æœåŠ¡ç«¯è®¾ç½®&quot;Access-Control-Allow-Headers&quot;ã€‚</p><p>æ¥ä¸‹æ¥ä»ä¸€ä¸ªå®Œæ•´çš„httpè¯·æ±‚æµç¨‹ä»‹ç»ä½¿ç”¨</p><h4 id="è®¾ç½®request-header"><a class="header-anchor" href="#è®¾ç½®request-header">Â¶</a>è®¾ç½®request header</h4><p>å‘é€ä¸€ä¸ª<code>http</code>è¯·æ±‚ä¹‹å‰ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€äº›è¯·æ±‚å¤´éƒ¨ä¿¡æ¯ã€‚</p><p>æ¯”å¦‚å¸¸ç”¨çš„<code>cookie</code>,<code>content-type</code>ç­‰ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨<code>setRequestHeader(DOMString header, DOMString value)</code>è¿™ä¸ªå‡½æ•°è®¾ç½®ã€‚</p><ul><li>headerå¤§å°å†™ä¸æ˜æ˜¾ï¼Œ<code>cookie</code>å’Œ<code>Cookie</code>æ˜¯ç­‰ä»·çš„ã€‚</li><li><code>Content-Type</code>å¯ä»¥å‘é€çš„æ•°æ®ç±»å‹å¯ä»¥çœ‹ä¸Šé¢sendå‡½æ•°çš„å‚æ•°ç±»å‹ã€‚</li><li>è®¾ç½®header å¿…é¡»åœ¨<code>open</code> å’Œ<code>send</code>ä¹‹é—´ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</li><li>è¿™ä¸ªå‡½æ•°å¯ä»¥è°ƒç”¨å¤šæ¬¡ï¼Œåœ¨<code>send</code>ä¹‹å‰ä¼šåˆå¹¶å¤šä¸ªè°ƒç”¨è®¾ç½®çš„å€¼ã€‚</li></ul><p>eg:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;get&#x27;</span>,<span class="string">&#x27;url&#x27;</span>)</span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;content-type&#x27;</span>,<span class="string">&#x27;multipart/form-data&#x27;</span>)</span><br><span class="line">xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;cookie&#x27;</span>,<span class="string">&#x27;asdaadfasdfasdfa&#x27;</span>)</span><br><span class="line"><span class="comment">// ä¸Šé¢è®¾ç½®åä¼šåˆå¹¶ä¸¤ä¸ªheader</span></span><br><span class="line">xhr.<span class="title function_">send</span>()</span><br></pre></td></tr></table></figure><h4 id="è·å–Response-Header"><a class="header-anchor" href="#è·å–Response-Header">Â¶</a>è·å–<code>Response Header</code></h4><p>è·å–<code>response header</code> å¯ä»¥é€šè¿‡<code>getAllResponseHeaders()</code> å’Œ<code>getResponseHeader(header)</code></p><p>ä»åå­—ä¸Šå¯ä»¥çœ‹å‡ºæ¥ï¼Œä¸€ä¸ªæ˜¯è·å–æ‰€æœ‰çš„header ï¼Œä¸€ä¸ªæ˜¯è·å–æŒ‡å®šçš„æŸä¸ªheader å¯¹åº”çš„å€¼ã€‚</p><p><code>getResponseHeader(header)</code> çš„å‚æ•°ä¸åˆ†å¤§å°å†™ã€‚</p><p>ä½†æ˜¯: è¿™é‡Œè·å–éƒ¨åˆ†header æ˜¯æœ‰<strong>é™åˆ¶</strong>çš„ï¼Œ<strong>ä¸ºäº†å®‰å…¨è€ƒè™‘</strong>ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯åŒæºéƒ½è§„å®šå®¢æˆ·ç«¯æ— æ³•è·å–<code>Set-Cookie</code>è¿™ä¸ªå­—æ®µï¼Œåœ¨è·¨åŸŸçš„è¯·æ±‚é‡Œï¼Œåªèƒ½è·å–â€œ<code>simple response header</code>â€å’Œâ€œ<code>Access-Control-Expose-Headers</code>â€ã€‚</p><p>è§£é‡Šï¼š</p><blockquote><p>&quot;<code>simple response header</code>&quot;åŒ…æ‹¬çš„ header å­—æ®µæœ‰ï¼š<code>Cache-Control</code>,<code>Content-Language</code>,<code>Content-Type</code>,<code>Expires</code>,<code>Last-Modified</code>,<code>Pragma</code>;<br>â€œ<code>Access-Control-Expose-Headers</code>â€ï¼šé¦–å…ˆå¾—æ³¨æ„æ˜¯&quot;<code>Access-Control-Expose-Headers</code>&quot;è¿›è¡Œ<strong>è·¨åŸŸè¯·æ±‚</strong>æ—¶å“åº”å¤´éƒ¨ä¸­çš„ä¸€ä¸ªå­—æ®µï¼Œå¯¹äºåŒåŸŸè¯·æ±‚ï¼Œå“åº”å¤´éƒ¨æ˜¯æ²¡æœ‰è¿™ä¸ªå­—æ®µçš„ã€‚è¿™ä¸ªå­—æ®µä¸­åˆ—ä¸¾çš„ header å­—æ®µå°±æ˜¯æœåŠ¡å™¨å…è®¸æš´éœ²ç»™å®¢æˆ·ç«¯è®¿é—®çš„å­—æ®µã€‚</p></blockquote><p>eg:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="title function_">getResponseHeader</span>(<span class="string">&#x27;Cache-Control&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="æŒ‡å®šè¿”å›çš„æ•°æ®ç±»å‹"><a class="header-anchor" href="#æŒ‡å®šè¿”å›çš„æ•°æ®ç±»å‹">Â¶</a>æŒ‡å®šè¿”å›çš„æ•°æ®ç±»å‹</h4><p>ç”¨è¿‡<code>jquery</code>çš„<code>ajax</code>éƒ½çŸ¥é“é‡Œé¢æœ‰ä¸ªå±æ€§<code>dataType</code>å¯ä»¥æŒ‡å®šæœåŠ¡å™¨è¿”å›çš„æ•°æ®ç±»å‹ã€‚</p><p>å¦‚æœæƒ³é€šè¿‡<code>XMLHttpRequest</code>è®¾ç½®è¿”å›çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥é€šè¿‡<code>xhr.responseType</code>å±æ€§æ¥è®¾ç½®ã€‚<code>responseType</code>æ˜¯<code>xhr level 2</code>æ–°å¢çš„å±æ€§ï¼Œç”¨æ¥æŒ‡å®š<code>xhr.response</code>çš„æ•°æ®ç±»å‹ï¼Œç›®å‰è¿˜å­˜åœ¨äº›å…¼å®¹æ€§é—®é¢˜ã€‚</p><p><em>å¯ä»¥è®¾ç½®çš„å€¼æ˜¯ï¼š</em></p><table><thead><tr><th style="text-align:left">å€¼</th><th style="text-align:left"><code>xhr.response</code> æ•°æ®ç±»å‹</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left"><code>&quot;&quot;</code></td><td style="text-align:left"><code>String</code>å­—ç¬¦ä¸²</td><td style="text-align:left">é»˜è®¤å€¼(åœ¨ä¸è®¾ç½®<code>responseType</code>æ—¶)</td></tr><tr><td style="text-align:left"><code>&quot;text&quot;</code></td><td style="text-align:left"><code>String</code>å­—ç¬¦ä¸²</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>&quot;document&quot;</code></td><td style="text-align:left"><code>Document</code>å¯¹è±¡</td><td style="text-align:left">å¸Œæœ›è¿”å› <code>XML</code> æ ¼å¼æ•°æ®æ—¶ä½¿ç”¨</td></tr><tr><td style="text-align:left"><code>&quot;json&quot;</code></td><td style="text-align:left"><code>javascript</code> å¯¹è±¡</td><td style="text-align:left">å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼ŒIE10/IE11ä¸æ”¯æŒ</td></tr><tr><td style="text-align:left"><code>&quot;blob&quot;</code></td><td style="text-align:left"><code>Blob</code>å¯¹è±¡</td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>&quot;arrayBuffer&quot;</code></td><td style="text-align:left"><code>ArrayBuffer</code>å¯¹è±¡</td><td style="text-align:left"></td></tr></tbody></table><p>eg.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;/path/to/image.png&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">xhr.<span class="property">responseType</span> = <span class="string">&#x27;blob&#x27;</span></span><br><span class="line">xhr.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œæœ‰ä¸‰ä¸ªå¯ä»¥è·å–è¿”å›å€¼çš„å±æ€§ï¼Œåˆ†åˆ«æ˜¯ responseï¼ŒresponseType responseXml </span></span><br><span class="line">        <span class="keyword">var</span> bloob = <span class="variable language_">this</span>.<span class="property">response</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">xhr.<span class="title function_">send</span>()</span><br></pre></td></tr></table></figure><p>è·å–è¿”å›å€¼ï¼š</p><ul><li><code>xhr.response</code><ul><li>é»˜è®¤å€¼ï¼šç©ºå­—ç¬¦ä¸²<code>&quot;&quot;</code></li><li>å½“è¯·æ±‚å®Œæˆæ—¶ï¼Œæ­¤å±æ€§æ‰æœ‰æ­£ç¡®çš„å€¼</li><li>è¯·æ±‚æœªå®Œæˆæ—¶ï¼Œæ­¤å±æ€§çš„å€¼å¯èƒ½æ˜¯<code>&quot;&quot;</code>æˆ–è€… <code>null</code>ï¼Œå…·ä½“ä¸ <code>xhr.responseType</code>æœ‰å…³ï¼šå½“<code>responseType</code>ä¸º<code>&quot;&quot;</code>æˆ–<code>&quot;text&quot;</code>æ—¶ï¼Œå€¼ä¸º<code>&quot;&quot;</code>ï¼›<code>responseType</code>ä¸ºå…¶ä»–å€¼æ—¶ï¼Œå€¼ä¸º <code>null</code></li></ul></li><li><code>xhr.responseText</code><ul><li>é»˜è®¤å€¼ä¸ºç©ºå­—ç¬¦ä¸²<code>&quot;&quot;</code></li><li>åªæœ‰å½“ <code>responseType</code> ä¸º<code>&quot;text&quot;</code>ã€<code>&quot;&quot;</code>æ—¶ï¼Œ<code>xhr</code>å¯¹è±¡ä¸Šæ‰æœ‰æ­¤å±æ€§ï¼Œæ­¤æ—¶æ‰èƒ½è°ƒç”¨<code>xhr.responseText</code>ï¼Œå¦åˆ™æŠ›é”™</li><li>åªæœ‰å½“è¯·æ±‚æˆåŠŸæ—¶ï¼Œæ‰èƒ½æ‹¿åˆ°æ­£ç¡®å€¼ã€‚ä»¥ä¸‹2ç§æƒ…å†µä¸‹å€¼éƒ½ä¸ºç©ºå­—ç¬¦ä¸²<code>&quot;&quot;</code>ï¼šè¯·æ±‚æœªå®Œæˆã€è¯·æ±‚å¤±è´¥</li></ul></li><li><code>xhr.responseXML</code><ul><li>é»˜è®¤å€¼ä¸º <code>null</code></li><li>åªæœ‰å½“ <code>responseType</code> ä¸º<code>&quot;text&quot;</code>ã€<code>&quot;&quot;</code>ã€<code>&quot;document&quot;</code>æ—¶ï¼Œ<code>xhr</code>å¯¹è±¡ä¸Šæ‰æœ‰æ­¤å±æ€§ï¼Œæ­¤æ—¶æ‰èƒ½è°ƒç”¨<code>xhr.responseXML</code>ï¼Œå¦åˆ™æŠ›é”™</li><li>åªæœ‰å½“è¯·æ±‚æˆåŠŸä¸”è¿”å›æ•°æ®è¢«æ­£ç¡®è§£ææ—¶ï¼Œæ‰èƒ½æ‹¿åˆ°æ­£ç¡®å€¼ã€‚ä»¥ä¸‹3ç§æƒ…å†µä¸‹å€¼éƒ½ä¸º<code>null</code>ï¼šè¯·æ±‚æœªå®Œæˆã€è¯·æ±‚å¤±è´¥ã€è¯·æ±‚æˆåŠŸä½†è¿”å›æ•°æ®æ— æ³•è¢«æ­£ç¡®è§£ææ—¶</li></ul></li></ul><h4 id="è¿½è¸ªajax-çš„å½“å‰çŠ¶æ€"><a class="header-anchor" href="#è¿½è¸ªajax-çš„å½“å‰çŠ¶æ€">Â¶</a>è¿½è¸ª<code>ajax</code> çš„å½“å‰çŠ¶æ€</h4><p>ä¸Šæ–‡å·²ç»è¯´è¿‡äº†<code>XMLHttpRequest</code>æœ‰<code>readyState</code>çŠ¶æ€ï¼Œå…±æœ‰5ç§ã€‚</p><table><thead><tr><th>å€¼</th><th>çŠ¶æ€</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>0</code></td><td><code>UNSENT</code></td><td>ä»£ç†è¢«åˆ›å»ºï¼Œä½†å°šæœªè°ƒç”¨ open() æ–¹æ³•ã€‚</td></tr><tr><td><code>1</code></td><td><code>OPENED</code></td><td><code>open()</code> æ–¹æ³•å·²ç»è¢«è°ƒç”¨ã€‚</td></tr><tr><td><code>2</code></td><td><code>HEADERS_RECEIVED</code></td><td><code>send()</code> æ–¹æ³•å·²ç»è¢«è°ƒç”¨ï¼Œå¹¶ä¸”å¤´éƒ¨å’ŒçŠ¶æ€å·²ç»å¯è·å¾—ã€‚</td></tr><tr><td><code>3</code></td><td><code>LOADING</code></td><td>ä¸‹è½½ä¸­ï¼› <code>responseText</code> å±æ€§å·²ç»åŒ…å«éƒ¨åˆ†æ•°æ®ã€‚</td></tr><tr><td><code>4</code></td><td><code>DONE</code></td><td>ä¸‹è½½æ“ä½œå·²å®Œæˆã€‚</td></tr></tbody></table><p>çŠ¶æ€æ”¹å˜çš„æ—¶å€™ï¼Œä¼šè§¦å‘<code>onreadystatechange</code>äº‹ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span>(xhr.<span class="property">readyState</span>)&#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>:<span class="comment">//OPENED</span></span><br><span class="line">        <span class="comment">//do something</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">2</span>:<span class="comment">//HEADERS_RECEIVED</span></span><br><span class="line">        <span class="comment">//do something</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">3</span>:<span class="comment">//LOADING</span></span><br><span class="line">        <span class="comment">//do something</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">4</span>:<span class="comment">//DONE</span></span><br><span class="line">        <span class="comment">//do something</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®è¶…æ—¶æ—¶é—´"><a class="header-anchor" href="#è®¾ç½®è¶…æ—¶æ—¶é—´">Â¶</a>è®¾ç½®è¶…æ—¶æ—¶é—´</h4><p><code>timeout</code> å±æ€§  å•ä½ æ¯«ç§’</p><p>å¦‚ä½•è®¡ç®—æ—¶é—´ï¼Ÿ</p><p>å¼€å§‹æ—¶é—´æŒ‡çš„æ˜¯ <code>send</code>æ–¹æ³•è°ƒç”¨çš„æ—¶å€™</p><p>ç»“æŸæ—¶é—´æ˜¯<code>loadend</code>äº‹ä»¶è§¦å‘</p><p>ğŸ˜æ³¨æ„åœ¨åŒæ­¥çš„è¯·æ±‚é‡Œé¢ï¼Œè¿™ä¸ªå€¼å¿…é¡»è®¾ç½®ä¸º0.å¦åˆ™ä¼šæŠ¥é”™ã€‚</p><h4 id="åŒæ­¥è¯·æ±‚"><a class="header-anchor" href="#åŒæ­¥è¯·æ±‚">Â¶</a>åŒæ­¥è¯·æ±‚</h4><p>ä¸å»ºè®®å‘é€åŒæ­¥è¯·æ±‚</p><p>ä¸€å®šè¦å‘é€çš„è¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">open</span>(method, url [, <span class="keyword">async</span> = <span class="literal">true</span> [, username = <span class="literal">null</span> [, password = <span class="literal">null</span>]]])</span><br><span class="line"><span class="comment">// async è®¾ç½®ä¸ºfalse</span></span><br></pre></td></tr></table></figure><h4 id="æ˜¾ç¤ºè¿›åº¦"><a class="header-anchor" href="#æ˜¾ç¤ºè¿›åº¦">Â¶</a>æ˜¾ç¤ºè¿›åº¦</h4><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>onprogress</code>äº‹ä»¶æ¥å®æ—¶æ˜¾ç¤ºè¿›åº¦ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªäº‹ä»¶æ¯50msè§¦å‘ä¸€æ¬¡ã€‚</p><p>ä½†æ˜¯ï¼Œä¸Šä¼ å’Œä¸‹è½½ï¼Œæ˜¯ä¸åŒå¯¹è±¡çš„<code>onprogress</code>äº‹ä»¶ã€‚</p><table><thead><tr><th>ä¸Šä¼ </th><th><code>xhr.upload</code></th></tr></thead><tbody><tr><td>ä¸‹è½½</td><td><code>xhr</code></td></tr></tbody></table><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">onprogress</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(e.<span class="property">lengthComputable</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> p = e.<span class="property">loaded</span> / e.<span class="property">total</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="send-data-çš„å‚æ•°"><a class="header-anchor" href="#send-data-çš„å‚æ•°">Â¶</a><code>send(data)</code>çš„å‚æ•°</h4><p><code>xhr.send(data)</code>çš„å‚æ•°dataå¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š</p><ul><li><code>ArrayBuffer</code></li><li><code>Blob</code></li><li><code>Document</code></li><li><code>DOMString</code></li><li><code>FormData</code></li><li><code>null</code></li></ul><p>dataçš„å€¼ä¼šå½±å“è¯·æ±‚å¤´éƒ¨<code>content-type</code>çš„é»˜è®¤å€¼ã€‚</p><ul><li>å¦‚æœ<code>data</code>æ˜¯ <code>Document</code> ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯<code>HTML Document</code>ç±»å‹ï¼Œåˆ™<code>content-type</code>é»˜è®¤å€¼ä¸º<code>text/html;charset=UTF-8</code>;å¦åˆ™ä¸º<code>application/xml;charset=UTF-8</code>ï¼›</li><li>å¦‚æœ<code>data</code>æ˜¯ <code>DOMString</code> ç±»å‹ï¼Œ<code>content-type</code>é»˜è®¤å€¼ä¸º<code>text/plain;charset=UTF-8</code>ï¼›</li><li>å¦‚æœ<code>data</code>æ˜¯ <code>FormData</code> ç±»å‹ï¼Œ<code>content-type</code>é»˜è®¤å€¼ä¸º<code>multipart/form-data; boundary=[xxx]</code></li><li>å¦‚æœ<code>data</code>æ˜¯å…¶ä»–ç±»å‹ï¼Œåˆ™ä¸ä¼šè®¾ç½®<code>content-type</code>çš„é»˜è®¤å€¼</li></ul><h3 id="4-ajaxå’Œjså•çº¿ç¨‹æœºåˆ¶"><a class="header-anchor" href="#4-ajaxå’Œjså•çº¿ç¨‹æœºåˆ¶">Â¶</a>4.<code>ajax</code>å’Œ<code>js</code>å•çº¿ç¨‹æœºåˆ¶</h3><p>â€‹åœ¨è¯´è¿™ä¸ªè¯é¢˜ä¹‹å‰ï¼Œéœ€è¦å…ˆäº†è§£ä¸‹<code>js</code>çš„å•çº¿ç¨‹æœºåˆ¶å’Œæµè§ˆå™¨çš„å¤šçº¿ç¨‹æœºåˆ¶ï¼š</p><p>â€‹<a href="http://www.ruanyifeng.com/blog/2014/10/event-loop.html">JavaScript è¿è¡Œæœºåˆ¶è¯¦è§£ï¼šå†è°ˆEvent Loop</a></p><p>â€‹       æ‰¹æ³¨ç‰ˆ:<a href="https://blog.csdn.net/lin_credible/article/details/40143961#commentBox">JavaScript è¿è¡Œæœºåˆ¶è¯¦è§£ï¼šå†è°ˆEvent Loop</a></p><p>â€‹<em>è¿™é‡Œæ²¡æœ‰é»‘é˜®è€å¸ˆçš„æ„æ€ï¼Œé˜®è€å¸ˆç¿»è¯‘äº†å¾ˆå¤šä¼˜è´¨çš„å¤–æ–‡ï¼Œä»–çš„æœ¬ä¸šæ˜¯é‡‘èï¼Œå¯¹äºè®¡ç®—æœºçŸ¥è¯†ä¸å¤Ÿä¸¥è°¨ï¼Œä½†å¯¹äºç§‘æ™®ï¼Œåšç®€å•çš„äº†è§£æ˜¯è¶³å¤Ÿçš„ï¼Œå¹¶ä¸”é˜®è€å¸ˆä¹Ÿå¯¹åšæ–‡å†…çš„é”™è¯¯åšäº†ä¿®æ”¹ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¹Ÿè¦æ˜ç™½ï¼Œè¦æƒ³çœŸæ­£å­¦åˆ°ä¸œè¥¿ï¼Œè¿˜æ˜¯è¦å»çœ‹æ ‡å‡†æ–‡æ¡£ï¼Œæ¯”å¦‚<code>mdn web doc</code>ï¼Œå»çœ‹å­¦æ ¡é‡Œçš„åŸºç¡€è¯¾ç¨‹ï¼Œä»»ä½•äººçš„äºŒæ‰‹çŸ¥è¯†ï¼Œåªèƒ½æ‹¿æ¥å‚è€ƒï¼Œç»ä¸èƒ½ä½œä¸ºæ ‡å‡†ã€‚</em></p><p>â€‹æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œ<code>javaScript</code>æ˜¯ä¸€é—¨å•çº¿ç¨‹çš„è¯­è¨€ï¼Œä½†æ˜¯å®ƒè¿è¡Œçš„ç¯å¢ƒï¼ˆè¿™é‡Œâ˜çš„æ˜¯æµè§ˆå™¨ï¼‰æ˜¯å¤šçº¿ç¨‹çš„ã€‚ç”¨å½“å‰æœ€æµè¡Œçš„<code>Chrome</code>æµè§ˆå™¨ä½œä¸ºä¾‹å­ã€‚</p><p>æœ‰ä»¥ä¸‹å‡ ä¸ªå¸¸é©»çº¿ç¨‹ï¼š</p><ul><li>æ¸²æŸ“å¼•æ“çº¿ç¨‹ï¼šé¡¾åæ€ä¹‰ï¼Œè¯¥çº¿ç¨‹è´Ÿè´£é¡µé¢çš„æ¸²æŸ“</li><li><code>JS</code>å¼•æ“çº¿ç¨‹ï¼šè´Ÿè´£<code>JS</code>çš„è§£æå’Œæ‰§è¡Œ</li><li>å®šæ—¶è§¦å‘å™¨çº¿ç¨‹ï¼šå¤„ç†å®šæ—¶äº‹ä»¶ï¼Œæ¯”å¦‚<code>setTimeout</code>, <code>setInterval</code></li><li>äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼šå¤„ç†<code>DOM</code>äº‹ä»¶</li><li>å¼‚æ­¥<code>http</code>è¯·æ±‚çº¿ç¨‹ï¼šå¤„ç†<code>http</code>è¯·æ±‚</li></ul><p>â€‹        éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¸²æŸ“çº¿ç¨‹å’Œ<code>JS</code>å¼•æ“çº¿ç¨‹æ˜¯ä¸èƒ½åŒæ—¶è¿›è¡Œçš„ã€‚æ¸²æŸ“çº¿ç¨‹åœ¨æ‰§è¡Œä»»åŠ¡çš„æ—¶å€™ï¼Œ<code>JS</code>å¼•æ“çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ã€‚å› ä¸º<code>JS</code>å¯ä»¥æ“ä½œDOMï¼Œè‹¥åœ¨æ¸²æŸ“ä¸­<code>JS</code>å¤„ç†äº†DOMï¼Œæµè§ˆå™¨å¯èƒ½å°±ä¸çŸ¥æ‰€æªäº†ã€‚</p><p>å¦å¤–ä¸€ä¸ªéœ€è¦æèµ·çš„æ˜¯æµè§ˆå™¨å®ç°å¼‚æ­¥çš„æ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªç¯</p><p>â€‹    æµè§ˆå™¨æœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ç”¨æ¥æ‰§è¡Œä»£ç ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„çº¿ç¨‹æ‰§è¡Œæ¯”è¾ƒè€—æ—¶çš„æ“ä½œï¼Œæ¯”å¦‚<code>http</code>è¯·æ±‚ï¼Œå®šæ—¶å™¨ç­‰ï¼Œæ‰€æœ‰çš„å‡½æ•°è°ƒç”¨éƒ½åœ¨ä¸€ä¸ª<code>stack</code>é‡Œé¢ï¼Œä¸»çº¿ç¨‹ä¼šä¾æ¬¡æ‰§è¡Œè¿™ä¸ª<code>stack</code>é‡Œçš„ä»£ç ï¼Œå½“é‡åˆ°ä¸€ä¸ªå¼‚æ­¥çš„æ“ä½œæ—¶ï¼Œå¼‚æ­¥çº¿ç¨‹æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œç„¶åå½“å¼‚æ­¥æ‰§è¡Œå®Œæ¯•ï¼Œä¼šæŠŠå›è°ƒå‡½æ•°ä½œä¸ºä¸€ä¸ªä»»åŠ¡åŠ åˆ°ä¸€ä¸ª<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong><code>queue</code>é‡Œé¢(å®é™…ä¸Šï¼Œæœ‰å¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œè¿™é‡Œä¸ºäº†è¯´æ˜åšäº†ç®€åŒ–)ï¼Œæµè§ˆå™¨ä¸æ–­çš„ç›‘å¬ç€<code>stack</code>ï¼Œä¸€æ—¦<code>stack</code>è¢«æ¸…ç©ºã€‚å°±ä»é˜Ÿåˆ—é‡Œå–å‡ºä¸€ä¸ªä»»åŠ¡åŠ åˆ°<code>stack</code>é‡Œé¢ï¼Œç„¶åä¸»çº¿ç¨‹æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ã€‚</p><p>â€‹ç”±äº<code>js</code>å¼•æ“ä»æ¶ˆæ¯é˜Ÿåˆ—é‡Œé¢è¯»å–äº‹ä»¶ä»»åŠ¡æ—¶ä¸é—´æ–­çš„ï¼Œåªè¦<code>stack</code>æ¸…ç©ºï¼Œå°±ä¼šæœ‰æ–°çš„ä»»åŠ¡åŠ åˆ°é‡Œé¢ï¼Œå¦‚æœæ¶ˆæ¯é˜Ÿåˆ—é‡Œæ²¡æœ‰ä»»åŠ¡ï¼Œå°±ä¼šä¸€ç›´ç­‰å¾…ï¼Œè¿™å°±æ˜¯<strong>äº‹ä»¶å¾ªç¯</strong><code>Event Loop</code>ã€‚</p><p>ç±»ä¼¼ä¸‹é¢ä»£ç :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (queue.<span class="title function_">waitForMessage</span>()) &#123;</span><br><span class="line"> queue.<span class="title function_">processNextMessage</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ’æ’­ä¸€é“é¢˜ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>));</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">t</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(t));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆæ˜¯ <code>4ï¼Œ3ï¼Œ2ï¼Œ1</code></p><p>â€‹    å…·ä½“çš„è§£é‡Šç‚¹è¿™é‡Œ<a href="https://github.com/dwqs/blog/issues/61">ä»ä¸€é“é¢˜æµ…è¯´ JavaScript çš„äº‹ä»¶å¾ªç¯</a>ã€‚</p><p>å›å½’æ­£ä¼ ï¼Œ</p><p>â€‹å½“å‘èµ·ä¸€ä¸ª<code>ajax</code>è¯·æ±‚ï¼Œè°ƒç”¨<code>send</code>æ–¹æ³•åï¼Œæµè§ˆå™¨å¼€å¯æ–°çš„çº¿ç¨‹ï¼Œå‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œ<code>js</code>ä¸»çº¿ç¨‹ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œå½“å½“ajaxè¯·æ±‚è¢«æœåŠ¡å™¨å“åº”å¹¶ä¸”æ”¶åˆ°responseå, æµè§ˆå™¨äº‹ä»¶è§¦å‘çº¿ç¨‹æ•è·åˆ°äº†ajaxçš„å›è°ƒäº‹ä»¶ <code>onreadystatechange</code> (å½“ç„¶ä¹Ÿå¯èƒ½è§¦å‘<code>onload</code>, æˆ–è€… <code>onerror</code>ç­‰ç­‰) . è¯¥å›è°ƒäº‹ä»¶å¹¶æ²¡æœ‰è¢«ç«‹å³æ‰§è¡Œ, è€Œæ˜¯è¢«æ·»åŠ åˆ° <code>ä»»åŠ¡é˜Ÿåˆ—</code> çš„æœ«å°¾. ç›´åˆ°<code>js</code>å¼•æ“ç©ºé—²äº†, <code>ä»»åŠ¡é˜Ÿåˆ—</code> çš„ä»»åŠ¡æ‰è¢«æå‡ºæ¥, æŒ‰ç…§æ·»åŠ é¡ºåº, æŒ¨ä¸ªæ‰§è¡Œ, å½“ç„¶ä¹ŸåŒ…æ‹¬åˆšåˆšappendåˆ°é˜Ÿåˆ—æœ«å°¾çš„ <code>onreadystatechange</code> äº‹ä»¶ã€‚</p><h3 id="5-ajaxå’Œè·¨åŸŸ"><a class="header-anchor" href="#5-ajaxå’Œè·¨åŸŸ">Â¶</a>5.<code>ajax</code>å’Œè·¨åŸŸ</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS">httpè®¿é—®æ§åˆ¶</a></p><p>é¦–å…ˆè¦äº†è§£ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Œè·¨åŸŸå°±æ˜¯å› ä¸ºæµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œé€ æˆçš„è®¿é—®é™åˆ¶ã€‚</p><p>å…³äºè§£å†³æ–¹æ¡ˆï¼Œçœ‹ä¸‹æ–‡ï¼š</p><p>[<a href="https://segmentfault.com/a/1190000012469713">ajaxè·¨åŸŸï¼Œè¿™åº”è¯¥æ˜¯æœ€å…¨çš„è§£å†³æ–¹æ¡ˆäº†</a>](<a href="https://segmentfault.com/a/1190000012469713">https://segmentfault.com/a/1190000012469713</a>)</p><h3 id="6-fetch-api"><a class="header-anchor" href="#6-fetch-api">Â¶</a>6.<code>fetch api</code></h3><p><code>Fetch API</code> æä¾›äº†ä¸€ä¸ªè·å–èµ„æºçš„æ¥å£ï¼ˆåŒ…æ‹¬è·¨åŸŸè¯·æ±‚ï¼‰ã€‚ä»»ä½•ä½¿ç”¨è¿‡ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"><code>XMLHttpRequest</code></a> çš„äººéƒ½èƒ½è½»æ¾ä¸Šæ‰‹ï¼Œä½†æ–°çš„<code>API</code>æä¾›äº†æ›´å¼ºå¤§å’Œçµæ´»çš„åŠŸèƒ½é›†ã€‚å¹¶ä¸”<code>fetch</code>æ”¯æŒ<code>promise</code>è¯­æ³•ã€‚</p><p>å…³äºpromiseç‚¹å‡»<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promiseå¯¹è±¡</a></p><p>å…³äº<code>fetch</code>ç‚¹å‡» <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API">Fetch API</a></p><p><code>Fetch</code>æœ‰ä¸ªç¼ºç‚¹æ˜¯ä¸æ”¯æŒè¿›åº¦ã€‚</p><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç®€å•ä¾‹å­</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;http://example.com/movies.json&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">myJson</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(myJson);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¯æŒè¯·æ±‚å‚æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">postData</span>(<span class="params">url, data</span>) &#123;</span><br><span class="line">  <span class="comment">// Default options are marked with *</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">fetch</span>(url, &#123;</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data), <span class="comment">// must match &#x27;Content-Type&#x27; header</span></span><br><span class="line">    <span class="attr">cache</span>: <span class="string">&#x27;no-cache&#x27;</span>, <span class="comment">// *default, no-cache, reload, force-cache, only-if-cached</span></span><br><span class="line">    <span class="attr">credentials</span>: <span class="string">&#x27;same-origin&#x27;</span>, <span class="comment">// include, same-origin, *omit</span></span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;user-agent&#x27;</span>: <span class="string">&#x27;Mozilla/4.0 MDN Example&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>, <span class="comment">// *GET, POST, PUT, DELETE, etc.</span></span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;cors&#x27;</span>, <span class="comment">// no-cors, cors, *same-origin</span></span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;follow&#x27;</span>, <span class="comment">// manual, *follow, error</span></span><br><span class="line">    <span class="attr">referrer</span>: <span class="string">&#x27;no-referrer&#x27;</span>, <span class="comment">// *client, no-referrer</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>()) <span class="comment">// parses response to JSON</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤æƒ…å†µä¸‹ï¼Œfetch ä¸ä¼šä»æœåŠ¡ç«¯å‘é€æˆ–æ¥æ”¶ä»»ä½• cookies,å¦‚æœç«™ç‚¹ä¾èµ–äºç”¨æˆ· sessionï¼Œåˆ™ä¼šå¯¼è‡´æœªç»è®¤è¯çš„è¯·æ±‚ï¼ˆè¦å‘é€ cookiesï¼Œå¿…é¡»è®¾ç½® credentials é€‰é¡¹ï¼‰</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://example.com&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">credentials</span>: <span class="string">&#x27;include&#x27;</span>  </span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>tags</code>:è¦åœ¨ä¸æ”¯æŒçš„æµè§ˆå™¨ä¸­ä½¿ç”¨Fetchï¼Œå¯ä»¥ä½¿ç”¨<a href="https://github.com/github/fetch">Fetch Polyfill</a>ã€‚</p><h3 id="7-Axiosä½¿ç”¨"><a class="header-anchor" href="#7-Axiosä½¿ç”¨">Â¶</a>7.<code>Axios</code>ä½¿ç”¨</h3><p><code>Axios</code> æ˜¯ä¸€ä¸ªåŸºäº <code>promise</code> çš„ <code>HTTP</code> åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ <code>node.js</code> ä¸­ã€‚å¦‚æœä½ ä¸æƒ³ä¸ºäº†ç®€å•çš„å‘é€<code>ajax</code>è¯·æ±‚å°±è¦ä¸‹è½½åºå¤§çš„<code>jquery</code>,åªæœ‰å‡ kbå¤§å°çš„<code>axios</code>æ˜¯å¾ˆå¥½çš„æ›¿ä»£äº§å“ã€‚</p><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰§è¡Œget è¯·æ±‚</span></span><br><span class="line"><span class="comment">// ä¸ºç»™å®š ID çš„ user åˆ›å»ºè¯·æ±‚</span></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;/user?ID=12345&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯é€‰åœ°ï¼Œä¸Šé¢çš„è¯·æ±‚å¯ä»¥è¿™æ ·åš</span></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;/user&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">ID</span>: <span class="number">12345</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œpost</span></span><br><span class="line">axios.<span class="title function_">post</span>(<span class="string">&#x27;/user&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&#x27;Fred&#x27;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&#x27;Flintstone&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œå¤šä¸ªå¹¶å‘è¯·æ±‚</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getUserAccount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;/user/12345&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getUserPermissions</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;/user/12345/permissions&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.<span class="title function_">all</span>([<span class="title function_">getUserAccount</span>(), <span class="title function_">getUserPermissions</span>()])</span><br><span class="line">  .<span class="title function_">then</span>(axios.<span class="title function_">spread</span>(<span class="keyword">function</span> (<span class="params">acct, perms</span>) &#123;</span><br><span class="line">    <span class="comment">// ä¸¤ä¸ªè¯·æ±‚ç°åœ¨éƒ½æ‰§è¡Œå®Œæˆ</span></span><br><span class="line">  &#125;));</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> html5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>htmlå„ç§å¸ƒå±€æ•´ç†</title>
      <link href="/posts/e08b183b/"/>
      <url>/posts/e08b183b/</url>
      
        <content type="html"><![CDATA[<hr><h3 id="ä¼ ç»Ÿå¸ƒå±€"><a class="header-anchor" href="#ä¼ ç»Ÿå¸ƒå±€">Â¶</a>ä¼ ç»Ÿå¸ƒå±€</h3><blockquote><p>å¸ƒå±€çš„ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆï¼ŒåŸºäº<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/box_model">ç›’çŠ¶æ¨¡å‹</a>ï¼Œä¾èµ– <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/display"><code>display</code></a> å±æ€§ + <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/position"><code>position</code></a>å±æ€§ + <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/float"><code>float</code></a>å±æ€§ã€‚</p></blockquote><h4 id="1-åœ£æ¯å¸ƒå±€"><a class="header-anchor" href="#1-åœ£æ¯å¸ƒå±€">Â¶</a>1.åœ£æ¯å¸ƒå±€</h4><p>åœ£æ¯å¸ƒå±€å°±æ˜¯ä¸¤è¾¹é¡¶å®½ï¼Œä¸­é—´è‡ªé€‚åº”çš„ä¸‰æ å¸ƒå±€ï¼Œä¸­é—´æ è¦æ”¾åœ¨æ–‡æ¡£æµå‰é¢ä¸€ä¼˜å…ˆæ¸²æŸ“ã€‚</p><p>å¾ˆå¤šç»å…¸çš„ç½‘é¡µå°±æ˜¯è¿™ç§å¸ƒå±€ï¼Œåº”ç”¨åœºæ™¯å¾ˆå¤šã€‚</p><p>å…ˆçœ‹ä¸‹åœ£æ¯å¸ƒå±€çš„<code>dom</code>ç»“æ„ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;layout grail&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>åœ£æ¯å¸ƒå±€<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;left-center-right&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><p>è¿™é‡Œcenter è¦æ”¾åœ¨ç¬¬ä¸€ä¸ªï¼Œå°±æ˜¯ <strong>ä¸­ å·¦ å³</strong> çš„é¡ºåºã€‚</p><p>æŠŠâ€œä¸­â€æ”¾åœ¨ç¬¬ä¸€ä½ï¼Œæ˜¯ä¸ºäº†é¦–å…ˆåŠ è½½â€œä¸­â€çš„å†…å®¹ï¼Œå¹¶ä¸”â€œä¸­â€çš„å®½åº¦æ˜¯è‡ªé€‚åº”çš„ã€‚</p><p>æœ‰ä¸¤ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§æ˜¯ç»™å·¦å³è®¾ç½®è´Ÿçš„<code>margin-left</code>,<a href="http://www.cnblogs.com/2050/archive/2012/08/13/2636467.html#2457812">ç‚¹å‡»æŸ¥çœ‹è´Ÿmarginçš„åŸç†</a>ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œç»™å·¦ è®¾ç½® <code>margin-left:-100%</code>.å³è®¾ç½®<code>margin-left:-300px;</code>å°±æŠŠè¿™ä¸¤ä¸ªbox æ‹‰å›ä¸Šä¸€è¡Œï¼Œç„¶åç»™çˆ¶å®¹å™¨è®¾ç½®å·¦å³<code>padding</code> ä¸º å·¦å³çš„å®½åº¦ï¼Œä¸è¿‡æ­¤æ—¶å·¦å³åˆå—åˆ°<code>padding </code>çš„å½±å“ï¼Œå‘ä¸­é—´æŒ¤ã€‚æ­¤æ—¶ç„¶åå†ç”¨ç›¸å¯¹å®šä½æŠŠå·¦å³è°ƒæ•´ä¸€ä¸‹ã€‚</p><p><code>css</code>ä»£ç å¦‚ä¸‹ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.layout</span><span class="selector-class">.grail</span> <span class="selector-class">.left-center-right</span> &#123;</span><br><span class="line">            <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">300px</span>;</span><br><span class="line">            <span class="attribute">min-width</span>: <span class="number">304px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.layout</span><span class="selector-class">.grail</span> <span class="selector-class">.left-center-right</span>&gt;<span class="selector-tag">div</span> &#123;</span><br><span class="line">            <span class="attribute">float</span>: left;</span><br><span class="line">            <span class="attribute">min-height</span>: <span class="number">100px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.layout</span><span class="selector-class">.grail</span> <span class="selector-class">.center</span> &#123;</span><br><span class="line">            <span class="attribute">background</span>: yellow;</span><br><span class="line">            <span class="attribute">width</span>:<span class="number">100%</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.layout</span><span class="selector-class">.grail</span> <span class="selector-class">.left</span> &#123;</span><br><span class="line">            <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">            <span class="attribute">background</span>: red;</span><br><span class="line">            <span class="attribute">position</span>: relative;</span><br><span class="line">            <span class="attribute">left</span>: -<span class="number">300px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.layout</span><span class="selector-class">.grail</span> <span class="selector-class">.right</span> &#123;</span><br><span class="line">            <span class="attribute">margin-left</span>: -<span class="number">300px</span>;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">            <span class="attribute">background</span>: blue;</span><br><span class="line">            <span class="attribute">position</span>: relative;</span><br><span class="line">            <span class="attribute">right</span>: -<span class="number">300px</span>;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ˜¯ç»™çˆ¶å®¹å™¨è®¾ç½®</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line">   <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">300px</span> <span class="number">0</span> <span class="number">300px</span>;</span><br></pre></td></tr></table></figure><p>åœ£æ¯å¸ƒå±€çš„ä¼˜ç‚¹ï¼š</p><ul><li>ä¸»åˆ—ç‡å…ˆåŠ è½½</li><li>å…è®¸ä»»ä½•åˆ—æ˜¯æœ€é«˜çš„</li><li>DOMç»“æ„ç®€å•</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>å’ŒåŒé£ç¿¼å¸ƒå±€ç›¸æ¯”CSSæ ·å¼è¾ƒä¸ºå¤æ‚</li></ul><h4 id="2-åŒé£ç¿¼å¸ƒå±€"><a class="header-anchor" href="#2-åŒé£ç¿¼å¸ƒå±€">Â¶</a>2.<strong>åŒé£ç¿¼å¸ƒå±€</strong></h4><p>åŒé£ç¿¼å¸ƒå±€æºè‡ªæ·˜å®UEDï¼Œç¬¬ä¸€æ­¥å’Œåœ£æ¯å¸ƒå±€ä¸€æ ·ï¼Œæµ®åŠ¨ä¸‰åˆ—ï¼Œç»™å·¦å³ä¸¤åˆ—è®¾ç½®è´Ÿå¤–è¾¹è·ï¼›åŒæ ·ä¼šè¦†ç›–ä¸»åˆ—mainï¼ŒåŒé£ç¿¼å¸ƒå±€çš„åšæ³•æ˜¯åœ¨ä¸»åˆ—mainåé¢æ·»åŠ äº†ä¸€ä¸ªå®½åº¦ä¸º100%çš„divï¼Œå†è®¾ç½®ä¸»åˆ—mainçš„å·¦å³è¾¹è·ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrap</span>&#123;</span><br><span class="line">          <span class="attribute">float</span>: left;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="selector-class">.main</span>&#123;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">          <span class="attribute">margin-left</span>: <span class="number">110px</span>;</span><br><span class="line">          <span class="attribute">margin-right</span>: <span class="number">210px</span>;</span><br><span class="line">          <span class="attribute">background-color</span>: <span class="number">#01549b</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="selector-class">.left</span>&#123;</span><br><span class="line">          <span class="attribute">float</span>: left;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">          <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">          <span class="attribute">background-color</span>: <span class="number">#bd4147</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="selector-class">.right</span>&#123;</span><br><span class="line">          <span class="attribute">float</span>: left;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">          <span class="attribute">margin-left</span>: -<span class="number">200px</span>;</span><br><span class="line">          <span class="attribute">background-color</span>: <span class="number">#419641</span>;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼š</p><ul><li>ç‡å…ˆåŠ è½½ä¸»åˆ—main</li><li>å…è®¸ä»»ä½•åˆ—æ˜¯æœ€é«˜çš„</li><li>CSSæ ·å¼ç®€å•</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>å’Œåœ£æ¯å¸ƒå±€ç›¸æ¯”DOMç»“æ„è¾ƒä¸ºå¤æ‚</li></ul><h3 id="ç°ä»£å¸ƒå±€"><a class="header-anchor" href="#ç°ä»£å¸ƒå±€">Â¶</a>ç°ä»£å¸ƒå±€</h3><h4 id="1-flex-å¸ƒå±€"><a class="header-anchor" href="#1-flex-å¸ƒå±€">Â¶</a>1.flex å¸ƒå±€</h4><p><a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html">Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡</a>  é˜®ä¸€å³°è€å¸ˆç¿»è¯‘çš„css-tricksä¸Šçš„æ–‡ç« ã€‚</p><p>åŸæ–‡åœ°å€ï¼š<a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/">A Complete Guide to Flexbox</a></p><p>ç”¨<code>Flex</code>å¸ƒå±€å®ç°ä¸­é—´è‡ªé€‚åº”ï¼Œä¸¤è¾¹å›ºå®šï¼Œå¾ˆç®€å•ã€‚</p><p><code>dom</code>èŠ‚ç‚¹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">     header</span><br><span class="line"> <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span> </span><br><span class="line">         left</span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span>&gt;</span> </span><br><span class="line">         center</span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line">          right</span><br><span class="line">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">     footer</span><br><span class="line"> <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>css</code>ä»£ç </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: aquamarine;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: black;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">350px</span>;</span><br><span class="line"><span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªè¦æŠŠçˆ¶çš„<code>dom</code>çš„<code>display</code>è®¾ç½®ä¸º<code>flex</code>å°±è¡Œäº†ã€‚</p><h4 id="2-grid-å¸ƒå±€"><a class="header-anchor" href="#2-grid-å¸ƒå±€">Â¶</a>2.grid å¸ƒå±€</h4><p><a href="https://www.jianshu.com/p/d183265a8dad">Gridå¸ƒå±€æŒ‡å—</a>  ä¹Ÿæ˜¯ä¸€ç¯‡è¯‘æ–‡ã€‚</p><p>åŸæ–‡åœ°å€ï¼š<a href="https://css-tricks.com/snippets/css/complete-guide-grid/#prop-grid-column-row">A Complete Guide to Grid</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;grid&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span></span><br><span class="line">        left</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;rigth&#x27;</span>&gt;</span></span><br><span class="line">        right</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.grid</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">200px</span> auto;</span><br><span class="line">    <span class="attribute">grid-template-rows</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>èµ„æ–™å’Œä»£ç æ¥æºï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/25353247">åŒé£ç¿¼å¸ƒå±€ä¸åœ£æ¯å¸ƒå±€</a></p><p><a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html">Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> html5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>typora-ä¸€ä¸ªæ‰€è§å³æ‰€å¾—çš„æ–‡æœ¬ç¼–è¾‘å™¨</title>
      <link href="/posts/f7575273/"/>
      <url>/posts/f7575273/</url>
      
        <content type="html"><![CDATA[<h3 id="typora"><a class="header-anchor" href="#typora">Â¶</a>typora</h3><p>â€‹å¾ˆä¹…å¾ˆä¹…ä¹‹å‰ï¼Œæˆ‘ä»¥ä¸º<code>word</code>å°±æ˜¯<strong>æ‰€è§å³æ‰€å¾—</strong>çš„æœ€ä½³æ–‡æ¡£ç¼–å†™å·¥å…·ï¼Œç›´åˆ°ç†¬å¤œå†™å®Œæ¯•ä¸šè®ºæ–‡ï¼Œç¬¬äº”æ¬¡è·‘åˆ°æ‰“å°åº—æ›´æ­£æ ¼å¼ï¼Œæ¥æ»¡è¶³èŒƒæ–‡çš„æ­£ç¡®æ ¼å¼ã€‚æˆ‘çªç„¶æ˜ç™½ï¼ŒåŒå­¦å’Œæˆ‘è¯´ï¼Œä¸€å®šè¦ç”¨<code>pdf</code>æ¥å†™è®ºæ–‡æ˜¯ä»€ä¹ˆæ„æ€äº†ã€‚</p><h4 id="1-çœŸæ­£çš„æ‰€è§å³æ‰€å¾—"><a class="header-anchor" href="#1-çœŸæ­£çš„æ‰€è§å³æ‰€å¾—">Â¶</a>1.çœŸæ­£çš„æ‰€è§å³æ‰€å¾—</h4><p>â€‹word åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œä¹Ÿå¾ˆå¤æ‚ï¼Œæ˜¯éå¸¸éå¸¸éå¸¸ï¼ˆé‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼‰ä¸“ä¸šçš„æ–‡æœ¬å¤„ç†è½¯ä»¶ï¼Œä½†æ˜¯ï¼Œæœ‰æ—¶æˆ‘ä»¬åªæƒ³å†™ç®€å•çš„æ–‡æ¡£ï¼Œä¸ºæ¯›åœ¨è‡ªå·±ç”µè„‘ä¸Šçœ‹åˆ°çš„å’Œæ‰“å°å‡ºæ¥çš„ä¸ä¸€æ ·å‘¢ï¼Ÿè¿™å°±å¾ˆä»¤äººçƒ¦æ¼ã€‚</p><p>â€‹ç”¨typora + markdownæ¥å†™ç®€å•çš„æ–‡æ¡£æ˜¯å†åˆé€‚ä¸è¿‡äº†ï¼Œä»¤äººæƒŠå¥‡çš„çš„æ˜¯ï¼Œtyporaä¸æƒ³å…¶ä»–çš„markdownè½¯ä»¶ï¼Œæœ‰ç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºä¸¤ä¸ªéƒ¨åˆ†ï¼Œå®ƒåªæœ‰ç¼–è¾‘åŒºï¼Œå½“ä½ è¾“å…¥ä¸€è¡Œmarkdownè¯­æ³•çš„æ–‡æœ¬ï¼ŒæŒ‰ä¸‹å›è½¦ï¼Œè¿™è¡Œæ–‡æœ¬ç«‹åˆ»è¢«æ¸²æŸ“æˆæœ€ç»ˆå±•ç¤ºçš„æ•ˆæœã€‚</p><p>æ¯”å¦‚è¾“å…¥</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### è¿™æ˜¯ä¸‰çº§æ ‡é¢˜</span></span><br></pre></td></tr></table></figure><p>ç«‹åˆ»ç”Ÿæˆ</p><hr><h3 id="è¿™æ˜¯ä¸‰çº§æ ‡é¢˜"><a class="header-anchor" href="#è¿™æ˜¯ä¸‰çº§æ ‡é¢˜">Â¶</a>è¿™æ˜¯ä¸‰çº§æ ‡é¢˜</h3><hr><p>å…¶ä»–çš„åŒ…æ‹¬æœ‰åºï¼Œæ— åºåˆ—è¡¨ï¼Œè¡¨æ ¼ï¼Œå›¾ç‰‡ç­‰éƒ½æ˜¯è¿™æ ·ã€‚</p><h3 id="2-æ•°å­¦ä»£ç å—"><a class="header-anchor" href="#2-æ•°å­¦ä»£ç å—">Â¶</a>2.æ•°å­¦ä»£ç å—</h3><p>â€‹markdownä¸­çš„æ•°å­¦è¡¨è¾¾å¼çš„è¯­æ³•è·Ÿlatexçš„è¯­æ³•ä¸€æ ·ï¼Œä¹ æƒ¯latexè¯­æ³•çš„äººå¯ä»¥é‡‡ç”¨latexçš„è¯­æ³•ç¼–è¾‘æ•°å­¦è¡¨è¾¾å¼ï¼Œä½†æ˜¯å…¶ä¸­ä¹Ÿæœ‰ä¸€äº›ä¸åŒï¼Œæ¯”å¦‚ï¼š</p><p>æ•°å­¦è¡¨è¾¾å¼çš„æ–œä½“å­—å¼ºåˆ¶ä¸ºéæ–œä½“å­—ï¼š{\rm [éæ–œä½“å­—çš„å†…å®¹]}</p><p>å‡è®¾è¦å°†è¡¨è¾¾å¼ä¸­çš„andæ”¹ä¸ºéæ–œä½“å­—çš„æ ¼å¼ï¼Œå¯ä»¥é‡‡ç”¨ {\rm and}å®ç°ã€‚</p><p>è¡Œå†…å…¬å¼å¯ä»¥ç”¨$$åè¾“å…¥å›è½¦æ¥æ’å…¥æ•°å­¦å…¬å¼ã€‚ï¼ˆéœ€è¦åœ¨File-&gt;Preferencesä¸­å‹¾é€‰â€œInline mathâ€ï¼‰</p><p>è¿™ä¸ªæˆ‘ç°åœ¨ç”¨çš„å¾ˆå°‘ï¼Œåªæ¨å½“æ—¶å†å­¦æ ¡çš„æ—¶å€™ä¸çŸ¥é“è¿™ä¸ªç¥å™¨ï¼Œç”¨word å†™æ•°å­¦å…¬å¼æœ‰å¤šç—›è‹¦:ï¼Œç”¨è¿‡çš„éƒ½çŸ¥é“ã€‚</p><h3 id="3-ç»˜åˆ¶å›¾è¡¨"><a class="header-anchor" href="#3-ç»˜åˆ¶å›¾è¡¨">Â¶</a>3.ç»˜åˆ¶å›¾è¡¨</h3><p>ä»£ç æ¥è‡ªå®˜æ–¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">graph LR</span><br><span class="line">A[Hard edge] --&gt;B(Round edge)</span><br><span class="line">    B --&gt; C&#123;Decision&#125;</span><br><span class="line">    C --&gt;|One| D[Result one]</span><br><span class="line">    C --&gt;|Two| E[Result two]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯¹åº”çš„æ˜¯ï¼š</p><p><img src="https://wx4.sinaimg.cn/mw1024/bca3c023gy1g1xv6mmn64j20wm07sjrb.jpg" alt="img"></p><p>æ­¤å¤–ï¼Œè¿˜æ”¯æŒæµç¨‹å›¾</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">st=&gt;start: å¼€å§‹æ¡†</span><br><span class="line"></span><br><span class="line">op=&gt;operation: å¤„ç†æ¡†</span><br><span class="line"></span><br><span class="line">cond=&gt;condition: åˆ¤æ–­æ¡†(æ˜¯æˆ–å¦?)</span><br><span class="line"></span><br><span class="line">sub1=&gt;subroutine: å­æµç¨‹</span><br><span class="line"></span><br><span class="line">io=&gt;inputoutput: è¾“å…¥è¾“å‡ºæ¡†</span><br><span class="line"></span><br><span class="line">e=&gt;end: ç»“æŸæ¡†</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">st-&gt;</span><span class="language-bash">op-&gt;cond</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">cond(yes)-&gt;</span><span class="language-bash">io-&gt;e</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">cond(no)-&gt;</span><span class="language-bash">sub1(right)-&gt;op</span></span><br></pre></td></tr></table></figure><p><img src="https://wx3.sinaimg.cn/mw1024/bca3c023gy1g1xv6mhti3j20wn0hrjrk.jpg" alt="img"></p><p>UMLæ—¶åºå›¾ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å¯¹è±¡A-&gt;å¯¹è±¡B: å¯¹è±¡Bä½ å¥½å—?ï¼ˆè¯·æ±‚ï¼‰</span><br><span class="line"></span><br><span class="line">Note right of å¯¹è±¡B: å¯¹è±¡Bçš„æè¿°</span><br><span class="line"></span><br><span class="line">Note left of å¯¹è±¡A: å¯¹è±¡Açš„æè¿°(æç¤º)</span><br><span class="line"></span><br><span class="line">å¯¹è±¡B--&gt;å¯¹è±¡A: æˆ‘å¾ˆå¥½(å“åº”)</span><br><span class="line"></span><br><span class="line">å¯¹è±¡A-&gt;å¯¹è±¡B: ä½ çœŸçš„å¥½å—</span><br></pre></td></tr></table></figure><p><img src="https://wx1.sinaimg.cn/mw1024/bca3c023gy1g1xv6mhnjkj20wk0b60ss.jpg" alt="img"></p><p>æ€ä¹ˆæ ·ï¼Ÿæ˜¯ä¸æ˜¯å¾ˆå¼ºå¤§ã€‚</p><p>å­¦ä¼šä¸Šé¢ä¸‰ç§è¯­æ³•ï¼Œç®€å•ç”»å›¾å†ä¹Ÿä¸ç”¨wordï¼Œviso,è¿™äº›å å†…å­˜çš„ä¸“ä¸šè½¯ä»¶äº†ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> typora </tag>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaScriptå¼‚æ­¥æ“ä½œè¿›åŒ–æ›²</title>
      <link href="/posts/2b77e8c0/"/>
      <url>/posts/2b77e8c0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è€ç”Ÿå¸¸è°ˆï¼Œä»Šå¤©ä¹Ÿæ¥æ€»ç»“ä¸‹<code>javaScript</code> ä¸­å¼‚æ­¥æ“ä½œçš„å†å²ã€‚</p></blockquote><p><em>TL;DR</em><br>1.åŒæ­¥å’Œå¼‚æ­¥åŒºåˆ«<br>2.ç»å…¸çš„å›è°ƒå‡½æ•°<br>3.ç®€å•æ˜äº†çš„<code>promise</code>å‡½æ•°<br>4.æœªæ¥çš„ä¸»æµ<code>async</code>å‡½æ•°</p><h2 id="åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«"><a class="header-anchor" href="#åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«">Â¶</a>åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«</h2><p>å¼‚æ­¥ç®€å•æ¥è¯´å°±æ˜¯åšä¸€ä»¶äº‹æ—¶ï¼Œåšåˆ°ä¸€åŠå¯èƒ½éœ€è¦ç­‰å¾…ç³»ç»Ÿæˆ–æœåŠ¡å¤„ç†ä¹‹åæ‰ä¼šå¾—åˆ°å“åº”å’Œç»“æœï¼Œæ­¤æ—¶å¯ä»¥è½¬å»åšå¦ä¸€ä»¶äº‹ï¼Œç­‰åˆ°è·å¾—å“åº”ä¹‹ååœ¨å»æ‰§è¡Œå‰©ä¸‹ä¸€åŠçš„äº‹æƒ…ã€‚åä¹‹åŒæ­¥å°±æ˜¯ä¸€ç›´ç­‰åˆ°å“åº”ç„¶åæ¥ç€åšäº‹ï¼Œä¸­é—´ä¸ä¼šè·³å»åšåˆ«çš„äº‹ã€‚</p><h2 id="å›è°ƒå‡½æ•°"><a class="header-anchor" href="#å›è°ƒå‡½æ•°">Â¶</a>å›è°ƒå‡½æ•°</h2><p>å°±æ˜¯æˆ‘ä»¬ç»å¸¸ç”¨åˆ°çš„å›è°ƒå‡½æ•°ï¼Œæœ€å¼€å§‹ç”¨ ajax çš„æ—¶å€™ï¼Œä¼šå†™å‡ºä¸‹é¢æ ·å­çš„ä»£ç ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&quot;path&quot;</span>,</span><br><span class="line">  <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç¼ºç‚¹æ˜¯è¯»èµ·æ¥è·³è·ƒæ€§å¤ªå¼ºï¼Œä¸å¥½è·Ÿè¸ªä»£ç ã€‚è€Œä¸”åœ¨å‰åä¾èµ–çš„æ—¶å€™ï¼Œå½¢æˆå›è°ƒåœ°ç‹±ï¼Œä¸€æ—¦ä¿®æ”¹ä¸€ä¸ªï¼ŒåµŒå¥—çš„éƒ½è¦æ”¹ã€‚å¦å¤–å°±æ˜¯æ— æ³•åˆå¹¶å¤šä¸ªå¼‚æ­¥ä»£ç ã€‚</p><h2 id="ç®€å•æ˜äº†çš„promiseå‡½æ•°"><a class="header-anchor" href="#ç®€å•æ˜äº†çš„promiseå‡½æ•°">Â¶</a>ç®€å•æ˜äº†çš„<code>promise</code>å‡½æ•°</h2><p>Promise çš„å¼•å…¥å°±è§£å†³äº†ä»¥ä¸Šè¿™äº›é—®é¢˜,é¦–å…ˆæ¥çœ‹ä¸‹ Promise çš„ç®€å•ç”¨æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="number">100</span>)ï¼›</span><br><span class="line">&#125;)ï¼›</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;data&#x27;</span>, data);</span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;err&#x27;</span>, err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° Promis é€šè¿‡ then çš„é“¾å¼è°ƒç”¨è§£å†³äº†åµŒå¥—å›è°ƒçš„é—®é¢˜ï¼Œåœ¨ç”¨æ³•ä¸Š Promise çš„æ„é€ å‡½æ•°ä¼šæ¥å—ä¸€ä¸ª executor å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¸¦æœ‰ä¸¤ä¸ªå‚æ•° resolve å’Œ rejectï¼Œä¸¤ä¸ªå‚æ•°èƒŒåå…¶å®å°±æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œè€Œé€šè¿‡ Promise æ„é€ å‡½æ•°åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ä¼šä¿å­˜ä¸€ä¸ª status å±æ€§ï¼Œresolve ä¼šåšçš„äº‹å°±æ˜¯å°†è¿™ä¸ªå±æ€§ä»åˆå§‹åŒ–çš„ pending è½¬ä¸º resolvedï¼Œè€Œ reject åˆ™æ˜¯è½¬ä¸º rejectedï¼ŒåŒæ—¶ä¸¤ä¸ªå‡½æ•°éƒ½å¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œä½œä¸ºä¹‹å then ä¸­å›è°ƒå‡½æ•°çš„å‚æ•°ä¼ å…¥ï¼Œé‚£ä¹ˆåœ¨ then æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯æˆåŠŸ resolved ä¹‹åä¼šè°ƒç”¨çš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå°±æ˜¯ rejected çš„å›è°ƒå‡½æ•°ã€‚<br>è¿™é‡Œæ³¨æ„çš„æ˜¯ï¼Œåªè¦çŠ¶æ€è½¬ä¸º resolved æˆ– rejected ä¹‹ä¸­çš„å…¶ä¸­ä¸€ä¸ªï¼Œé‚£ä¹ˆå½“å‰ promise å¯¹è±¡å°±ä¸èƒ½å†è½¬å˜çŠ¶æ€äº†ã€‚ä¹‹åä¸ç®¡è°ƒ resolve è¿˜æ˜¯ reject éƒ½ä¼šè¢«å¿½ç•¥ã€‚<br>å¦å¤–ï¼Œä¸Šé¢æ‰€è¯´ Promise æ˜¯å¯ä»¥æ”¯æŒé“¾å¼è°ƒç”¨çš„ï¼Œæ‰€ä»¥ then æ˜¯å¯ä»¥å¤šæ¬¡è°ƒç”¨çš„ï¼Œä½†æ˜¯å› ä¸ºåˆšåˆšæ‰€è¯´çŠ¶æ€ä¸å¯è½¬å˜çš„é—®é¢˜ï¼Œæ‰€ä»¥é“¾å¼è°ƒç”¨æ¯æ¬¡ then è¿”å›çš„ä¸æ˜¯å½“å‰çš„ Promise å¯¹è±¡è€Œæ˜¯ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼Œé‚£ä¹ˆç¬¬ 2 æ¬¡ then çš„çŠ¶æ€åˆæ˜¯æ€ä¹ˆå†³å®šçš„å‘¢ï¼Œç¬¬ä¸€æ¬¡ then ä¸­æ— è®ºæ˜¯æˆåŠŸçš„å›è°ƒè¿˜æ˜¯å¤±è´¥çš„å›è°ƒåªè¦è¿”å›äº†ç»“æœå°±ä¼šèµ°ä¸‹ä¸€ä¸ª then ä¸­çš„æˆåŠŸï¼Œå¦‚æœæœ‰é”™è¯¯èµ°ä¸‹ä¸€ä¸ª then çš„å¤±è´¥ã€‚</p><p>æ­¤å¤–ï¼Œ<code>promise</code> è¿˜æœ‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>();</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">race</span>();</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">reject</span>();</span><br></pre></td></tr></table></figure><p>è¿™äº› api<br><a href="http://es6.ruanyifeng.com/#docs/promise">Promise å¯¹è±¡</a>ã€‚</p><p>å…³äº promise çš„å®ç°ï¼Œå¯ä»¥çœ‹ä¸‹ PromiseA+çš„åŸåˆ™ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå®ç°ï¼š</p><!-- Get UTF-8 Size (ANSI C) --><!-- Begin --><script src="https://gist.github.com/zzz1220/5fad2985f43f235ed59702b805a7d824.js"></script><!-- End --><h2 id="async-await"><a class="header-anchor" href="#async-await">Â¶</a>async+await</h2><p>async+await å°±æ˜¯ç›®å‰ä¸ºè‡³ï¼Œå¼‚æ­¥çš„æœ€ä½³è§£å†³æ–¹æ¡ˆï¼Œå®ƒåŒæ—¶è§£å†³äº†<br>å…¶å®ï¼Œå®ƒæ˜¯<code>Generator</code>å‡½æ•°çš„è¯­æ³•ç³–ï¼Œä¹‹åæˆ‘ä¼šå•ç‹¬å†™ä¸€ç¯‡åšæ–‡ä»‹ç»<code>Generator</code>å‡½æ•°å’Œå®ƒçš„å¼‚æ­¥ç”¨æ³•ã€‚<br>å›è°ƒåœ°ç‹±<br>å¹¶å‘æ‰§è¡Œå¼‚æ­¥ï¼Œåœ¨åŒä¸€æ—¶åˆ»åŒæ­¥è¿”å›ç»“æœ Promise.all<br>è¿”å›å€¼çš„é—®é¢˜<br>å¯ä»¥å®ç°ä»£ç çš„ try/catch;</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bluebird = <span class="built_in">require</span>(<span class="string">&#x27;bluebird&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> read = bluebird.<span class="title function_">promisify</span>(fs.<span class="property">readFile</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨asyncæ¥ä¿®é¥°å‡½æ•°ï¼Œaysncéœ€è¦é…await, awaitåªèƒ½æ¥promise</span></span><br><span class="line"><span class="comment">// asyncå’Œawait(è¯­æ³•ç³–) === co + generator</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">r</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> content1 = <span class="keyword">await</span> <span class="title function_">read</span>(<span class="string">&#x27;./2.promise/100.txt&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">        <span class="keyword">let</span> content2 = <span class="keyword">await</span> <span class="title function_">read</span>(content1, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> content2;</span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123; <span class="comment">// å¦‚æœå‡ºé”™ä¼šcatch</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;err&#x27;</span>, e)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// asyncå‡½æ•°è¿”å›çš„æ˜¯promise</span></span><br><span class="line"><span class="title function_">r</span>().<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;flag&#x27;</span>, data);</span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);<span class="string">`</span></span><br><span class="line"><span class="string">&#125;)</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œè¿˜æœ‰ Generator å®ç°çš„ï¼Œåˆ©ç”¨<code>co</code>åº“å®ç° next æ–¹æ³•åµŒå¥—å–å€¼æ‰§è¡Œï¼Œæœ¬äººå¾ˆå°‘ç”¨åˆ°ï¼Œå°±ä¸è¯¦ç»†ä»‹ç»äº†ã€‚<br>å¯ä»¥çœ‹<a href="http://es6.ruanyifeng.com/#docs/generator-async">Generator å‡½æ•°çš„å¼‚æ­¥åº”ç”¨</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> javaScript </tag>
            
            <tag> promise </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jså˜é‡æå‡çš„åŸç†</title>
      <link href="/posts/97277281/"/>
      <url>/posts/97277281/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ–°ç‰ˆçš„es6é‡Œé¢ï¼ŒåŠ å…¥äº†å—çº§ä½œç”¨åŸŸ<code>let</code>,ç®—æ˜¯è§£å†³äº†é•¿ä¹…ä»¥æ¥javascriptçš„å˜é‡æå‡é—®é¢˜ã€‚æ²¡æœ‰<code>let</code>ä¹‹å‰ï¼Œå˜é‡åªæœ‰å‡½æ•°å†…çš„ä½œç”¨åŸŸå’Œå…¨å±€ä½œç”¨åŸŸï¼ˆå…¶å®å…¨å±€ä¹Ÿæ˜¯åœ¨<code>window</code>è¿™ä¸ªå¯¹è±¡ä¸‹çš„ï¼‰ï¼Œä¸€æ–¹é¢å¦‚æœå¿˜è®°åŠ ä¸Š<code>var</code>,ä½œç”¨åŸŸå°±ä¼šæå‡ï¼Œå¦ä¸€æ–¹é¢ï¼Œå¯¹å˜é‡æå‡ä¸€çŸ¥åŠè§£ï¼Œå¯¼è‡´å˜é‡å…ˆè®¡ç®—ï¼Œå†èµ‹å€¼ï¼Œä¼šé€ æˆéš¾ä»¥é¢„æ–™çš„é—®é¢˜ã€‚</p></blockquote><h2 id="JSå¼•æ“çš„æ–¹å¼"><a class="header-anchor" href="#JSå¼•æ“çš„æ–¹å¼">Â¶</a>JSå¼•æ“çš„æ–¹å¼</h2><p>å› ä¸ºjavaScriptæ˜¯è„šæœ¬è¯­è¨€ï¼Œè¿è¡Œåœ¨JSè™šæ‹Ÿæœºé‡Œé¢ï¼Œå› æ­¤ï¼Œéå¸¸æœ‰å¿…è¦äº†è§£ä¸€ä¸‹JSå¼•æ“æ‰§è¡ŒJSä»£ç çš„è¿‡ç¨‹ã€‚<br>JSå¼•æ“çš„å·¥ä½œæ–¹å¼å°±æ˜¯ï¼š1ï¼Œè§£æï¼ˆç¼–è¯‘ï¼‰JSä»£ç ï¼Œè¿™æ—¶å€™ä¼šå£°æ˜æ‰€æœ‰çš„å˜é‡ï¼Œæ³¨æ„è¿™é‡Œæ²¡æœ‰å¯¹å˜é‡èµ‹å€¼ï¼›2ï¼Œè¿è¡Œï¼Œè¿è¡Œçš„æ—¶å€™ä¼šå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ã€‚åŒä¸€ä¸ªä½œç”¨åŸŸå†…ï¼Œå˜é‡çš„å£°æ˜è¯­å¥éƒ½ä¼šè¢«æå‡åˆ°ä»£ç çš„å¤´éƒ¨ï¼Œè¿™ä¸ªå°±æ˜¯å˜é‡æå‡ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœæ˜¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure><p>å› ä¸ºå˜é‡æå‡åæ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a ;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">a = <span class="number">10</span>;</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šè¿è¡Œçš„æ—¶å€™ï¼Œ<code>a</code>è¿˜æ²¡æœ‰è¢«èµ‹å€¼ã€‚</p><h2 id="éœ€è¦æ³¨æ„çš„åœ°æ–¹"><a class="header-anchor" href="#éœ€è¦æ³¨æ„çš„åœ°æ–¹">Â¶</a>éœ€è¦æ³¨æ„çš„åœ°æ–¹</h2><p>1.å˜é‡æå‡åªå¯¹varå‘½ä»¤å£°æ˜çš„å˜é‡æœ‰æ•ˆï¼Œå¦‚æœä¸€ä¸ªå˜é‡ä¸æ˜¯ç”¨varå‘½ä»¤å£°æ˜çš„ï¼Œå°±ä¸ä¼šå‘ç”Ÿå˜é‡æå‡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(aa);</span><br><span class="line">aa =<span class="number">1</span>;  <span class="comment">// ä¼šæŠ¥é”™</span></span><br></pre></td></tr></table></figure><p>2.functionä¹Ÿå¯ä»¥çœ‹ä¸ºå˜é‡ï¼Œä¼šå‘ç”Ÿæå‡ã€‚ä½†æ˜¯å¦‚æœæ˜¯èµ‹å€¼çš„å½¢å¼ï¼Œåˆ™ä¸ä¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>)&#123;&#125;; <span class="comment">// ä¼šæå‡</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;; <span class="comment">// ä¸ä¼šæå‡ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯èµ‹å€¼è¯­å¥ï¼Œè¿è¡Œæ—¶ï¼Œbæ²¡æœ‰è¢«èµ‹å€¼ï¼Œå› æ­¤æ˜¯undefined</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> javaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML5åˆ°åº•æ˜¯å•¥ï¼Ÿ</title>
      <link href="/posts/d374f967/"/>
      <url>/posts/d374f967/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç°åœ¨æ‹›è˜å‰ç«¯ä¿¡æ¯ä¸ŠåŠ¨ä¸åŠ¨å°±æ˜¯ç†Ÿç»ƒæŒæ¡h5å¼€å‘ï¼Œæˆ‘æœ‰ç‚¹è´¹è§£ï¼Œh5åˆ°åº•æ˜¯å•¥ï¼Ÿè²Œä¼¼å¹³æ—¶ä¹Ÿæœ‰ç”¨åˆ°H5çš„æ–°æ ‡ç­¾å’ŒwebSocketç­‰æŠ€æœ¯ï¼Œè¿™æ ·ç®—æ˜¯æŒæ¡h5å¼€å‘äº†å—ï¼ŸæŸ¥æ‰¾èµ„æ–™åç®€å•ä»‹ç»ä¸‹è¿™ä¸ªå½“çº¢çš„æŠ€æœ¯ã€‚</p></blockquote><h2 id="html5ä»‹ç»ï¼š"><a class="header-anchor" href="#html5ä»‹ç»ï¼š">Â¶</a>html5ä»‹ç»ï¼š</h2><p>html5æ˜¯è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€çš„ç¬¬äº”ä»£ã€‚<br>ç‹­ä¹‰ä¸Šçš„HTML5ï¼š</p><ol><li>HTML4.0çš„å‡çº§ç‰ˆæœ¬</li><li>HTML5+CSS3+æ–°å¢JS API</li><li>W3Cåˆ¶å®šçš„å…³äºHTMLæŠ€æœ¯çº¦å®šçš„æ–°è§„èŒƒ</li></ol><p>å¹¿ä¹‰ä¸Šçš„HTML5ï¼š</p><ol><li>HTML5è¡Œä¸šçš„ä»£åè¯</li><li>è¡Œä¸šçš„æŠ€æœ¯æ ‡å‡†</li><li>å½“å‰æ–°æŠ€æœ¯çš„ä»£åè¯</li></ol><p>å…¶å®ï¼Œæœ‰äº›æ‹›è˜çš„è¦æ±‚ä¼šh5ï¼Œå°±æ˜¯ä¼šåšé‚£äº›å¾®ä¿¡æ‰«ç æ‰“å¼€çš„ç‚«é…·å®£ä¼ é¡µé¢ï¼Œæ¯”å¦‚æ´»åŠ¨é¡µé¢ï¼Œç¥ç¦è´ºå¡ä¹‹ç±»çš„ï¼Œå½“ç„¶ï¼Œè¿™äº›åªæ˜¯h5çš„ä¸€å°éƒ¨åˆ†å†…å®¹.h5åŒ…æ‹¬ä»¥ä¸‹éƒ¨åˆ†ï¼š</p><ol><li>æ–°å¢æ ‡ç­¾ä»¥åŠå±æ€§ï¼›</li><li>CSS3çš„æ–°ç‰¹æ€§ï¼›</li><li>Canvasç»˜å›¾ï¼›</li><li>JavaScriptçš„æ–°å¢APIï¼ˆå¦‚é‡åŠ›æ„Ÿåº”ã€HTML5è§†éŸ³é¢‘ç­‰ï¼‰ï¼›</li><li>ç§»åŠ¨ç«¯ã€‚</li></ol><h2 id="æ–°ç‰¹æ€§ä»‹ç»ï¼š"><a class="header-anchor" href="#æ–°ç‰¹æ€§ä»‹ç»ï¼š">Â¶</a>æ–°ç‰¹æ€§ä»‹ç»ï¼š</h2><p>1.æ–°æ ‡ç­¾ï¼š<br/><br>Html5æ–°å¢äº† 27 ä¸ªå…ƒç´ ï¼ŒåºŸå¼ƒäº† 16 ä¸ªå…ƒç´ ï¼Œæ ¹æ®ç°æœ‰çš„æ ‡å‡†è§„èŒƒï¼ŒæŠŠ HTML5 çš„å…ƒç´ æŒ‰ä¼˜å…ˆçº§å®šä¹‰ä¸ºç»“æ„æ€§å±æ€§ã€çº§å—æ€§å…ƒç´ ã€è¡Œå†…è¯­ä¹‰æ€§å…ƒç´ å’Œäº¤äº’æ€§å…ƒç´  4 å¤§ç±»ã€‚<br/><br>ç»“æ„æ€§å…ƒç´ ä¸»è¦è´Ÿè´£webä¸Šä¸‹æ–‡ç»“æ„çš„å®šä¹‰ <br/><br>sectionï¼šåœ¨ web é¡µé¢åº”ç”¨ä¸­ï¼Œè¯¥å…ƒç´ ä¹Ÿå¯ä»¥ç”¨äºåŒºåŸŸçš„ç« èŠ‚æè¿°ã€‚<br/><br>headerï¼šé¡µé¢ä¸»ä½“ä¸Šçš„å¤´éƒ¨ï¼Œ header å…ƒç´ å¾€å¾€åœ¨ä¸€å¯¹ body å…ƒç´ ä¸­ã€‚<br/><br>footerï¼šé¡µé¢çš„åº•éƒ¨ï¼ˆé¡µè„šï¼‰ï¼Œé€šå¸¸ä¼šæ ‡å‡ºç½‘ç«™çš„ç›¸å…³ä¿¡æ¯ã€‚<br/><br>navï¼šä¸“é—¨ç”¨äºèœå•å¯¼èˆªã€é“¾æ¥å¯¼èˆªçš„å…ƒç´ ï¼Œæ˜¯ navigator çš„ç¼©å†™ã€‚<br/><br>articleï¼šç”¨äºè¡¨ç°ä¸€ç¯‡æ–‡ç« çš„ä¸»ä½“å†…å®¹ï¼Œä¸€èˆ¬ä¸ºæ–‡å­—é›†ä¸­æ˜¾ç¤ºçš„åŒºåŸŸã€‚<br/><br>çº§å—æ€§å…ƒç´ ä¸»è¦å®Œæˆwebé¡µé¢åŒºåŸŸçš„åˆ’åˆ†ï¼Œç¡®ä¿å†…å®¹çš„æœ‰æ•ˆåˆ†å‰²ã€‚<br/><br>asideï¼šç”¨äºè¡¨è¾¾æ³¨è®°ã€è´´å£«ã€ä¾§æ ã€æ‘˜è¦ã€æ’å…¥çš„å¼•ç”¨ç­‰ä½œä¸ºè¡¥å……ä¸»ä½“çš„å†…å®¹ã€‚<br/><br>figureï¼šæ˜¯å¯¹å¤šä¸ªå…ƒç´ è¿›è¡Œç»„åˆå¹¶å±•ç¤ºçš„å…ƒç´ ï¼Œé€šå¸¸ä¸ ficaption è”åˆä½¿ç”¨ã€‚<br/><br>codeï¼šè¡¨ç¤ºä¸€æ®µä»£ç å—ã€‚<br/><br>dialogï¼šç”¨äºè¡¨è¾¾äººä¸äººä¹‹é—´çš„å¯¹è¯ï¼Œè¯¥å…ƒç´ åŒ…å« dt å’Œ dd è¿™ä¸¤ä¸ªç»„åˆå…ƒç´ ï¼Œ dt ç”¨äºè¡¨ç¤ºè¯´è¯è€…ï¼Œè€Œ dd ç”¨æ¥è¡¨ç¤ºè¯´è¯å†…å®¹ã€‚<br/><br>è¡Œå†…è¯­ä¹‰æ€§å…ƒç´ ä¸»è¦å®Œæˆwebé¡µé¢å…·ä½“å†…å®¹çš„å¼•ç”¨å’Œæè¿°ï¼Œæ˜¯ä¸°å¯Œå†…å®¹å±•ç¤ºçš„åŸºç¡€ã€‚<br/><br>meterï¼šè¡¨ç¤ºç‰¹å®šèŒƒå›´å†…çš„æ•°å€¼ï¼Œå¯ç”¨äºå·¥èµ„ã€æ•°é‡ã€ç™¾åˆ†æ¯”ç­‰ã€‚<br/><br>timeï¼šè¡¨ç¤ºæ—¶é—´å€¼ã€‚<br/><br>progressï¼šç”¨æ¥è¡¨ç¤ºè¿›åº¦æ¡ï¼Œå¯é€šè¿‡å¯¹å…¶ max ã€ min ã€ step ç­‰å±æ€§è¿›è¡Œæ§åˆ¶ï¼Œå®Œæˆå¯¹è¿›åº¦çš„è¡¨ç¤ºå’Œç›‘äº‹ã€‚<br/><br>videoï¼šè§†é¢‘å…ƒç´ ï¼Œç”¨äºæ”¯æŒå’Œå®ç°è§†é¢‘æ–‡ä»¶çš„ç›´æ¥æ’­æ”¾ï¼Œæ”¯æŒç¼“å†²é¢„è½½å’Œå¤šç§è§†é¢‘åª’ä½“æ ¼å¼ã€‚<br/><br>audioï¼šéŸ³é¢‘å…ƒç´ ï¼Œç”¨äºæ”¯æŒå’Œå®ç°éŸ³é¢‘æ–‡ä»¶çš„ç›´æ¥æ’­æ”¾ï¼Œæ”¯æŒç¼“å†²é¢„è½½å’Œå¤šç§éŸ³é¢‘åª’ä½“æ ¼å¼ã€‚<br/><br>äº¤äº’æ€§å…ƒç´ ä¸»è¦ç”¨äºåŠŸèƒ½æ€§çš„å†…å®¹è¡¨è¾¾ï¼Œä¼šæœ‰ä¸€å®šçš„å†…å®¹å’Œæ•°æ®çš„å…³è”ï¼Œæ˜¯å„ç§äº‹ä»¶çš„åŸºç¡€ã€‚<br/><br>detailsï¼šç”¨æ¥è¡¨ç¤ºä¸€æ®µå…·ä½“çš„å†…å®¹ï¼Œä½†æ˜¯å†…å®¹é»˜è®¤å¯èƒ½ä¸æ˜¾ç¤ºï¼Œé€šè¿‡æŸç§æ‰‹æ®µï¼ˆå¦‚å•å‡»ï¼‰ä¸ legend äº¤äº’æ‰ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚<br/><br>datagridï¼šç”¨æ¥æ§åˆ¶å®¢æˆ·ç«¯æ•°æ®ä¸æ˜¾ç¤ºï¼Œå¯ä»¥ç”±åŠ¨æ€è„šæœ¬åŠæ—¶æ›´æ–°ã€‚<br/><br>menuï¼šä¸»è¦ç”¨äºäº¤äº’èœå•ï¼ˆæ›¾è¢«åºŸå¼ƒåˆè¢«é‡æ–°å¯ç”¨çš„å…ƒç´ ï¼‰ã€‚<br/><br>commandï¼šç”¨æ¥å¤„ç†å‘½ä»¤æŒ‰é’®ã€‚<br/><br><br/><br>2.CSS3çš„æ–°ç‰¹æ€§ï¼›<br/><br>CSS3å®ç°åœ†è§’ï¼ˆborder-radiusï¼‰ï¼Œé˜´å½±ï¼ˆbox-shadowï¼‰<br/><br>å¯¹æ–‡å­—åŠ ç‰¹æ•ˆï¼ˆtext-shadowã€ï¼‰ï¼Œçº¿æ€§æ¸å˜ï¼ˆgradientï¼‰ï¼Œæ—‹è½¬ï¼ˆtransformï¼‰<br/><br>transform:rotate(9deg) scale(0.85,0.90) translate(0px,-30px) skew(-9deg,0deg);// æ—‹è½¬,ç¼©æ”¾,å®šä½,å€¾æ–œç­‰ç­‰å˜æ¢<br/><br>å¢åŠ äº†æ›´å¤šçš„CSSé€‰æ‹©å™¨  å¤šèƒŒæ™¯ rgba<br/><br>åœ¨CSS3ä¸­å”¯ä¸€å¼•å…¥çš„ä¼ªå…ƒç´ æ˜¯ ::selection.<br/><br>åª’ä½“æŸ¥è¯¢ï¼Œå¤šæ å¸ƒå±€ï¼Œå¼¹æ€§ç›’å­<br/><br>border-image<br/><br>css3åŠ¨ç”»<br/></p><p>3.canvasç»˜å›¾ï¼š<br/><br>Canvasæ˜¯HTML5æ–°å¢çš„ç»„ä»¶ï¼Œå®ƒå°±åƒä¸€å—å¹•å¸ƒï¼Œå¯ä»¥ç”¨JavaScriptåœ¨ä¸Šé¢ç»˜åˆ¶å„ç§å›¾è¡¨ã€åŠ¨ç”»ç­‰ã€‚<br/><br>æ²¡æœ‰Canvasçš„å¹´ä»£ï¼Œç»˜å›¾åªèƒ½å€ŸåŠ©Flashæ’ä»¶å®ç°ï¼Œé¡µé¢ä¸å¾—ä¸ç”¨JavaScriptå’ŒFlashè¿›è¡Œäº¤äº’ã€‚æœ‰äº†Canvasï¼Œæˆ‘ä»¬å°±å†ä¹Ÿä¸éœ€è¦Flashäº†ï¼Œç›´æ¥ä½¿ç”¨JavaScriptå®Œæˆç»˜åˆ¶ã€‚<br/></p><p>4.JavaScriptçš„æ–°å¢APIï¼š<br/><br>requestAnimationFrame,ç›¸æ¯”äºsetInterval,æ€§èƒ½æ›´é«˜çš„åŠ¨ç”»å®ç°æ–¹æ³•ã€‚<br/><br>Page Visibility api,é¡µé¢æ˜¯å¦è¢«éšè—ï¼Œæœ€å°åŒ–çš„apiæ¥å£ã€‚<br/><br>Geolocation Api,åœ°ç†ä½ç½®ã€‚<br/><br>File Api:æ–‡ä»¶æ“ä½œã€‚<br/><br>web Worker:åå°è¿è¡Œjsä»£ç ï¼Œä¸ä¼šå½±å“é¡µé¢æ˜¾ç¤ºã€‚<br/><br><br/></p><p>5.ç§»åŠ¨ç«¯ï¼š<br/><br>å€ŸåŠ©äºå“åº”å¼å¼€å‘ï¼Œå’Œæ›´å¼ºå¤§çš„jså¼•æ“ï¼Œä»¥åŠæ–°çš„csså®ç°ï¼Œè¯­ä¹‰åŒ–ï¼Œç°åœ¨ç½‘é¡µåœ¨ç§»åŠ¨ç«¯ä¹Ÿå¯ä»¥è¡¨ç°çš„æ›´å¥½äº†ã€‚<br/></p><h2 id="åè®°"><a class="header-anchor" href="#åè®°">Â¶</a>åè®°</h2><p>å¥½ä¹…æ²¡å†™åšå®¢äº†ï¼Œä¸œæ‹¼è¥¿å‡‘åˆæ”’äº†ä¸€ç¯‡ã€‚ã€‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»€ä¹ˆæ˜¯äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶å§”æ‰˜</title>
      <link href="/posts/ae7587e9/"/>
      <url>/posts/ae7587e9/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è‡ªä»æœ‰äº†javaScriptè¿™ä¸ªæµè§ˆå™¨ç«¯çš„è„šæœ¬è¯­è¨€ï¼Œç”¨æˆ·ä»¬ç»ˆäºå¯ä»¥å‘Šåˆ«å•è°ƒçš„å±•ç¤ºç½‘é¡µäº†ï¼ŒjavaScriptç»™ç½‘é¡µå¸¦æ¥äº†æ–°çš„ç”Ÿå‘½åŠ›ï¼Œç½‘é¡µå‰ç«¯ä»æ­¤å˜å¾—æœ‰è¶£èµ·æ¥ï¼Œæœ€ä¸»è¦çš„ï¼Œç½‘é¡µä¸Šçš„å…ƒç´ æœ‰äº†äº‹ä»¶è¿™ä¸ªå…ƒç´ ï¼Œä½†æ˜¯å…³äºäº‹ä»¶ï¼Œå°±ä¸å¾—ä¸æäº‹ä»¶å†’æ³¡å’Œäº‹ä»¶å§”æ‰˜è¿™ä¸¤ä¸ªå…³é”®çš„çŸ¥è¯†ç‚¹ã€‚</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯äº‹ä»¶ï¼Ÿ"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯äº‹ä»¶ï¼Ÿ">Â¶</a>ä»€ä¹ˆæ˜¯äº‹ä»¶ï¼Ÿ</h2><p>JavaScriptä¸htmlä¹‹é—´çš„äº¤äº’å…¨éƒ¨éƒ½æ˜¯ç”±äº‹ä»¶å®ç°çš„ã€‚äº‹ä»¶å°±æ˜¯ä½ æ“ä½œé¼ æ ‡æˆ–è€…é”®ç›˜ï¼Œå¯¹ç½‘é¡µè¿›è¡Œäº¤äº’ï¼Œæ¯”å¦‚ä½ ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œå°±è§¦å‘äº†ä¸€ä¸ª<code>onClick</code>äº‹ä»¶ï¼Œä½ æ”¹å˜inputèŠ‚ç‚¹å†…çš„<code>value</code>,å°±å‡ºå‘äº†<code>onChange</code>äº‹ä»¶ã€‚</p><h2 id="äº‹ä»¶æµå’Œäº‹ä»¶å†’æ³¡"><a class="header-anchor" href="#äº‹ä»¶æµå’Œäº‹ä»¶å†’æ³¡">Â¶</a>äº‹ä»¶æµå’Œäº‹ä»¶å†’æ³¡</h2><p>ä½ å¯ä»¥æŠŠç½‘é¡µæƒ³è±¡æˆå‡ ä¸ªåŒå¿ƒåœ†ï¼Œå½“ä½ ç‚¹å‡»æœ€ä¸­å¿ƒçš„åœ†çš„æ—¶å€™ï¼Œä¹Ÿç›¸å½“ä¸ç‚¹å‡»å¤–å±‚çš„å‡ ä¸ªåœ†äº†ï¼Œæ‰€ä»¥è¯´ï¼Œå½“ä½ ç‚¹å‡»é¡µé¢ä¸Šçš„ä¸€ä¸ªæŒ‰é’®ï¼Œå°±ç›¸å½“äºç‚¹å‡»äº†æ•´å¼ é¡µé¢ï¼Œä¼šè§¦å‘è¿™ä¸ªæŒ‰é’®çš„æ‰€æœ‰çˆ¶èŠ‚ç‚¹çš„clickäº‹ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯äº‹ä»¶æµã€‚ä½†æ˜¯å½“æ—¶ieå’Œå…¶ä»–çš„æµè§ˆå™¨ååè¦ä¸ä¸€æ ·ï¼Œieæ”¯æŒçš„æ˜¯å†’æ³¡æµï¼Œè€Œç½‘æ™¯æå‡ºçš„æ˜¯æ•è·æµï¼Œåæ¥ï¼Œåœ¨w3cç»„ç»‡çš„ç»Ÿä¸€ä¸‹ï¼Œjsæ”¯æŒå†’æ³¡æµå’Œæ•è·æµï¼Œä½†æ˜¯å‘¢ï¼ŒæŸäº›ä½ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼ˆie6,ie7,ie8ï¼‰å´åªæ”¯æŒå†’æ³¡æµã€‚ç›´æ¥ç”¨onClickå°±æ˜¯åœ¨å†’æ³¡é˜¶æ®µæ·»åŠ äº‹ä»¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div in=&quot;outer&quot;&gt;</span><br><span class="line">    &lt;div id=&quot;inner&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>å¯¹äºäº‹ä»¶æ•è·æ¥è¯´ï¼Œæ˜¯ä»å¤–åˆ°å†…çš„ï¼Œç‚¹å‡»#innerçš„divï¼Œä¼šä»windowå¼€å§‹æ•è·ï¼Œç„¶åæ˜¯document,html,â€¦,ä¸€ç›´åˆ°#outerï¼Œå†åˆ°#innerã€‚<br>å¯¹äºäº‹ä»¶å†’æ³¡æ¥è¯´ï¼Œæ˜¯ä»å†…åˆ°å¤–çš„ï¼Œç‚¹å‡»#innerçš„divï¼Œä¼šä»#innerå¼€å§‹ï¼Œåˆ°#outerï¼Œâ€¦ï¼Œæœ€åæ˜¯windowã€‚</p><p>domäº‹ä»¶æµåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µ<br>1.äº‹ä»¶æ•è·ã€‚<br>2.å¤„äºç›®æ ‡é˜¶æ®µã€‚<br>3.äº‹ä»¶å†’æ³¡ã€‚</p><p>å¯ä»¥åˆ†åˆ«ç»™domå…ƒç´ æ·»åŠ äº‹ä»¶æµäº‹ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">document.addEventListener(&#x27;click&#x27;,function()&#123;</span><br><span class="line">            console.log(&#x27;documentå¤„äºäº‹ä»¶æ•è·é˜¶æ®µ&#x27;);</span><br><span class="line">        &#125;, true);// trueæ˜¯æ•è·é˜¶æ®µï¼Œfalseæ˜¯å†’æ³¡é˜¶æ®µã€‚</span><br><span class="line">```   </span><br><span class="line"></span><br><span class="line">é—®é¢˜æ¥äº†ï¼Œå¦‚æœä¸æƒ³äº‹ä»¶å†’æ³¡æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬ç‚¹å‡»å­èŠ‚ç‚¹ï¼Œä¸æƒ³è§¦å‘çˆ¶èŠ‚ç‚¹çš„äº‹ä»¶ã€‚å¯ä»¥è¿™æ ·åšï¼š</span><br></pre></td></tr></table></figure><p>stopPropagation() æ–¹æ³•<br>ç»ˆæ­¢äº‹ä»¶åœ¨ä¼ æ’­è¿‡ç¨‹çš„æ•è·ã€ç›®æ ‡å¤„ç†æˆ–èµ·æ³¡é˜¶æ®µè¿›ä¸€æ­¥ä¼ æ’­ã€‚è°ƒç”¨è¯¥æ–¹æ³•åï¼Œè¯¥èŠ‚ç‚¹ä¸Šå¤„ç†è¯¥äº‹ä»¶çš„å¤„ç†ç¨‹åºå°†è¢«è°ƒç”¨ï¼Œäº‹ä»¶ä¸å†è¢«åˆ†æ´¾åˆ°å…¶ä»–èŠ‚ç‚¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## äº‹ä»¶å§”æ‰˜  </span><br><span class="line">å…ˆè¯´ä¸‹eventå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šä½œä¸ºäº‹ä»¶çš„é»˜è®¤å‚æ•°ã€‚</span><br><span class="line">apiï¼š</span><br></pre></td></tr></table></figure><p>bubblesè¿”å›å¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºäº‹ä»¶æ˜¯å¦æ˜¯èµ·æ³¡äº‹ä»¶ç±»å‹ã€‚<br>cancelableè¿”å›å¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºäº‹ä»¶æ˜¯å¦å¯æ‹¥å¯å–æ¶ˆçš„é»˜è®¤åŠ¨ä½œã€‚<br>currentTargetè¿”å›å…¶äº‹ä»¶ç›‘å¬å™¨è§¦å‘è¯¥äº‹ä»¶çš„å…ƒç´ ã€‚<br>eventPhaseè¿”å›äº‹ä»¶ä¼ æ’­çš„å½“å‰é˜¶æ®µã€‚<br>targetè¿”å›è§¦å‘æ­¤äº‹ä»¶çš„å…ƒç´ ï¼ˆäº‹ä»¶çš„ç›®æ ‡èŠ‚ç‚¹ï¼‰ã€‚<br>timeStampè¿”å›äº‹ä»¶ç”Ÿæˆçš„æ—¥æœŸå’Œæ—¶é—´ã€‚<br>typeè¿”å›å½“å‰ Event å¯¹è±¡è¡¨ç¤ºçš„äº‹ä»¶çš„åç§°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ä¸ºå•¥è¦è¿›è¡Œäº‹ä»¶å§”æ‰˜ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“domæ“ä½œæ˜¯å¾ˆèŠ±è´¹æ—¶é—´çš„ã€‚ä¸domèŠ‚ç‚¹äº¤äº’ï¼Œè®¿é—®domèŠ‚ç‚¹ï¼Œéå¸¸å½±å“æ€§èƒ½ã€‚æ¯”å¦‚è¦ç»™`ul`ä¸‹çš„`li`éƒ½æ·»åŠ ä¸Šclickäº‹ä»¶ï¼Œæœ€ç®€å•çš„æ–¹æ³•ï¼Œå†™ä¸ªforå¾ªç¯ï¼ŒæŒ¨ä¸ªclickå°±è¡Œäº†ï¼Œä½†æ˜¯è¿™æ ·è¦å¤šæ¬¡æ“çºµdomèŠ‚ç‚¹ã€‚åˆ©ç”¨äº‹ä»¶å§”æ‰˜çš„æ–¹å¼ï¼ŒæŠŠ`click`äº‹ä»¶ç»‘å®šåˆ°`ul`ä¸Šï¼Œå› ä¸ºäº‹ä»¶å†’æ³¡çš„å­˜åœ¨ï¼Œä¼šè§¦å‘`ul`çš„`click`äº‹ä»¶ï¼Œè€Œä¸”å°±ä¸€æ¬¡domæ“ä½œï¼Œé‚£æ€ä¹ˆåˆ¤æ–­ç‚¹å‡»çš„æ˜¯å“ªä¸€ä¸ªliå‘¢ï¼Ÿè¿™æ—¶å€™ä¸Šé¢çš„eventå¯¹è±¡å°±èµ·ä½œç”¨äº†ï¼Œeventå¯¹è±¡æä¾›äº†ä¸€ä¸ªå±æ€§å«targetï¼Œå¯ä»¥è¿”å›äº‹ä»¶çš„ç›®æ ‡èŠ‚ç‚¹ï¼Œæˆ‘ä»¬æˆä¸ºäº‹ä»¶æºï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œtargetå°±å¯ä»¥è¡¨ç¤ºä¸ºå½“å‰çš„äº‹ä»¶æ“ä½œçš„domï¼Œä½†æ˜¯ä¸æ˜¯çœŸæ­£æ“ä½œdomï¼Œå½“ç„¶ï¼Œè¿™ä¸ªæ˜¯æœ‰å…¼å®¹æ€§çš„ï¼Œæ ‡å‡†æµè§ˆå™¨ç”¨ev.targetï¼ŒIEæµè§ˆå™¨ç”¨event.srcElementã€‚   </span><br><span class="line">è¿™æ—¶å€™æˆ‘ä»¬å°±æ‹¿åˆ°äº†å…·ä½“ç‚¹å‡»çš„domèŠ‚ç‚¹ï¼Œç„¶åç”¨nodeNameè·å–èŠ‚ç‚¹åï¼Œåœ¨å‡½æ•°å†…éƒ¨åˆ¤æ–­ä¸‹ï¼Œå°±å®ç°æŠŠdomæ“ä½œæ”¾åœ¨jsä»£ç å†…éƒ¨æ¥å®ç°äº†ã€‚   </span><br><span class="line">è€Œä¸”è¿™æ ·åšè¿˜æœ‰ä¸€ç‚¹å¥½å¤„å°±æ˜¯ï¼Œæ–°æ·»åŠ çš„`li`æ ‡ç­¾ä¸ä¼šç‚¹å‡»æ— æ•ˆï¼Œå¦‚æœç›´æ¥æŠŠäº‹ä»¶ç»‘å®šåœ¨`li`ä¸Šï¼Œæ¯æ·»åŠ `li`éƒ½è¦é‡æ–°ç»‘å®šäº‹ä»¶ã€‚   </span><br><span class="line"></span><br></pre></td></tr></table></figure><ul id="ul"><li></li></ul><p>window.onload = function(){<br>ã€€ã€€var oUl = document.getElementById(â€œulâ€);<br>ã€€ã€€oUl.onclick = function(ev){<br>ã€€ã€€ã€€ã€€var ev = ev || window.event;<br>ã€€ã€€ã€€ã€€var target = ev.target || ev.srcElement;<br>ã€€ã€€ã€€ã€€if(target.nodeName.toLowerCase() == â€˜liâ€™){<br>ã€€ ã€€ã€€ã€€ã€€ã€€ã€€alert(123);<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€  alert(target.innerHTML);<br>ã€€ã€€ã€€ã€€}<br>ã€€ã€€}<br>}</p><pre><code></code></pre>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reactç»„ä»¶ç¼–å†™éæœ€ä½³å®è·µ</title>
      <link href="/posts/3705f364/"/>
      <url>/posts/3705f364/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¦‚æœé—®æˆ‘2018å¹´æœ€æƒ³æŒæ¡çš„ä¸œè¥¿æ˜¯ä»€ä¹ˆï¼Œç¬¬ä¸€ä¸ªæ˜¯webglï¼Œç¬¬äºŒä¸ªå°±æ˜¯react.jså…¨å®¶æ¡¶äº†ã€‚ä¹‹å‰ä¹Ÿå†™äº†ä¸€äº›demoï¼Œä¹Ÿä¸ç»æ„é—´æ€»ç»“äº†ä¸€äº›ä¸œè¥¿ï¼Œå¯èƒ½ä¸æ˜¯æœ€å¥½çš„å†™æ³•ï¼Œåœ¨è¿™é‡Œåšä¸€äº›è®°å½•ã€‚</p></blockquote><h2 id="è¯­æ³•ç¯‡"><a class="header-anchor" href="#è¯­æ³•ç¯‡">Â¶</a>è¯­æ³•ç¯‡</h2><p>1 çµæ´»ä½¿ç”¨ç®­å¤´å‡½æ•°<br>åœ¨ç»™ç»„ä»¶ç»‘å®šç±»ä¼¼<code>onClick</code>äº‹ä»¶çš„æ—¶å€™,ç»„ä»¶å†…å®šä¹‰çš„å‡½æ•°é‡Œé¢çš„thisåœ¨æ‰§è¡Œçš„æ—¶å€™ä¼šå˜æˆå…¨å±€ï¼Œä½†æ˜¯es6é»˜è®¤ä¸¥æ ¼æ¨¡å¼ä¸å…è®¸å…¨å±€ï¼Œå› æ­¤ä¸€èˆ¬ä¼šç”¨<code>bind</code>å‡½æ•°ç»‘å®šthisï¼Œå½“ç„¶ï¼Œç”¨ç®­å¤´å‡½æ•°æ›´ç®€å•ï¼Œå› ä¸ºç®­å¤´å‡½æ•°ä¼šç»§æ‰¿ä¸Šä¸‹æ–‡çš„thisã€‚</p><p>2 å¤šç”¨ä¸‰ç›®è¡¨è¾¾å¼å’Œé€»è¾‘ç¬¦å·<br>å› ä¸ºjsxè¯­æ³•ä¸æ”¯æŒå†™ifè¯­å¥,ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨ä¸‰ç›®è¡¨è¾¾å¼æ¥ä»£æ›¿<br><code>&#123;a?&lt;A/&gt;:&lt;B/&gt;&#125;</code><br>ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬åªç”¨åˆ¤æ–­ä¸€æ¬¡,ä¸éœ€è¦falseæƒ…å†µä¸‹åšå¤„ç†ï¼Œå¯ä»¥ç”¨é€»è¾‘ä¸<br><code>!!a&amp;&amp;&lt;A/&gt; </code></p><p>3 åˆ©ç”¨è§£æ„èµ‹å€¼è§£å†³propsè¿‡é•¿å¯¼è‡´çš„ä»£ç é‡è¿‡å¤§<br>es6 é‡Œé¢åœ¨èµ‹å€¼æ–°å¢åŠ äº†è§£æ„èµ‹å€¼çš„è¯­æ³•ï¼Œç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä¾‹å¦‚ï¼š<br><code>let [a, b, c] = [1, 2, 3];</code><br><code>let &#123;a,b,c&#125; = &#123;4,5&#125;;\\ cçš„å€¼æ˜¯undefined</code><br>åœ¨ç»„ä»¶é‡Œé¢å¯ä»¥<br><code>const &#123;id,name,title,time&#125; = this.props</code><br>è¿™æ ·å¯ä»¥èŠ‚çº¦å¾ˆå¤šä»£ç ã€‚</p><p>4 ç”¨SFCï¼ˆStateless Functional Componentï¼‰ä»£æ›¿ä¸€èˆ¬çš„çº¯ç»„ä»¶çš„classå†™æ³•</p><p>sfcå°±æ˜¯è¿™æ ·çš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">_handleClick</span>(suggestedUrl, onClick, event) =&gt; &#123;</span><br><span class="line">  event.<span class="title function_">preventDefault</span>();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">RelatedSearch</span> = (<span class="params">&#123; relatedQueries, onClick &#125;</span>) =&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">section</span> <span class="attr">className</span>=<span class="string">&quot;related-search-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">&quot;related-search-title&quot;</span>&gt;</span>Related Searches:<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Layout</span> <span class="attr">x-small</span>=<span class="string">&#123;2&#125;</span> <span class="attr">small</span>=<span class="string">&#123;3&#125;</span> <span class="attr">medium</span>=<span class="string">&#123;4&#125;</span> <span class="attr">padded</span>=<span class="string">&#123;true&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;relatedQueries.map((query, index) =&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Link</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">className</span>=<span class="string">&quot;related-search-link&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onClick</span>=<span class="string">&#123;(event)</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">            _handleClick(query.searchQuery, onClick, event)&#125;</span></span><br><span class="line"><span class="language-xml">          key=&#123;index&#125;&gt;</span></span><br><span class="line"><span class="language-xml">          &#123;query.searchText&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">RelatedSearch</span>;</span><br></pre></td></tr></table></figure><p>å‚æ•°å°±æ˜¯propsï¼Œè¿™ç§å†™æ³•æ¯”ç”¨classå†™æ³•çœç•¥å¾ˆå¤šä¸œè¥¿ï¼Œæ²¡æœ‰æ„é€ å‡½æ•°ï¼Œç”¨ç®­å¤´å‡½æ•°ä»£æ›¿render(),å› ä¸ºç°åœ¨éƒ½ç”¨reduxç®¡ç†çŠ¶æ€ï¼Œæ‰€ä»¥æœ‰å¾ˆå¤šçº¯ç»„ä»¶ï¼Œè¿™ç§å†™æ³•å¯ä»¥å‡å°‘ä»£ç é‡ã€‚</p><h2 id="æ€è·¯ç¯‡"><a class="header-anchor" href="#æ€è·¯ç¯‡">Â¶</a>æ€è·¯ç¯‡</h2><p>1 å…³äºstateå’Œpropsçš„åŒºåˆ«<br>props ï¼šä¸€èˆ¬ç”¨äºçˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡ï¼Œåœ¨ç»„ä»¶ä¹‹é—´é€šä¿¡ä½¿ç”¨ã€‚<br>state :  ä¸€èˆ¬ç”¨äºç»„ä»¶å†…éƒ¨çš„çŠ¶æ€ç»´æŠ¤ï¼Œæ›´æ–°ç»„å»ºå†…éƒ¨çš„æ•°æ®ï¼ŒçŠ¶æ€ï¼Œæ›´æ–°å­ç»„ä»¶çš„propsç­‰ã€‚<br>æ‰€ä»¥å¦‚æœæ˜¯ç»„ä»¶æœ¬èº«çš„çŠ¶æ€,ä¸éœ€è¦ç”¨åˆ°çŠ¶æ€ç®¡ç†æ¯”å¦‚reduxï¼Œå°±ç”¨stateå°±è¡Œäº†ï¼›ä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯ç”¨propsçš„ã€‚</p><p>2 å°½é‡æ˜¯ç”¨çº¯ç»„ä»¶ï¼Œç»†åŒ–ç»„ä»¶ï¼Œæé«˜ç»„ä»¶å¤ç”¨<br>çŠ¶æ€ç”¨reduxå¤„ç†ï¼Œå› ä¸ºå½“ç»„ä»¶æ›´æ–°æ—¶ï¼Œå¦‚æœç»„ä»¶çš„ props å’Œ state éƒ½æ²¡å‘ç”Ÿæ”¹å˜ï¼Œrender æ–¹æ³•å°±ä¸ä¼šè§¦å‘ï¼Œçœå» Virtual DOM çš„ç”Ÿæˆå’Œæ¯”å¯¹è¿‡ç¨‹ï¼Œæ²¡çŠ¶æ€çš„ç»„ä»¶ä¼šæé«˜æ€§èƒ½ã€‚ç»†åŒ–ç»„ä»¶å¯ä»¥å¤šæ¬¡ä½¿ç”¨ä¸€ä¸ªç»„ä»¶ï¼Œå› ä¸ºreactå…¶å®å°±åƒå †ç§¯æœ¨ä¸€æ ·ï¼Œç»„ä»¶å°±æ˜¯æ¯ä¸€å—ç§¯æœ¨ï¼Œç§¯æœ¨è¶Šå°è¶Šçµæ´»ã€‚</p><p>3 reducerè¦çµæ´»<br>é¦–å…ˆè¯´ä¸€ç‚¹reduceræ˜¯å®ç°(state, action) -&gt; newStateçš„çº¯å‡½æ•°ï¼Œæ‰€ä»¥ä¸èƒ½æœ‰å¼‚æ­¥æ“ä½œï¼Œéœ€è¦å¼‚æ­¥çš„è¯<code>yarn add react-thunk</code>ï¼Œè¯·ï¼Œå½“ç„¶ä¹Ÿæœ‰å…¶ä»–çš„ä¸­é—´ä»¶ï¼Œreduceræ˜¯å¯ä»¥åµŒå¥—çš„ï¼Œæ¯”å¦‚æœ‰studentlistçš„reducerï¼Œå°±å¯ä»¥å†™ä¸ªstudentçš„å‡½æ•°ï¼Œå¤„ç†å•ä¸ªstudentçš„æ•°æ®ï¼Œåœ¨studentså‡½æ•°é‡Œæ¥å¤„ç†æ‰€æœ‰çš„studentçš„æ•°æ®ã€‚è¿™æ ·é¿å…å•ä¸ªreducerå¤ªé•¿ï¼Œé€»è¾‘æ··æ‚å¾ˆéš¾çœ‹çš„ã€‚reducerçš„ç¼–å†™æ¯”èµ·ç»„ä»¶æ¥è¯´è¦å¤æ‚ä¸€ç‚¹æˆ‘è§‰å¾—ï¼Œå†™æ³•ä¸Šä¹Ÿå¾ˆè€ƒéªŒjsæ°´å¹³ã€‚å…³äºreduceræœ‰æ–‡ç« å¯ä»¥å‚è€ƒ<a href="https://www.jianshu.com/p/938f8121ba0f">Reducer æœ€ä½³å®è·µï¼ŒRedux å¼€å‘æœ€é‡è¦çš„éƒ¨åˆ†</a>ã€‚</p><p>æœªå®Œå¾…ç»­â€“è¿˜è¦è®²çš„æœ‰é«˜é˜¶ç»„ä»¶ï¼Œä¸­é—´ä»¶ï¼Œå¼‚æ­¥æ“ä½œç­‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> javaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ çœŸçš„ä¼šç”¨æœç´¢å¼•æ“å—ï¼Ÿ</title>
      <link href="/posts/c475ea5/"/>
      <url>/posts/c475ea5/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ¯å¤©,åœ°çƒä¸Šä¸åŒå›½å®¶çš„äººä»¬éƒ½ä¼šä½¿ç”¨åˆ°æœç´¢å¼•æ“,æˆ–è®¸ç”¨æ¥äº†è§£æ–°äº‹ç‰©,æˆ–è®¸ç”¨æ¥æŸ¥æ‰¾èµ„æ–™æ–‡ä»¶,å½“ç„¶ä¹Ÿæœ‰ç”¨æ¥ä¸‹è½½ç›—ç‰ˆç”µå½±æˆ–è€…æ¸¸æˆçš„ã€‚ç›¸ä¿¡è¯»è€…å¯èƒ½ä¼šå¯¹æœ¬ç¯‡æ ‡é¢˜ä¸å±‘ä¸€é¡¾,ç™¾åº¦ä¸€ä¸‹å˜›,è°ä¸ä¼šå•Šï¼Ÿä½†æ˜¯,é‚£äº›é«˜çº§çš„æœç´¢æŠ€å·§ä½ å´ä¸ä¸€å®šçŸ¥é“ã€‚</p></blockquote><h2 id="é€‰æ‹©åˆé€‚çš„æœç´¢å¼•æ“"><a class="header-anchor" href="#é€‰æ‹©åˆé€‚çš„æœç´¢å¼•æ“">Â¶</a>é€‰æ‹©åˆé€‚çš„æœç´¢å¼•æ“</h2><p>å…ˆè¯´ä¸€ä¸‹ä¸ºå•¥æˆ‘ä¸ç”¨ç™¾åº¦,ä¸å•å•æ˜¯å› ä¸ºâ€œé­æ³½è¥¿äº‹ä»¶â€,ä¸€å¼€å§‹æˆ‘ä¹Ÿä¼šä¾èµ–ç™¾åº¦çš„,è‡ªä»æˆ‘æ¥è§¦åˆ°googleå,æ…¢æ…¢çš„å°±ä¹ æƒ¯ç”¨googleäº†,ä¸ºä»€ä¹ˆä¸ç”¨ç™¾åº¦äº†å‘¢ï¼ŸåŸå› æœ‰ä¸€ä¸‹å‡ ç‚¹ï¼š<br>1.æœç´¢ç»“æœé˜‰å‰²ä¸¥é‡ï¼ˆæ„å»ºå’Œè°ç¤¾ä¼šå¿…è¦æ¡ä»¶,ä½ æ‡‚å¾—ï¼‰<br>2.å› ä¸ºâ€œgfwâ€çš„å­˜åœ¨,è¢«å¢™çš„ç½‘ç«™æœä¸å‡ºæ¥,å…¶ä¸­å¯èƒ½åŒ…æ‹¬ä¸€äº›æŠ€æœ¯ç«™ç‚¹<br>3.å¯¹æ´‹æ–‡çš„æ”¶å½•å¤ªå°‘äº†,ä¸å¾—ä¸æ‰¿è®¤,åœ¨æŠ€æœ¯ä¸Š,æ´‹æ–‡ç«™ç‚¹å¾€å¾€æ›´æ–°æ›´å…¨<br>4.ç™¾åº¦æœ¬èº«çš„å¼Šç«¯,çƒ‚çš„ä¸è¡Œçš„ç™¾åº¦çŸ¥é“,å‘äººçš„ç«ä»·æ’å</p><p>æ‰€ä»¥,æˆ‘å°±æŠ›å¼ƒç™¾åº¦,æ”¹ç”¨googleäº†,ä½†æ˜¯ä½ çŸ¥é“çš„,googleç°åœ¨åœ¨å¢™å†…æ— æ³•è®¿é—®,ä½†ä¹Ÿä¸æ˜¯æ¯«æ— åŠæ³•,åªè¦ä½ èŠ±è´¹ä¸€ç‚¹æ—¶é—´,å°±å¯ä»¥çªç ´&quot;gwf&quot;,æ‹¥æŠ±freedomäº†,å…·ä½“æ–¹æ³•ä¸åœ¨æœ¬æ–‡è®¨è®ºå†…å®¹é‡Œ,ä½†æ˜¯æˆ‘å¯ä»¥æè¿‡ä¸€äº›å…³é”®è¯----â€œèµ›é£â€,â€œtorâ€,â€œlanternâ€,â€œè‡ªç”±é—¨â€,â€œvpnâ€,å¤§éƒ¨åˆ†æˆ‘éƒ½ç”¨è¿‡,ç°åœ¨æ­£åœ¨ç”¨&quot;lantern&quot;,å¦‚æœä½ æœ‰éœ€æ±‚,å¯ä»¥ç”¨è¿™ä¸ªè½¯ä»¶,å…·ä½“å†…å®¹åœ¨å¦å¤–ä¸€ç¯‡åšæ–‡é‡Œæœ‰ã€‚</p><h2 id="æœç´¢æŠ€å·§"><a class="header-anchor" href="#æœç´¢æŠ€å·§">Â¶</a>æœç´¢æŠ€å·§</h2><p>æ—¢ç„¶è¯´åˆ°äº†google,å°±ä»‹ç»ä¸€ä¸‹å‡ ä¸ªå¸¸ç”¨çš„æœç´¢æŠ€å·§å§ï¼</p><p>1.å·§ç”¨â€œä¸â€å’Œâ€œæˆ–â€<br>â€œä¸â€å¾ˆç®€å•ï¼Œä½ è¾“å…¥å¤šä¸ªå…³é”®è¯,é»˜è®¤æƒ…å†µä¸‹,å°±æ˜¯ä¸çš„å…³ç³»ã€‚åªæœ‰ç½‘é¡µåŒæ—¶åŒ…å«è¿™äº›å…³é”®è¯,æ‰ä¼šè¢«æŠ“å–åˆ°ã€‚<br>â€œæˆ–â€ å°±æ˜¯åœ¨å…³é”®è¯ä¹‹é—´åŠ ä¸Šå¤§å†™çš„ORï¼Œæ¯”å¦‚ <code> å…³é”®è¯1 OR å…³é”®è¯2</code>è¿™æ ·åªè¦åŒ…å«ä»»ä¸€å…³é”®è¯,éƒ½å¯ä»¥è¢«æœç´¢åˆ°ã€‚</p><p>2.å…³é”®è¯æ’åˆ—<br>æ¯”å¦‚ä½ æƒ³æœç´¢ç¾å›½è‹¹æœ,ä½†æ˜¯å¯èƒ½ä¼šæœç´¢åˆ°ç½‘é¡µçš„å¼€å¤´æ˜¯ç¾å›½,ç»“å°¾æ˜¯è‹¹æœçš„é¡µé¢,å¾ˆæ˜æ˜¾,è¿™ä¸ªä¸æ˜¯ä½ çœŸæ­£è¦æŸ¥çš„ä¸œè¥¿ã€‚è¿™æ—¶å€™,ä½ ç”¨<code>&quot;ç¾å›½è‹¹æœ&quot;</code>,å°±èƒ½æœåˆ°çœŸæ­£çš„ç¾å›½è‹¹æœäº†ã€‚</p><p>3.google hacking<br>è¿™ä¸€éƒ¨åˆ†æ¯”è¾ƒå¤š,ä½†æ˜¯åŠŸèƒ½éå¸¸å¼ºå¤§ã€‚</p><ul><li>åªæœç´¢æŸä¸ªç½‘ç«™çš„å†…å®¹  <code>site:example.com</code> ï¼Œä¹Ÿå¯ä»¥site:.comï¼Œè¿™æ ·,å°±åªä¼šæœåˆ°.comåŸŸåçš„ç½‘ç«™äº†ã€‚</li><li>é™å®šæ–‡ä»¶æ ¼å¼  <code>å…³é”®è¯ filetype:[filetype]</code>,filetypeå¯ä»¥æ˜¯pdf,xlsx,docç­‰æ–‡ä»¶æ ¼å¼ã€‚</li><li>é™å®šæ ‡é¢˜å†…å®¹ <code>intitle:å…³é”®è¯</code>,è¿™æ ·,åªæœ‰æ ‡é¢˜é‡Œé¢å«å…³é”®è¯çš„æ‰ä¼šè¢«æœç´¢å‡ºæ¥ã€‚</li><li>é™å®šç½‘é¡µæ­£æ–‡ <code>intext:å…³é”®è¯</code>æˆ–è€…<code>allintext:å…³é”®è¯</code>,å…³é”®è¯åªæœ‰åœ¨ç½‘é¡µæ­£æ–‡ä¸­ã€‚</li><li>é™å®šç½‘é¡µurl <code>inurl:å…³é”®è¯</code>ï¼Œä¸¾ä¸ªæ —å­,<code>inurl:id=1</code>,å¾ˆå¤šphpç«™ç‚¹åœ¨è¿™é‡Œå¯ä»¥å°è¯•sqlæ³¨å…¥è„±åº“ã€‚<code>inurl:login</code>å¯ä»¥æ‰¾åˆ°ä¸€äº›åå°ç®¡ç†çš„ç™»å½•é¡µé¢ã€‚</li><li>æ¨¡ç³Šæœç´¢åŒä¹‰è¯ <code>~å…³é”®è¯</code>,googleå¯ä»¥æœåˆ°å…³é”®è¯çš„åŒä¹‰è¯çš„é¡µé¢ã€‚</li><li>é€šé…ç¬¦ <code>*</code> ä½ å¯ä»¥ç”¨æ˜Ÿå· * æŒ‡ä»£ä»»ä½•ä¸€ä¸ªè¯æ±‡ã€‚ä¹Ÿå¯ä»¥é…åˆä¸Šé¢çš„ç¬¬äºŒç‚¹<code>&quot;*å·å¸‚&quot;</code>,çŒœçŒœå¯ä»¥æœåˆ°å•¥ï¼Ÿ</li><li>æ’é™¤ <code>-</code>  ç´§æŒ¨ç€å…³é”®è¯ä¹‹å‰æ”¾å‡å·ï¼Œè¡¨ç¤ºæ’é™¤è¯¥å…³é”®è¯,æ¯”å¦‚ä½ æƒ³æœç´¢è‹¹æœ,ä½†ä¸æ˜¯è‹¹æœæ‰‹æœºå°±è¿™æ · <code>è‹¹æœ -æ‰‹æœº</code></li></ul><p>æ³¨æ„ï¼šä¸Šé¢è¿™äº›æŠ€å·§å¯ä»¥ç»„åˆä½¿ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> google </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•™ç»ƒ,æˆ‘æƒ³å­¦webSocket</title>
      <link href="/posts/9ceb5dee/"/>
      <url>/posts/9ceb5dee/</url>
      
        <content type="html"><![CDATA[<blockquote><p>html5é‡Œ,æˆ‘æœ€æ„Ÿå…´è¶£çš„ä¸¤ä¸ªéƒ¨åˆ†ä¸€ä¸ªæ˜¯canvas,å› ä¸ºå¯ä»¥å®ç°åœ¨é¡µé¢ä¸Šç”»ç”»,åŸºäºwebglçš„æŠ€æœ¯åœ¨æœªæ¥ç½‘é¡µæ¸¸æˆä¸Šä¸€å®šä¼šå¤§æ”¾å¼‚å½©,è€Œå¦å¤–ä¸€éƒ¨åˆ†,å°±æ˜¯webSocketäº†ã€‚<strong>ä½†æ˜¯å®é™…ä¸Šwebsocketä¸æ˜¯HTML5 çš„ä¸œè¥¿</strong>ã€‚å®ƒæ˜¯ä¸€ä¸ªåè®®,å½’å±äºIETFã€‚HTML5åªæ˜¯æä¾›äº†WebSocket API ï¼Œä¸¤ä¸ªè§„èŒƒæ˜¯ç‹¬ç«‹å‘å¸ƒçš„ã€‚</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯webSocket-ï¼Ÿ"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯webSocket-ï¼Ÿ">Â¶</a>ä»€ä¹ˆæ˜¯webSocket ï¼Ÿ</h2><p>WebSocketæ˜¯ä¸€ç§ç½‘ç»œé€šè®¯åè®®,ç›®å‰å¸‚é¢ä¸Šå¾ˆå¤šç½‘ç«™éƒ½ç”¨åˆ°äº†è¿™é¡¹æŠ€æœ¯,æ¯”å¦‚åœ¨çº¿èŠå¤©å®¤,åœ¨çº¿å®¢æœç³»ç»Ÿ,è¿˜æœ‰ä¸€äº›è¯„è®ºç³»ç»Ÿ,WebIMç­‰ã€‚å®ƒçš„ç‰¹ç‚¹å°±æ˜¯ï¼šæŒä¹…åŒ–,å®æ—¶æ€§,å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åŒå‘é€šè®¯ã€‚<br>ä¸ºä»€ä¹ˆéœ€è¦webSocketå‘¢ï¼Ÿç›¸ä¿¡å¾ˆå¤šç¨‹åºå‘˜éƒ½é‡åˆ°è¿‡è¿™æ ·ç±»ä¼¼çš„éœ€æ±‚----å®æ—¶çš„æ˜¾ç¤ºç‰©å“çš„ä»·æ ¼ã€è‚¡ç¥¨èµ°åŠ¿çš„å›¾æ ‡ã€ç½‘é¡µä¸Šå®ç°èŠå¤©ç­‰äº¤äº’åŠŸèƒ½ã€‚è¿™äº›éœ€æ±‚å¦‚æœç”¨httpåè®®,åªèƒ½å®¢æˆ·ç«¯å‘è¯·æ±‚,æœåŠ¡ç«¯è¿”å›ç»“æœ,å°±éœ€è¦ä¸åœçš„&quot;è½®è¯¢&quot;ï¼šæ¯éš”ä¸€æ®µæ—¶å€™ï¼Œå°±å‘å‡ºä¸€ä¸ªè¯¢é—®ï¼Œäº†è§£æœåŠ¡å™¨æœ‰æ²¡æœ‰æ–°çš„ä¿¡æ¯ã€‚è½®è¯¢çš„æ•ˆç‡å¾ˆä½,å¹¶ä¸”æµªè´¹èµ„æº,éœ€è¦æœåŠ¡å™¨æœ‰å¾ˆå¿«çš„å¤„ç†é€Ÿåº¦å’Œèµ„æºã€‚å¦å¤–è¿˜æœ‰ä¸€ç§é•¿è¿æ¥çš„æ–¹å¼ï¼ˆlong pollï¼‰,æ˜¯é˜»å¡å¼çš„ajax,ä¸€æ¬¡è¯·æ±‚ç›´åˆ°æœ‰ç»“æœè¿”å›æ‰ä¼šè¿›è¡Œä¸‹ä¸€æ¬¡è¯·æ±‚,è¿™ç§æ–¹å¼éœ€è¦æœåŠ¡å™¨é«˜å¹¶å‘èƒ½åŠ›ã€‚</p><p>è€ŒWebSocketå°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="æ€ä¹ˆåšåˆ°çš„"><a class="header-anchor" href="#æ€ä¹ˆåšåˆ°çš„">Â¶</a>æ€ä¹ˆåšåˆ°çš„ ?</h2><p>WebSocketåŸºäºHTTPåè®®,å€Ÿç”¨HTTPçš„åè®®å®Œæˆä¸€éƒ¨åˆ†æ¡æ‰‹ã€‚<br>åœ¨æ¡æ‰‹é˜¶æ®µæ˜¯ä¸€æ ·çš„ã€‚</p><p>ä¸‹é¢æ˜¯WebSocketçš„æ¡æ‰‹ï¼ˆå¦‚æœä½ ç»å¸¸çœ‹htppçš„åŒ…,å°±å¾ˆå®¹æ˜“çœ‹æ‡‚ä¸‹é¢çš„ä¸œè¥¿ï¼‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /chat HTTP/1.1</span><br><span class="line">Host: server.example.com</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br><span class="line">Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==</span><br><span class="line">Sec-WebSocket-Protocol: chat, superchat</span><br><span class="line">Sec-WebSocket-Version: 13</span><br><span class="line">Origin: http://example.com</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ¯”HTTPå¤šäº†å‡ ä¸ªä¸œè¥¿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤è¡Œä¼šå‘Šè¯‰æœåŠ¡å™¨ï¼šè¿™æ˜¯ä¸€ä¸ªWebSocketåè®®,è¯·ç”¨å¯¹åº”çš„æ¨¡å—å¤„ç†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==</span><br><span class="line">Sec-WebSocket-Protocol: chat, superchat</span><br><span class="line">Sec-WebSocket-Version: 13</span><br></pre></td></tr></table></figure><p>Sec-WebSocket-Key æ˜¯ä¸€ä¸ªBase64 encodeçš„å€¼ï¼Œè¿™ä¸ªæ˜¯æµè§ˆå™¨éšæœºç”Ÿæˆçš„å¯†æ–‡,è¦æ±‚æœåŠ¡ç«¯å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹åº”çš„åŠ å¯†Sec-WebSocket-Acceptåº”ç­”,å¦åˆ™å®¢æˆ·ç«¯ä¼šæŠ›å‡ºError during WebSocket handshakeé”™è¯¯ï¼Œå¹¶å…³é—­è¿æ¥ã€‚<br>Sec-WebSocket-Protocol æ˜¯ä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œç”¨æ¥åŒºåˆ†åŒURLä¸‹ï¼Œä¸åŒçš„æœåŠ¡æ‰€éœ€è¦çš„åè®®ã€‚<br>Sec-WebSocket-Version æ˜¯å‘Šè¯‰æœåŠ¡å™¨æ‰€ä½¿ç”¨çš„Websocket Draft(åè®®ç‰ˆæœ¬),ç°åœ¨éƒ½æ˜¯13ã€‚</p><p>ç„¶åæœåŠ¡å™¨ä¼šè¿”å›ä¸‹åˆ—ä¸œè¥¿ï¼Œè¡¨ç¤ºå·²ç»æ¥å—åˆ°è¯·æ±‚ï¼Œ æˆåŠŸå»ºç«‹Websocketå•¦ï¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 101 Switching Protocols</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Connection: Upgrade</span><br><span class="line">Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk=</span><br><span class="line">Sec-WebSocket-Protocol: chat</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±æ˜¯websocketé“¾æ¥æˆåŠŸ,æ¥ä¸‹æ¥å°±å¯ä»¥ä¸ç”¨requestå’Œresponseæ„‰å¿«çš„æ”¶å‘æ•°æ®äº†ã€‚<br>ä¸åŒçš„æœåŠ¡ç«¯æœ‰ä¸åŒè¯­è¨€çš„å®ç°æ–¹å¼,è€Œåœ¨å®¢æˆ·ç«¯é€šå¸¸ä½¿ç”¨jsæˆ–è€…å…¶ä»–å°è£…åº“ã€‚</p><p>å¯¹æ¯”ä¸€ä¸‹HTTPå’ŒWebSocket,æ˜¯è¿™æ ·çš„~~</p><h3 id="http"><a class="header-anchor" href="#http">Â¶</a>http:</h3><p>å®¢æˆ·ç«¯ï¼šç°åœ¨æ¯”ç‰¹å¸ä»·æ ¼å¤šå°‘ï¼<br>æœåŠ¡ç«¯ï¼š20000åˆ€ï¼<br>10så<br>å®¢æˆ·ç«¯ï¼šç°åœ¨æ¯”ç‰¹å¸ä»·æ ¼å¤šå°‘ï¼<br>æœåŠ¡ç«¯ï¼š18000åˆ€ï¼<br>å¼€å§‹è½®è¯¢~~~<br>å®¢æˆ·ç«¯ï¼šç°åœ¨æ¯”ç‰¹å¸ä»·æ ¼å¤šå°‘ï¼<br>0.5så<br>å®¢æˆ·ç«¯ï¼šç°åœ¨æ¯”ç‰¹å¸ä»·æ ¼å¤šå°‘ï¼<br>0.5så<br>å®¢æˆ·ç«¯ï¼šç°åœ¨æ¯”ç‰¹å¸ä»·æ ¼å¤šå°‘ï¼<br>æœåŠ¡ç«¯ï¼š19000åˆ€<br>æœåŠ¡ç«¯ï¼š19000åˆ€<br>æœåŠ¡ç«¯ï¼š@%#â€¦â€¦&amp;@<em>â€¦â€¦</em>#*ï¼ˆå†…å¿ƒos:ç´¯æ­»æˆ‘äº†ï¼Œä¸å¹²äº†ï¼ï¼‰</p><h3 id="WebSocket"><a class="header-anchor" href="#WebSocket">Â¶</a>WebSocket</h3><p>å¥¥ä¹‰â€“websocketé“¾æ¥ï¼ï¼<br>å®¢æˆ·ç«¯ï¼šè¦æ˜¯æ¯”ç‰¹å¸ä»·æ ¼å˜äº†åŠæ—¶å‘Šè¯‰æˆ‘ã€‚<br>æœåŠ¡ç«¯ï¼šokï¼Œæ²¡é—®é¢˜ã€‚<br>æœåŠ¡ç«¯ï¼šæƒŠå¤©å¤§æ¶ˆæ¯ï¼Œæ¯”ç‰¹å¸æš´è·Œï¼<br>å®¢æˆ·ç«¯ï¼šä¸æ…Œä¸æ…Œ,ç»§ç»­åŠ ä»“ã€‚<br>20så<br>æœåŠ¡ç«¯ï¼šæ¶¨äº†ï¼æ¶¨äº†ï¼<br>å®¢æˆ·ç«¯ï¼šè¿˜ä¼šå†æ¶¨ï¼ŒåŠ ä»“ï¼Œæ‹‰æ»¡ã€‚</p><p>æ€»ç»“å°±æ˜¯ï¼š<br>1  å»ºç«‹åœ¨ TCP åè®®ä¹‹ä¸Šï¼ŒæœåŠ¡å™¨ç«¯çš„å®ç°æ¯”è¾ƒå®¹æ˜“ã€‚<br>2  ä¸ HTTP åè®®æœ‰ç€è‰¯å¥½çš„å…¼å®¹æ€§ã€‚é»˜è®¤ç«¯å£ä¹Ÿæ˜¯80å’Œ443ï¼Œå¹¶ä¸”æ¡æ‰‹é˜¶æ®µé‡‡ç”¨ HTTP åè®®ï¼Œå› æ­¤æ¡æ‰‹æ—¶ä¸å®¹æ˜“å±è”½ï¼Œèƒ½é€šè¿‡å„ç§ HTTP ä»£ç†æœåŠ¡å™¨ã€‚<br>3  æ•°æ®æ ¼å¼æ¯”è¾ƒè½»é‡ï¼Œæ€§èƒ½å¼€é”€å°ï¼Œé€šä¿¡é«˜æ•ˆã€‚<br>4  å¯ä»¥å‘é€æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥å‘é€äºŒè¿›åˆ¶æ•°æ®ã€‚<br>5  æ²¡æœ‰åŒæºé™åˆ¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä¸ä»»æ„æœåŠ¡å™¨é€šä¿¡ã€‚<br>6  åè®®æ ‡è¯†ç¬¦æ˜¯wsï¼ˆå¦‚æœåŠ å¯†ï¼Œåˆ™ä¸ºwssï¼‰ï¼ŒæœåŠ¡å™¨ç½‘å€å°±æ˜¯ URLã€‚</p><h2 id="å®¢æˆ·ç«¯ä¾‹å­"><a class="header-anchor" href="#å®¢æˆ·ç«¯ä¾‹å­">Â¶</a>å®¢æˆ·ç«¯ä¾‹å­</h2><p>åœ¨å®¢æˆ·ç«¯,webSocketä½¿ç”¨èµ·æ¥å¾ˆç®€å•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ws = <span class="keyword">new</span> <span class="title class_">WebSocket</span>(<span class="string">&quot;wss://echo.websocket.org&quot;</span>);</span><br><span class="line"></span><br><span class="line">ws.<span class="property">onopen</span> = <span class="keyword">function</span>(<span class="params">evt</span>) &#123; </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Connection open ...&quot;</span>); </span><br><span class="line">  ws.<span class="title function_">send</span>(<span class="string">&quot;Hello WebSockets!&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ws.<span class="property">onmessage</span> = <span class="keyword">function</span>(<span class="params">evt</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="string">&quot;Received Message: &quot;</span> + evt.<span class="property">data</span>);</span><br><span class="line">  ws.<span class="title function_">close</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ws.<span class="property">onclose</span> = <span class="keyword">function</span>(<span class="params">evt</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Connection closed.&quot;</span>);</span><br><span class="line">&#125;;  </span><br></pre></td></tr></table></figure><p>åˆä¸­è‹±è¯­éƒ½èƒ½çœ‹æ‡‚æ˜¯ä»€ä¹ˆæ„æ€,å°±ä¸è§£é‡Šäº†ã€‚<br>å¦å¤–è¿˜æœ‰å¸¸ç”¨çš„webSocketåº“,<a href="http://xn--socket-hh4k.io">å¦‚socket.io</a>ã€‚</p><h3 id="api"><a class="header-anchor" href="#api">Â¶</a>api:</h3><p>webSocket.readyState readyStateå±æ€§è¿”å›å®ä¾‹å¯¹è±¡çš„å½“å‰çŠ¶æ€,0:è¡¨ç¤ºæ­£åœ¨è¿æ¥;1,è¡¨ç¤ºè¿æ¥æˆåŠŸ;<br>2ï¼Œè¡¨ç¤ºè¿æ¥æ­£åœ¨å…³é—­;3ï¼Œè¡¨ç¤ºè¿æ¥å·²ç»å…³é—­ï¼Œæˆ–è€…æ‰“å¼€è¿æ¥å¤±è´¥ã€‚<br>webSocket.onopen ç”¨äºæŒ‡å®šè¿æ¥æˆåŠŸåçš„å›è°ƒå‡½æ•°ã€‚<br>webSocket.onclose ç”¨äºæŒ‡å®šè¿æ¥å…³é—­åçš„å›è°ƒå‡½æ•°ã€‚<br>webSocket.onmessage ç”¨äºæŒ‡å®šæ”¶åˆ°æœåŠ¡å™¨æ•°æ®åçš„å›è°ƒå‡½æ•°ã€‚<br>webSocket.send() ç”¨äºå‘æœåŠ¡å™¨å‘é€æ•°æ®ã€‚<br>webSocket.bufferedAmount è¡¨ç¤ºè¿˜æœ‰å¤šå°‘å­—èŠ‚çš„äºŒè¿›åˆ¶æ•°æ®æ²¡æœ‰å‘é€å‡ºå»ã€‚<br>webSocket.onerror  ç”¨äºæŒ‡å®šæŠ¥é”™æ—¶çš„å›è°ƒå‡½æ•°ã€‚<br>ä»¥ä¸Šapiä»…ç®€å•ä»‹ç»ã€‚è¯¦æƒ…å‚ç…§å®˜æ–¹<br><strong><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebSocket">æ–‡æ¡£</a></strong></p><h2 id="æœåŠ¡ç«¯"><a class="header-anchor" href="#æœåŠ¡ç«¯">Â¶</a>æœåŠ¡ç«¯</h2><p>åŸºæœ¬ä¸Šæ”¯æŒç½‘ç»œç¼–ç¨‹çš„è¯­è¨€éƒ½å¯ä»¥åˆ›å»ºwebSocketæœåŠ¡,æ¯”å¦‚java,php,python,nodeç­‰ï¼Œç½‘ä¸Šéƒ½æœ‰è§£å†³æ–¹æ¡ˆã€‚<br>ä¸‹é¢æ˜¯ç”¨pythonå†™çš„æœåŠ¡ç«¯ä»£ç ,åªç”¨åˆ°äº†ä¸€äº›ç½‘ç»œæ¨¡å—,æ–¹ä¾¿ç†Ÿæ‚‰webSocketåè®®å†…å®¹å’Œæ­¥éª¤</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> simplejson</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">HOST = <span class="string">&#x27;127.0.0.1&#x27;</span></span><br><span class="line">PORT = <span class="number">9000</span></span><br><span class="line">MAGIC_STRING = <span class="string">&#x27;258EAFA5-E914-47DA-95CA-C5AB0DC85B11&#x27;</span></span><br><span class="line">HANDSHAKE_STRING = <span class="string">&quot;HTTP/1.1 101 Switching Protocols\r\n&quot;</span> \</span><br><span class="line">    <span class="string">&quot;Upgrade:WebSocket\r\n&quot;</span> \</span><br><span class="line">    <span class="string">&quot;Connection: Upgrade\r\n&quot;</span> \</span><br><span class="line">    <span class="string">&quot;Sec-WebSocket-Accept: &#123;1&#125;\r\n&quot;</span> \</span><br><span class="line">    <span class="string">&quot;WebSocket-Location: ws://&#123;2&#125;/chat\r\n&quot;</span> \</span><br><span class="line">    <span class="string">&quot;WebSocket-Protocol:chat\r\n\r\n&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_data</span>(<span class="params">msg</span>):</span><br><span class="line">    v = <span class="built_in">ord</span>(msg[<span class="number">1</span>]) &amp; <span class="number">0x7f</span></span><br><span class="line">    <span class="keyword">if</span> v == <span class="number">0x7e</span>:</span><br><span class="line">        p = <span class="number">4</span></span><br><span class="line">    <span class="keyword">elif</span> v == <span class="number">0x7f</span>:</span><br><span class="line">        p = <span class="number">10</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        p = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    mask = msg[p:p+<span class="number">4</span>]</span><br><span class="line">    data = msg[p+<span class="number">4</span>:]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join([<span class="built_in">chr</span>(<span class="built_in">ord</span>(v) ^ <span class="built_in">ord</span>(mask[k%<span class="number">4</span>])) <span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">enumerate</span>(data)])</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">start</span>():</span><br><span class="line">    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        sock.bind((HOST, PORT))</span><br><span class="line">        sock.listen(<span class="number">100</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;bind error&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">        sys.exit()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        conn, add = sock.accept()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            handshake(conn)</span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;finally&#x27;</span>)</span><br><span class="line">            conn.close()</span><br><span class="line"></span><br><span class="line">    sock.close()</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handshake</span>(<span class="params">conn</span>):</span><br><span class="line">    headers = &#123;&#125;</span><br><span class="line">    shake = conn.recv(<span class="number">1024</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span> shake</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">len</span>(shake):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;len error&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    header, data = shake.split(<span class="string">&#x27;\r\n\r\n&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> header.split(<span class="string">&#x27;\r\n&#x27;</span>)[<span class="number">1</span>:]:</span><br><span class="line">        key, value = line.split(<span class="string">&#x27;: &#x27;</span>, <span class="number">1</span>)</span><br><span class="line">        headers[key] = value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;Sec-WebSocket-Key&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> headers:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;this is not websocket, client close.&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span> headers</span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    sec_key = headers[<span class="string">&#x27;Sec-WebSocket-Key&#x27;</span>]</span><br><span class="line">    res_key = base64.b64encode(hashlib.sha1(sec_key + MAGIC_STRING).digest())</span><br><span class="line"></span><br><span class="line">    str_handshke = HANDSHAKE_STRING.replace(<span class="string">&#x27;&#123;1&#125;&#x27;</span>, res_key).replace(<span class="string">&#x27;&#123;2&#125;&#x27;</span>, HOST + <span class="string">&quot;:&quot;</span> + <span class="built_in">str</span>(PORT))</span><br><span class="line">    <span class="built_in">print</span> str_handshke</span><br><span class="line"></span><br><span class="line">    conn.send(str_handshke)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    conn.send(<span class="string">&#x27;%c%c%s&#x27;</span> % (<span class="number">0x81</span>, <span class="number">6</span>, <span class="string">&#x27;suren1&#x27;</span>))</span><br><span class="line">    msg = conn.recv(<span class="number">1024</span>)</span><br><span class="line">    msg = parse_data(msg)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;msg : &#x27;</span> + msg)</span><br><span class="line"></span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    conn.send(<span class="string">&#x27;%c%c%s&#x27;</span> % (<span class="number">0x81</span>, <span class="number">6</span>, <span class="string">&#x27;suren2&#x27;</span>))</span><br><span class="line">    msg = conn.recv(<span class="number">1024</span>)</span><br><span class="line">    msg = parse_data(msg)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;msg : &#x27;</span> + msg)</span><br><span class="line"></span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    conn.send(<span class="string">&#x27;%c%c%s&#x27;</span> % (<span class="number">0x81</span>, <span class="number">6</span>, <span class="string">&#x27;suren3&#x27;</span>))</span><br><span class="line">    msg = conn.recv(<span class="number">1024</span>)</span><br><span class="line">    msg = parse_data(msg)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;msg : &#x27;</span> + msg)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        start()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<br>ï¼ˆ1ï¼‰<a href="http://www.ruanyifeng.com/blog/2017/05/websocket.html">WebSocket æ•™ç¨‹</a><br>ï¼ˆ2ï¼‰<a href="https://www.zhihu.com/question/20215561">çŸ¥ä¹â€“WebSocket æ˜¯ä»€ä¹ˆåŸç†ï¼Ÿä¸ºä»€ä¹ˆå¯ä»¥å®ç°æŒä¹…è¿æ¥ï¼Ÿ</a><br>ï¼ˆ3ï¼‰<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebSocket">webApiæ¥å£|mdn</a></p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webSocket </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaScriptæŸ¯é‡ŒåŒ–</title>
      <link href="/posts/2b34be88/"/>
      <url>/posts/2b34be88/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸€ç›´å¯¹å‡½æ•°å¼ç¼–ç¨‹éå¸¸æ„Ÿå…´è¶£ï¼Œå› æ­¤æ—¶å¸¸ä¼šç•™æ„ä¸‹å…³äºå‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µï¼Œä¹‹å‰ä¸€ç›´å¬åˆ°æŸ¯é‡ŒåŒ–ï¼Œä½†æ˜¯åªé—»å…¶åï¼ŒçŸ¥é“ä»–å¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”è¿”å›å€¼ä¹Ÿæ˜¯å‡½æ•°ï¼Œè¿”å›çš„å‡½æ•°å¯ä»¥ç»§ç»­æ¥å—å‚æ•°è¿ç®—ï¼Œç›´åˆ°å‡ºå‘åŸå§‹å‡½æ•°çš„æ‰§è¡Œæ¡ä»¶ï¼Œå¹¶æ²¡æœ‰è®¤çœŸç ”ç©¶ï¼Œä»Šå¤©å°±èŠ±ç‚¹æ—¶é—´å¥½å¥½ç ”ç©¶ä¸‹ï¼Œçœ‹çœ‹å¦‚ä½•å†™å‡ºç¬¦åˆæŸ¯é‡ŒåŒ–ï¼ˆcurryï¼‰çš„å‡½æ•°ï¼Œ</p></blockquote><h3 id="ä»€ä¹ˆæ˜¯æŸ¯é‡ŒåŒ–ï¼Ÿ"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯æŸ¯é‡ŒåŒ–ï¼Ÿ">Â¶</a>ä»€ä¹ˆæ˜¯æŸ¯é‡ŒåŒ–ï¼Ÿ</h3><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒæŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰æ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°(æœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°)çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°ä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚è¿™ä¸ªæŠ€æœ¯ç”± Christopher Strachey ä»¥é€»è¾‘å­¦å®¶ Haskell Curry å‘½åçš„ï¼Œå°½ç®¡å®ƒæ˜¯ Moses Schnfinkel å’Œ Gottlob Frege å‘æ˜çš„ã€‚</p><blockquote><p>æŸ¯é‡ŒåŒ–å…è®¸æˆ‘ä»¬æŠŠå‡½æ•°ä¸ä¼ é€’ç»™å®ƒçš„å‚æ•°ç»“åˆï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚[å¼•è‡ªã€ŠJavaScriptè¯­è¨€ç²¾é«“ã€‹ï¼Œç¬¬43é¡µ æŸ¯é‡ŒåŒ–]</p></blockquote><p>é€šä¿—ä¸€ç‚¹ï¼Œå°±æ˜¯ä¹‹å‰çš„å‡½æ•°æ˜¯è¿™æ ·çš„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x,y</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€ŒæŸ¯é‡ŒåŒ–å</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> curryAdd = <span class="title function_">curry</span>(add)</span><br></pre></td></tr></table></figure><p>è¦è®¡ç®—çš„æ—¶å€™ï¼Œå°±æ˜¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">cuurryAdd</span>(<span class="number">1</span>)(<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>çœ‹ä¸Šå»å¾ˆä¸é”™å§ï¼Œåœ¨å‡½æ•°å¼ç¼–ç¨‹é‡Œé¢ï¼Œç®€åŒ–äº†ä»£ç çš„å¤æ‚æ€§ï¼Œä»£ç é‡å˜å°ï¼Œçœ‹èµ·æ¥æ›´åŠ ä¼˜é›…ï¼Œå¯ä»¥è¾¾åˆ°å»¶è¿Ÿè®¡ç®—çš„æ–¹æ³•ï¼Œä¸æ–­ä¼ å…¥å‚æ•°ï¼Œæœ€åæ‰§è¡Œï¼›å¦å¤–ï¼Œæ ¹æ®ç½‘ä¸Šçš„è¯´æ³•:</p><blockquote><p>å‡½æ•°æŸ¯é‡ŒåŒ–å…è®¸å’Œé¼“åŠ±ä½ åˆ†éš”å¤æ‚åŠŸèƒ½å˜æˆæ›´å°æ›´å®¹æ˜“åˆ†æçš„éƒ¨åˆ†ã€‚è¿™äº›å°çš„é€»è¾‘å•å…ƒæ˜¾ç„¶æ˜¯æ›´å®¹æ˜“ç†è§£å’Œæµ‹è¯•çš„ï¼Œç„¶åä½ çš„åº”ç”¨å°±ä¼šå˜æˆå¹²å‡€è€Œæ•´æ´çš„ç»„åˆï¼Œç”±ä¸€äº›å°å•å…ƒç»„æˆçš„ç»„åˆã€‚</p></blockquote><p>å…³äºè¿™ä¸€ç‚¹ï¼Œæˆ‘è¿˜åœ¨è‡ªå·±å“å‘³ã€‚æ˜¯ä¸æ˜¯å¯ä»¥çœç•¥å¤šå‚å‡½æ•°çš„å‚æ•°ï¼Œå¸¦å…¥å…·ä½“çš„å‡½æ•°ä»¥æä¾›æ›´ç»†åˆ†çš„æ–¹æ³•è°ƒç”¨ï¼Ÿ</p><h3 id="é€šç”¨çš„æŸ¯é‡ŒåŒ–æ–¹æ³•ï¼š"><a class="header-anchor" href="#é€šç”¨çš„æŸ¯é‡ŒåŒ–æ–¹æ³•ï¼š">Â¶</a>é€šç”¨çš„æŸ¯é‡ŒåŒ–æ–¹æ³•ï¼š</h3><p>[ä»£ç å¼•è‡ªã€ŠJavaScript: Novice to Ninjaã€‹ï¼Œç¬¬319é¡µ A General Curry Function]</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">curry</span>(<span class="params">func</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> fixedArgs = [].<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>,<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    args = fixedArgs.<span class="title function_">concat</span>([].<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>))</span><br><span class="line">    <span class="keyword">return</span> func.<span class="title function_">apply</span>(<span class="literal">null</span>, args);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">`   </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¿è¡Œæ–¹æ³•ï¼š</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>javascript</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">divider</span>(<span class="params">x,y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x/y;</span><br><span class="line">&#125;</span><br><span class="line">reciprocal = <span class="title function_">curry</span>(divider,<span class="number">1</span>);</span><br><span class="line"><span class="title function_">reciprocal</span>(<span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œreciprocal(2)ç›¸å½“äºæ‰§è¡Œcurry(divider,1)(2)ã€‚ç„¶åçœ‹curryæ–¹æ³•é€šè¿‡[].sliceæ–¹æ³•å»æ‰äº†ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå³function divider(x,y) {return x/y;}ï¼Œä¹‹åä¿ç•™äº†å˜é‡x=1å¹¶è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼ŒåŒæ—¶ä¼ å…¥å˜é‡y=2ï¼Œè¿™æ—¶fixedArgs.concat([].slice.call(arguments))å°†ä¹‹å‰ä¼ å…¥çš„å˜é‡xå’Œç°åœ¨ä¼ å…¥çš„å˜é‡yé‡æ–°ç»„åˆæˆä¸€ä¸ªæ•°ç»„ï¼Œæœ€åæ‰§è¡Œå‡½æ•°dividerï¼Œè¿™æ—¶ä½¿ç”¨çš„å‚æ•°æ˜¯ç»„åˆåçš„[1,2]ã€‚æ•´ä¸ªcurryæ–¹æ³•ä¸»è¦å·¥ä½œå°±æ˜¯ç»„ç»‡ä¸¤æ¬¡ä¼ å…¥çš„å‚æ•°ï¼Œç„¶åé€šè¿‡applyæ–¹å¼è°ƒç”¨å‡½æ•°ã€‚</p><p>æœ€åï¼Œå¦‚æœåˆ©ç”¨es6çš„æ–°ç‰¹æ€§çš„è¯ï¼Œå°±å¯ä»¥ä¸€è¡Œå†™å‡ºä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">currySingle</span> = fn =&gt; (<span class="function">(<span class="params">limit</span>) =&gt;</span> judgeCurry = <span class="function">(<span class="params">...args</span>) =&gt;</span> args.<span class="property">length</span> &gt;= limit ? fn.<span class="title function_">apply</span>(<span class="literal">null</span>, args) : <span class="function">(<span class="params">...args2</span>) =&gt;</span> judgeCurry.<span class="title function_">apply</span>(<span class="literal">null</span>, args.<span class="title function_">concat</span>(args2)))(fn.<span class="property">length</span>)</span><br></pre></td></tr></table></figure><p>æ‘˜è‡ª[ä¸€è¡Œå†™å‡ºjavascriptå‡½æ•°å¼ç¼–ç¨‹ä¸­çš„curry] <a href="https://segmentfault.com/a/1190000008248646">https://segmentfault.com/a/1190000008248646</a></p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaScript </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
